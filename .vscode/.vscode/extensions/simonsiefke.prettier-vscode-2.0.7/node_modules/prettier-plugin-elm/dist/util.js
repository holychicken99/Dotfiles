"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
exports.__esModule = true;
var execa_1 = __importDefault(require("execa"));
var cachedElmFormatVersion;
exports.getElmFormatVersion = function () {
    if (!cachedElmFormatVersion) {
        // a cleaner way of getting elm-format version
        // will be possible when this issue is closed:
        // https://github.com/avh4/elm-format/issues/425
        var help = execa_1["default"].sync("elm-format", ["--help"], {
            preferLocal: true,
            localDir: __dirname
        }).stdout;
        var helpMatch = help.match(/elm-format ([^\n]+)/);
        cachedElmFormatVersion = helpMatch ? helpMatch[1] : "unknown";
    }
    return cachedElmFormatVersion;
};
exports.formatTextWithElmFormat = function (text) {
    return execa_1["default"].sync("elm-format", ["--stdin", "--elm-version=0.19"], {
        input: text,
        preferLocal: true,
        localDir: __dirname,
        stripFinalNewline: false
    }).stdout;
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy91dGlsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsZ0RBQTBCO0FBRTFCLElBQUksc0JBQThCLENBQUM7QUFDdEIsUUFBQSxtQkFBbUIsR0FBRztJQUNqQyxJQUFJLENBQUMsc0JBQXNCLEVBQUU7UUFDM0IsOENBQThDO1FBQzlDLDhDQUE4QztRQUM5QyxnREFBZ0Q7UUFDaEQsSUFBTSxJQUFJLEdBQUcsa0JBQUssQ0FBQyxJQUFJLENBQUMsWUFBWSxFQUFFLENBQUMsUUFBUSxDQUFDLEVBQUU7WUFDaEQsV0FBVyxFQUFFLElBQUk7WUFDakIsUUFBUSxFQUFFLFNBQVM7U0FDcEIsQ0FBQyxDQUFDLE1BQU0sQ0FBQztRQUNWLElBQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMscUJBQXFCLENBQUMsQ0FBQztRQUNwRCxzQkFBc0IsR0FBRyxTQUFTLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDO0tBQy9EO0lBQ0QsT0FBTyxzQkFBc0IsQ0FBQztBQUNoQyxDQUFDLENBQUM7QUFFVyxRQUFBLHVCQUF1QixHQUFHLFVBQUMsSUFBWTtJQUNsRCxPQUFPLGtCQUFLLENBQUMsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDLFNBQVMsRUFBRSxvQkFBb0IsQ0FBQyxFQUFFO1FBQ2pFLEtBQUssRUFBRSxJQUFJO1FBQ1gsV0FBVyxFQUFFLElBQUk7UUFDakIsUUFBUSxFQUFFLFNBQVM7UUFDbkIsaUJBQWlCLEVBQUUsS0FBSztLQUN6QixDQUFDLENBQUMsTUFBTSxDQUFDO0FBQ1osQ0FBQyxDQUFDIn0=