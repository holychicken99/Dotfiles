/*! For license information please see extension.js.LICENSE.txt */
(()=>{var __webpack_modules__={376:module=>{"use strict";module.exports={mask:(source,mask,output,offset,length)=>{for(var i=0;i<length;i++)output[offset+i]=source[i]^mask[3&i]},unmask:(buffer,mask)=>{const length=buffer.length;for(var i=0;i<length;i++)buffer[i]^=mask[3&i]}}},891:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";try{module.exports=__webpack_require__(516)(__dirname)}catch(e){module.exports=__webpack_require__(376)}},484:function(module){module.exports=function(){"use strict";var t=1e3,e=6e4,n=36e5,r="millisecond",i="second",s="minute",u="hour",a="day",o="week",f="month",h="quarter",c="year",d="date",$="Invalid Date",l=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,M={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},m=function(t,e,n){var r=String(t);return!r||r.length>=e?t:""+Array(e+1-r.length).join(n)+t},g={s:m,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),i=n%60;return(e<=0?"+":"-")+m(r,2,"0")+":"+m(i,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),i=e.clone().add(r,f),s=n-i<0,u=e.clone().add(r+(s?-1:1),f);return+(-(r+(n-i)/(s?i-u:u-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:f,y:c,w:o,d:a,D:d,h:u,m:s,s:i,ms:r,Q:h}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},D="en",v={};v[D]=M;var p=function(t){return t instanceof _},S=function(t,e,n){var r;if(!t)return D;if("string"==typeof t)v[t]&&(r=t),e&&(v[t]=e,r=t);else{var i=t.name;v[i]=t,r=i}return!n&&r&&(D=r),r||!n&&D},w=function(t,e){if(p(t))return t.clone();var n="object"==typeof e?e:{};return n.date=t,n.args=arguments,new _(n)},O=g;O.l=S,O.i=p,O.w=function(t,e){return w(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var _=function(){function M(t){this.$L=S(t.locale,null,!0),this.parse(t)}var m=M.prototype;return m.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(O.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var r=e.match(l);if(r){var i=r[2]-1||0,s=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},m.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},m.$utils=function(){return O},m.isValid=function(){return!(this.$d.toString()===$)},m.isSame=function(t,e){var n=w(t);return this.startOf(e)<=n&&n<=this.endOf(e)},m.isAfter=function(t,e){return w(t)<this.startOf(e)},m.isBefore=function(t,e){return this.endOf(e)<w(t)},m.$g=function(t,e,n){return O.u(t)?this[e]:this.set(n,t)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(t,e){var n=this,r=!!O.u(e)||e,h=O.p(t),$=function(t,e){var i=O.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return r?i:i.endOf(a)},l=function(t,e){return O.w(n.toDate()[t].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},y=this.$W,M=this.$M,m=this.$D,g="set"+(this.$u?"UTC":"");switch(h){case c:return r?$(1,0):$(31,11);case f:return r?$(1,M):$(0,M+1);case o:var D=this.$locale().weekStart||0,v=(y<D?y+7:y)-D;return $(r?m-v:m+(6-v),M);case a:case d:return l(g+"Hours",0);case u:return l(g+"Minutes",1);case s:return l(g+"Seconds",2);case i:return l(g+"Milliseconds",3);default:return this.clone()}},m.endOf=function(t){return this.startOf(t,!1)},m.$set=function(t,e){var n,o=O.p(t),h="set"+(this.$u?"UTC":""),$=(n={},n[a]=h+"Date",n[d]=h+"Date",n[f]=h+"Month",n[c]=h+"FullYear",n[u]=h+"Hours",n[s]=h+"Minutes",n[i]=h+"Seconds",n[r]=h+"Milliseconds",n)[o],l=o===a?this.$D+(e-this.$W):e;if(o===f||o===c){var y=this.clone().set(d,1);y.$d[$](l),y.init(),this.$d=y.set(d,Math.min(this.$D,y.daysInMonth())).$d}else $&&this.$d[$](l);return this.init(),this},m.set=function(t,e){return this.clone().$set(t,e)},m.get=function(t){return this[O.p(t)]()},m.add=function(r,h){var d,$=this;r=Number(r);var l=O.p(h),y=function(t){var e=w($);return O.w(e.date(e.date()+Math.round(t*r)),$)};if(l===f)return this.set(f,this.$M+r);if(l===c)return this.set(c,this.$y+r);if(l===a)return y(1);if(l===o)return y(7);var M=(d={},d[s]=e,d[u]=n,d[i]=t,d)[l]||1,m=this.$d.getTime()+r*M;return O.w(m,this)},m.subtract=function(t,e){return this.add(-1*t,e)},m.format=function(t){var e=this;if(!this.isValid())return $;var n=t||"YYYY-MM-DDTHH:mm:ssZ",r=O.z(this),i=this.$locale(),s=this.$H,u=this.$m,a=this.$M,o=i.weekdays,f=i.months,h=function(t,r,i,s){return t&&(t[r]||t(e,n))||i[r].substr(0,s)},c=function(t){return O.s(s%12||12,t,"0")},d=i.meridiem||function(t,e,n){var r=t<12?"AM":"PM";return n?r.toLowerCase():r},l={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:O.s(a+1,2,"0"),MMM:h(i.monthsShort,a,f,3),MMMM:h(f,a),D:this.$D,DD:O.s(this.$D,2,"0"),d:String(this.$W),dd:h(i.weekdaysMin,this.$W,o,2),ddd:h(i.weekdaysShort,this.$W,o,3),dddd:o[this.$W],H:String(s),HH:O.s(s,2,"0"),h:c(1),hh:c(2),a:d(s,u,!0),A:d(s,u,!1),m:String(u),mm:O.s(u,2,"0"),s:String(this.$s),ss:O.s(this.$s,2,"0"),SSS:O.s(this.$ms,3,"0"),Z:r};return n.replace(y,(function(t,e){return e||l[t]||r.replace(":","")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(r,d,$){var l,y=O.p(d),M=w(r),m=(M.utcOffset()-this.utcOffset())*e,g=this-M,D=O.m(this,M);return D=(l={},l[c]=D/12,l[f]=D,l[h]=D/3,l[o]=(g-m)/6048e5,l[a]=(g-m)/864e5,l[u]=g/n,l[s]=g/e,l[i]=g/t,l)[y]||g,$?D:O.a(D)},m.daysInMonth=function(){return this.endOf(f).$D},m.$locale=function(){return v[this.$L]},m.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=S(t,e,!0);return r&&(n.$L=r),n},m.clone=function(){return O.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},M}(),b=_.prototype;return w.prototype=b,[["$ms",r],["$s",i],["$m",s],["$H",u],["$W",a],["$M",f],["$y",c],["$D",d]].forEach((function(t){b[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),w.extend=function(t,e){return t.$i||(t(e,_,w),t.$i=!0),w},w.locale=S,w.isDayjs=p,w.unix=function(t){return w(1e3*t)},w.en=v[D],w.Ls=v,w.p={},w}()},457:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const EventEmitter=__webpack_require__(614),{setTimeout,clearTimeout}=__webpack_require__(213),fetch=__webpack_require__(574),transports=__webpack_require__(417),{RPCCommands,RPCEvents,RelationshipTypes}=__webpack_require__(875),{pid:getPid,uuid}=__webpack_require__(727);module.exports=class RPCClient extends EventEmitter{constructor(options={}){super(),this.options=options,this.accessToken=null,this.clientId=null,this.application=null,this.user=null;const Transport=transports[options.transport];if(!Transport)throw new TypeError("RPC_INVALID_TRANSPORT",options.transport);this.fetch=(method,path,{data,query}={})=>fetch(`${this.fetch.endpoint}${path}${query?new URLSearchParams(query):""}`,{method,body:data,headers:{Authorization:`Bearer ${this.accessToken}`}}).then((async r=>{const body=await r.json();if(!r.ok){const e=new Error(r.status);throw e.body=body,e}return body})),this.fetch.endpoint="https://discord.com/api",this.transport=new Transport(this),this.transport.on("message",this._onRpcMessage.bind(this)),this._expecting=new Map,this._connectPromise=void 0}connect(clientId){return this._connectPromise||(this._connectPromise=new Promise(((resolve,reject)=>{this.clientId=clientId;const timeout=setTimeout((()=>reject(new Error("RPC_CONNECTION_TIMEOUT"))),1e4);timeout.unref(),this.once("connected",(()=>{clearTimeout(timeout),resolve(this)})),this.transport.once("close",(()=>{this._expecting.forEach((e=>{e.reject(new Error("connection closed"))})),this.emit("disconnected"),reject(new Error("connection closed"))})),this.transport.connect().catch(reject)}))),this._connectPromise}async login(options={}){let{clientId,accessToken}=options;return await this.connect(clientId),options.scopes?(accessToken||(accessToken=await this.authorize(options)),this.authenticate(accessToken)):(this.emit("ready"),this)}request(cmd,args,evt){return new Promise(((resolve,reject)=>{const nonce=uuid();this.transport.send({cmd,args,evt,nonce}),this._expecting.set(nonce,{resolve,reject})}))}_onRpcMessage(message){if(message.cmd===RPCCommands.DISPATCH&&message.evt===RPCEvents.READY)message.data.user&&(this.user=message.data.user),this.emit("connected");else if(this._expecting.has(message.nonce)){const{resolve,reject}=this._expecting.get(message.nonce);if("ERROR"===message.evt){const e=new Error(message.data.message);e.code=message.data.code,e.data=message.data,reject(e)}else resolve(message.data);this._expecting.delete(message.nonce)}else this.emit(message.evt,message.data)}async authorize({scopes,clientSecret,rpcToken,redirectUri,prompt}={}){if(clientSecret&&!0===rpcToken){rpcToken=(await this.fetch("POST","/oauth2/token/rpc",{data:new URLSearchParams({client_id:this.clientId,client_secret:clientSecret})})).rpc_token}const{code}=await this.request("AUTHORIZE",{scopes,client_id:this.clientId,prompt,rpc_token:rpcToken});return(await this.fetch("POST","/oauth2/token",{data:new URLSearchParams({client_id:this.clientId,client_secret:clientSecret,code,grant_type:"authorization_code",redirect_uri:redirectUri})})).access_token}authenticate(accessToken){return this.request("AUTHENTICATE",{access_token:accessToken}).then((({application,user})=>(this.accessToken=accessToken,this.application=application,this.user=user,this.emit("ready"),this)))}getGuild(id,timeout){return this.request(RPCCommands.GET_GUILD,{guild_id:id,timeout})}getGuilds(timeout){return this.request(RPCCommands.GET_GUILDS,{timeout})}getChannel(id,timeout){return this.request(RPCCommands.GET_CHANNEL,{channel_id:id,timeout})}async getChannels(id,timeout){const{channels}=await this.request(RPCCommands.GET_CHANNELS,{timeout,guild_id:id});return channels}setCertifiedDevices(devices){return this.request(RPCCommands.SET_CERTIFIED_DEVICES,{devices:devices.map((d=>({type:d.type,id:d.uuid,vendor:d.vendor,model:d.model,related:d.related,echo_cancellation:d.echoCancellation,noise_suppression:d.noiseSuppression,automatic_gain_control:d.automaticGainControl,hardware_mute:d.hardwareMute})))})}setUserVoiceSettings(id,settings){return this.request(RPCCommands.SET_USER_VOICE_SETTINGS,{user_id:id,pan:settings.pan,mute:settings.mute,volume:settings.volume})}selectVoiceChannel(id,{timeout,force=!1}={}){return this.request(RPCCommands.SELECT_VOICE_CHANNEL,{channel_id:id,timeout,force})}selectTextChannel(id,{timeout}={}){return this.request(RPCCommands.SELECT_TEXT_CHANNEL,{channel_id:id,timeout})}getVoiceSettings(){return this.request(RPCCommands.GET_VOICE_SETTINGS).then((s=>({automaticGainControl:s.automatic_gain_control,echoCancellation:s.echo_cancellation,noiseSuppression:s.noise_suppression,qos:s.qos,silenceWarning:s.silence_warning,deaf:s.deaf,mute:s.mute,input:{availableDevices:s.input.available_devices,device:s.input.device_id,volume:s.input.volume},output:{availableDevices:s.output.available_devices,device:s.output.device_id,volume:s.output.volume},mode:{type:s.mode.type,autoThreshold:s.mode.auto_threshold,threshold:s.mode.threshold,shortcut:s.mode.shortcut,delay:s.mode.delay}})))}setVoiceSettings(args){return this.request(RPCCommands.SET_VOICE_SETTINGS,{automatic_gain_control:args.automaticGainControl,echo_cancellation:args.echoCancellation,noise_suppression:args.noiseSuppression,qos:args.qos,silence_warning:args.silenceWarning,deaf:args.deaf,mute:args.mute,input:args.input?{device_id:args.input.device,volume:args.input.volume}:void 0,output:args.output?{device_id:args.output.device,volume:args.output.volume}:void 0,mode:args.mode?{type:args.mode.type,auto_threshold:args.mode.autoThreshold,threshold:args.mode.threshold,shortcut:args.mode.shortcut,delay:args.mode.delay}:void 0})}captureShortcut(callback){const subid=function subKey(event,args){return`${event}${JSON.stringify(args)}`}(RPCEvents.CAPTURE_SHORTCUT_CHANGE),stop=()=>(this._subscriptions.delete(subid),this.request(RPCCommands.CAPTURE_SHORTCUT,{action:"STOP"}));return this._subscriptions.set(subid,(({shortcut})=>{callback(shortcut,stop)})),this.request(RPCCommands.CAPTURE_SHORTCUT,{action:"START"}).then((()=>stop))}setActivity(args={},pid=getPid()){let timestamps,assets,party,secrets;if(args.startTimestamp||args.endTimestamp){if(timestamps={start:args.startTimestamp,end:args.endTimestamp},timestamps.start instanceof Date&&(timestamps.start=Math.round(timestamps.start.getTime())),timestamps.end instanceof Date&&(timestamps.end=Math.round(timestamps.end.getTime())),timestamps.start>2147483647e3)throw new RangeError("timestamps.start must fit into a unix timestamp");if(timestamps.end>2147483647e3)throw new RangeError("timestamps.end must fit into a unix timestamp")}return(args.largeImageKey||args.largeImageText||args.smallImageKey||args.smallImageText)&&(assets={large_image:args.largeImageKey,large_text:args.largeImageText,small_image:args.smallImageKey,small_text:args.smallImageText}),(args.partySize||args.partyId||args.partyMax)&&(party={id:args.partyId},(args.partySize||args.partyMax)&&(party.size=[args.partySize,args.partyMax])),(args.matchSecret||args.joinSecret||args.spectateSecret)&&(secrets={match:args.matchSecret,join:args.joinSecret,spectate:args.spectateSecret}),this.request(RPCCommands.SET_ACTIVITY,{pid,activity:{state:args.state,details:args.details,timestamps,assets,party,secrets,buttons:args.buttons,instance:!!args.instance}})}clearActivity(pid=getPid()){return this.request(RPCCommands.SET_ACTIVITY,{pid})}sendJoinInvite(user){return this.request(RPCCommands.SEND_ACTIVITY_JOIN_INVITE,{user_id:user.id||user})}sendJoinRequest(user){return this.request(RPCCommands.SEND_ACTIVITY_JOIN_REQUEST,{user_id:user.id||user})}closeJoinRequest(user){return this.request(RPCCommands.CLOSE_ACTIVITY_JOIN_REQUEST,{user_id:user.id||user})}createLobby(type,capacity,metadata){return this.request(RPCCommands.CREATE_LOBBY,{type,capacity,metadata})}updateLobby(lobby,{type,owner,capacity,metadata}={}){return this.request(RPCCommands.UPDATE_LOBBY,{id:lobby.id||lobby,type,owner_id:owner&&owner.id||owner,capacity,metadata})}deleteLobby(lobby){return this.request(RPCCommands.DELETE_LOBBY,{id:lobby.id||lobby})}connectToLobby(id,secret){return this.request(RPCCommands.CONNECT_TO_LOBBY,{id,secret})}sendToLobby(lobby,data){return this.request(RPCCommands.SEND_TO_LOBBY,{id:lobby.id||lobby,data})}disconnectFromLobby(lobby){return this.request(RPCCommands.DISCONNECT_FROM_LOBBY,{id:lobby.id||lobby})}updateLobbyMember(lobby,user,metadata){return this.request(RPCCommands.UPDATE_LOBBY_MEMBER,{lobby_id:lobby.id||lobby,user_id:user.id||user,metadata})}getRelationships(){const types=Object.keys(RelationshipTypes);return this.request(RPCCommands.GET_RELATIONSHIPS).then((o=>o.relationships.map((r=>({...r,type:types[r.type]})))))}async subscribe(event,args){return await this.request(RPCCommands.SUBSCRIBE,args,event),{unsubscribe:()=>this.request(RPCCommands.UNSUBSCRIBE,args,event)}}async destroy(){await this.transport.close()}}},875:(__unused_webpack_module,exports)=>{"use strict";function keyMirror(arr){const tmp={};for(const value of arr)tmp[value]=value;return tmp}exports.browser="undefined"!=typeof window,exports.RPCCommands=keyMirror(["DISPATCH","AUTHORIZE","AUTHENTICATE","GET_GUILD","GET_GUILDS","GET_CHANNEL","GET_CHANNELS","CREATE_CHANNEL_INVITE","GET_RELATIONSHIPS","GET_USER","SUBSCRIBE","UNSUBSCRIBE","SET_USER_VOICE_SETTINGS","SET_USER_VOICE_SETTINGS_2","SELECT_VOICE_CHANNEL","GET_SELECTED_VOICE_CHANNEL","SELECT_TEXT_CHANNEL","GET_VOICE_SETTINGS","SET_VOICE_SETTINGS_2","SET_VOICE_SETTINGS","CAPTURE_SHORTCUT","SET_ACTIVITY","SEND_ACTIVITY_JOIN_INVITE","CLOSE_ACTIVITY_JOIN_REQUEST","ACTIVITY_INVITE_USER","ACCEPT_ACTIVITY_INVITE","INVITE_BROWSER","DEEP_LINK","CONNECTIONS_CALLBACK","BRAINTREE_POPUP_BRIDGE_CALLBACK","GIFT_CODE_BROWSER","GUILD_TEMPLATE_BROWSER","OVERLAY","BROWSER_HANDOFF","SET_CERTIFIED_DEVICES","GET_IMAGE","CREATE_LOBBY","UPDATE_LOBBY","DELETE_LOBBY","UPDATE_LOBBY_MEMBER","CONNECT_TO_LOBBY","DISCONNECT_FROM_LOBBY","SEND_TO_LOBBY","SEARCH_LOBBIES","CONNECT_TO_LOBBY_VOICE","DISCONNECT_FROM_LOBBY_VOICE","SET_OVERLAY_LOCKED","OPEN_OVERLAY_ACTIVITY_INVITE","OPEN_OVERLAY_GUILD_INVITE","OPEN_OVERLAY_VOICE_SETTINGS","VALIDATE_APPLICATION","GET_ENTITLEMENT_TICKET","GET_APPLICATION_TICKET","START_PURCHASE","GET_SKUS","GET_ENTITLEMENTS","GET_NETWORKING_CONFIG","NETWORKING_SYSTEM_METRICS","NETWORKING_PEER_METRICS","NETWORKING_CREATE_TOKEN","SET_USER_ACHIEVEMENT","GET_USER_ACHIEVEMENTS"]),exports.RPCEvents=keyMirror(["CURRENT_USER_UPDATE","GUILD_STATUS","GUILD_CREATE","CHANNEL_CREATE","RELATIONSHIP_UPDATE","VOICE_CHANNEL_SELECT","VOICE_STATE_CREATE","VOICE_STATE_DELETE","VOICE_STATE_UPDATE","VOICE_SETTINGS_UPDATE","VOICE_SETTINGS_UPDATE_2","VOICE_CONNECTION_STATUS","SPEAKING_START","SPEAKING_STOP","GAME_JOIN","GAME_SPECTATE","ACTIVITY_JOIN","ACTIVITY_JOIN_REQUEST","ACTIVITY_SPECTATE","ACTIVITY_INVITE","NOTIFICATION_CREATE","MESSAGE_CREATE","MESSAGE_UPDATE","MESSAGE_DELETE","LOBBY_DELETE","LOBBY_UPDATE","LOBBY_MEMBER_CONNECT","LOBBY_MEMBER_DISCONNECT","LOBBY_MEMBER_UPDATE","LOBBY_MESSAGE","CAPTURE_SHORTCUT_CHANGE","OVERLAY","OVERLAY_UPDATE","ENTITLEMENT_CREATE","ENTITLEMENT_DELETE","USER_ACHIEVEMENT_UPDATE","READY","ERROR"]),exports.RPCErrors={CAPTURE_SHORTCUT_ALREADY_LISTENING:5004,GET_GUILD_TIMED_OUT:5002,INVALID_ACTIVITY_JOIN_REQUEST:4012,INVALID_ACTIVITY_SECRET:5005,INVALID_CHANNEL:4005,INVALID_CLIENTID:4007,INVALID_COMMAND:4002,INVALID_ENTITLEMENT:4015,INVALID_EVENT:4004,INVALID_GIFT_CODE:4016,INVALID_GUILD:4003,INVALID_INVITE:4011,INVALID_LOBBY:4013,INVALID_LOBBY_SECRET:4014,INVALID_ORIGIN:4008,INVALID_PAYLOAD:4e3,INVALID_PERMISSIONS:4006,INVALID_TOKEN:4009,INVALID_USER:4010,LOBBY_FULL:5007,NO_ELIGIBLE_ACTIVITY:5006,OAUTH2_ERROR:5e3,PURCHASE_CANCELED:5008,PURCHASE_ERROR:5009,RATE_LIMITED:5011,SELECT_CHANNEL_TIMED_OUT:5001,SELECT_VOICE_FORCE_REQUIRED:5003,SERVICE_UNAVAILABLE:1001,TRANSACTION_ABORTED:1002,UNAUTHORIZED_FOR_ACHIEVEMENT:5010,UNKNOWN_ERROR:1e3},exports.RPCCloseCodes={CLOSE_NORMAL:1e3,CLOSE_UNSUPPORTED:1003,CLOSE_ABNORMAL:1006,INVALID_CLIENTID:4e3,INVALID_ORIGIN:4001,RATELIMITED:4002,TOKEN_REVOKED:4003,INVALID_VERSION:4004,INVALID_ENCODING:4005},exports.LobbyTypes={PRIVATE:1,PUBLIC:2},exports.RelationshipTypes={NONE:0,FRIEND:1,BLOCKED:2,PENDING_INCOMING:3,PENDING_OUTGOING:4,IMPLICIT:5}},277:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const util=__webpack_require__(727);module.exports={Client:__webpack_require__(457),register:id=>util.register(`discord-${id}`)}},417:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports={ipc:__webpack_require__(110),websocket:__webpack_require__(572)}},110:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const net=__webpack_require__(631),EventEmitter=__webpack_require__(614),fetch=__webpack_require__(574),{uuid}=__webpack_require__(727),OPCodes_HANDSHAKE=0,OPCodes_FRAME=1,OPCodes_CLOSE=2,OPCodes_PING=3,OPCodes_PONG=4;function getIPC(id=0){return new Promise(((resolve,reject)=>{const path=function getIPCPath(id){if("win32"===process.platform)return`\\\\?\\pipe\\discord-ipc-${id}`;const{env:{XDG_RUNTIME_DIR,TMPDIR,TMP,TEMP}}=process;return`${(XDG_RUNTIME_DIR||TMPDIR||TMP||TEMP||"/tmp").replace(/\/$/,"")}/discord-ipc-${id}`}(id),onerror=()=>{id<10?resolve(getIPC(id+1)):reject(new Error("Could not connect"))},sock=net.createConnection(path,(()=>{sock.removeListener("error",onerror),resolve(sock)}));sock.once("error",onerror)}))}async function findEndpoint(tries=0){if(tries>30)throw new Error("Could not find endpoint");const endpoint="http://127.0.0.1:"+(6463+tries%10);try{return 404===(await fetch(endpoint)).status?endpoint:findEndpoint(tries+1)}catch(e){return findEndpoint(tries+1)}}function encode(op,data){data=JSON.stringify(data);const len=Buffer.byteLength(data),packet=Buffer.alloc(8+len);return packet.writeInt32LE(op,0),packet.writeInt32LE(len,4),packet.write(data,8,len),packet}const working={full:"",op:void 0};function decode(socket,callback){const packet=socket.read();if(!packet)return;let raw,{op}=working;if(""===working.full){op=working.op=packet.readInt32LE(0);const len=packet.readInt32LE(4);raw=packet.slice(8,len+8)}else raw=packet.toString();try{callback({op,data:JSON.parse(working.full+raw)}),working.full="",working.op=void 0}catch(err){working.full+=raw}decode(socket,callback)}module.exports=class IPCTransport extends EventEmitter{constructor(client){super(),this.client=client,this.socket=null}async connect(){const socket=this.socket=await getIPC();socket.on("close",this.onClose.bind(this)),socket.on("error",this.onClose.bind(this)),this.emit("open"),socket.write(encode(OPCodes_HANDSHAKE,{v:1,client_id:this.client.clientId})),socket.pause(),socket.on("readable",(()=>{decode(socket,(({op,data})=>{switch(op){case OPCodes_PING:this.send(data,OPCodes_PONG);break;case OPCodes_FRAME:if(!data)return;"AUTHORIZE"===data.cmd&&"ERROR"!==data.evt&&findEndpoint().then((endpoint=>{this.client.request.endpoint=endpoint})).catch((e=>{this.client.emit("error",e)})),this.emit("message",data);break;case OPCodes_CLOSE:this.emit("close",data)}}))}))}onClose(e){this.emit("close",e)}send(data,op=OPCodes_FRAME){this.socket.write(encode(op,data))}async close(){return new Promise((r=>{this.once("close",r),this.send({},OPCodes_CLOSE),this.socket.end()}))}ping(){this.send(uuid(),OPCodes_PING)}},module.exports.encode=encode,module.exports.decode=decode},572:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const EventEmitter=__webpack_require__(614),{browser}=__webpack_require__(875),WebSocket=browser?window.WebSocket:__webpack_require__(777);module.exports=class WebSocketTransport extends EventEmitter{constructor(client){super(),this.client=client,this.ws=null,this.tries=0}async connect(){const port=6463+this.tries%10;this.tries+=1,this.ws=new WebSocket(`ws://127.0.0.1:${port}/?v=1&client_id=${this.client.clientId}`,browser?void 0:{origin:this.client.options.origin}),this.ws.onopen=this.onOpen.bind(this),this.ws.onclose=this.onClose.bind(this),this.ws.onerror=this.onError.bind(this),this.ws.onmessage=this.onMessage.bind(this)}onOpen(){this.emit("open")}onClose(event){event.wasClean&&this.emit("close",event)}onError(event){try{this.ws.close()}catch{}this.tries>20?this.emit("error",event.error):setTimeout((()=>{this.connect()}),250)}onMessage(event){var s;this.emit("message",(s=event.data,JSON.parse(s)))}send(data){var d;this.ws.send((d=data,JSON.stringify(d)))}ping(){}close(){return new Promise((r=>{this.once("close",r),this.ws.close()}))}}},727:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";let register;try{const{app}=__webpack_require__(Object(function webpackMissingModule(){var e=new Error("Cannot find module 'electron'");throw e.code="MODULE_NOT_FOUND",e}()));register=app.setAsDefaultProtocolClient.bind(app)}catch(err){try{register=__webpack_require__(Object(function webpackMissingModule(){var e=new Error("Cannot find module 'register-scheme'");throw e.code="MODULE_NOT_FOUND",e}()))}catch(e){}}"function"!=typeof register&&(register=()=>!1);module.exports={pid:function pid(){return"undefined"!=typeof process?process.pid:null},register,uuid:()=>{let uuid="";for(let i=0;i<32;i+=1){let n;if(8!==i&&12!==i&&16!==i&&20!==i||(uuid+="-"),12===i)n=4;else{const random=16*Math.random()|0;n=16===i?3&random|0:random}uuid+=n.toString(16)}return uuid}}},630:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>lodash_es_throttle});const lodash_es_isObject=function isObject(value){var type=typeof value;return null!=value&&("object"==type||"function"==type)};const _freeGlobal="object"==typeof global&&global&&global.Object===Object&&global;var freeSelf="object"==typeof self&&self&&self.Object===Object&&self;const _root=_freeGlobal||freeSelf||Function("return this")();const lodash_es_now=function(){return _root.Date.now()};var reWhitespace=/\s/;const _trimmedEndIndex=function trimmedEndIndex(string){for(var index=string.length;index--&&reWhitespace.test(string.charAt(index)););return index};var reTrimStart=/^\s+/;const _baseTrim=function baseTrim(string){return string?string.slice(0,_trimmedEndIndex(string)+1).replace(reTrimStart,""):string};const _Symbol=_root.Symbol;var objectProto=Object.prototype,_getRawTag_hasOwnProperty=objectProto.hasOwnProperty,nativeObjectToString=objectProto.toString,symToStringTag=_Symbol?_Symbol.toStringTag:void 0;const _getRawTag=function getRawTag(value){var isOwn=_getRawTag_hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=void 0;var unmasked=!0}catch(e){}var result=nativeObjectToString.call(value);return unmasked&&(isOwn?value[symToStringTag]=tag:delete value[symToStringTag]),result};var _objectToString_nativeObjectToString=Object.prototype.toString;const _objectToString=function objectToString(value){return _objectToString_nativeObjectToString.call(value)};var _baseGetTag_symToStringTag=_Symbol?_Symbol.toStringTag:void 0;const _baseGetTag=function baseGetTag(value){return null==value?void 0===value?"[object Undefined]":"[object Null]":_baseGetTag_symToStringTag&&_baseGetTag_symToStringTag in Object(value)?_getRawTag(value):_objectToString(value)};const lodash_es_isObjectLike=function isObjectLike(value){return null!=value&&"object"==typeof value};const lodash_es_isSymbol=function isSymbol(value){return"symbol"==typeof value||lodash_es_isObjectLike(value)&&"[object Symbol]"==_baseGetTag(value)};var reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;const lodash_es_toNumber=function toNumber(value){if("number"==typeof value)return value;if(lodash_es_isSymbol(value))return NaN;if(lodash_es_isObject(value)){var other="function"==typeof value.valueOf?value.valueOf():value;value=lodash_es_isObject(other)?other+"":other}if("string"!=typeof value)return 0===value?value:+value;value=_baseTrim(value);var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NaN:+value};var nativeMax=Math.max,nativeMin=Math.min;const lodash_es_debounce=function debounce(func,wait,options){var lastArgs,lastThis,maxWait,result,timerId,lastCallTime,lastInvokeTime=0,leading=!1,maxing=!1,trailing=!0;if("function"!=typeof func)throw new TypeError("Expected a function");function invokeFunc(time){var args=lastArgs,thisArg=lastThis;return lastArgs=lastThis=void 0,lastInvokeTime=time,result=func.apply(thisArg,args)}function leadingEdge(time){return lastInvokeTime=time,timerId=setTimeout(timerExpired,wait),leading?invokeFunc(time):result}function shouldInvoke(time){var timeSinceLastCall=time-lastCallTime;return void 0===lastCallTime||timeSinceLastCall>=wait||timeSinceLastCall<0||maxing&&time-lastInvokeTime>=maxWait}function timerExpired(){var time=lodash_es_now();if(shouldInvoke(time))return trailingEdge(time);timerId=setTimeout(timerExpired,function remainingWait(time){var timeWaiting=wait-(time-lastCallTime);return maxing?nativeMin(timeWaiting,maxWait-(time-lastInvokeTime)):timeWaiting}(time))}function trailingEdge(time){return timerId=void 0,trailing&&lastArgs?invokeFunc(time):(lastArgs=lastThis=void 0,result)}function debounced(){var time=lodash_es_now(),isInvoking=shouldInvoke(time);if(lastArgs=arguments,lastThis=this,lastCallTime=time,isInvoking){if(void 0===timerId)return leadingEdge(lastCallTime);if(maxing)return clearTimeout(timerId),timerId=setTimeout(timerExpired,wait),invokeFunc(lastCallTime)}return void 0===timerId&&(timerId=setTimeout(timerExpired,wait)),result}return wait=lodash_es_toNumber(wait)||0,lodash_es_isObject(options)&&(leading=!!options.leading,maxWait=(maxing="maxWait"in options)?nativeMax(lodash_es_toNumber(options.maxWait)||0,wait):maxWait,trailing="trailing"in options?!!options.trailing:trailing),debounced.cancel=function cancel(){void 0!==timerId&&clearTimeout(timerId),lastInvokeTime=0,lastArgs=lastCallTime=lastThis=timerId=void 0},debounced.flush=function flush(){return void 0===timerId?result:trailingEdge(lodash_es_now())},debounced};const lodash_es_throttle=function throttle(func,wait,options){var leading=!0,trailing=!0;if("function"!=typeof func)throw new TypeError("Expected a function");return lodash_es_isObject(options)&&(leading="leading"in options?!!options.leading:leading,trailing="trailing"in options?!!options.trailing:trailing),lodash_es_debounce(func,wait,{leading,maxWait:wait,trailing})}},574:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__,Headers:()=>Headers,Request:()=>Request,Response:()=>Response,FetchError:()=>FetchError});var stream__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(413),http__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(605),url__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(835),https__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(211),zlib__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(761);const Readable=stream__WEBPACK_IMPORTED_MODULE_0__.Readable,BUFFER=Symbol("buffer"),TYPE=Symbol("type");class Blob{constructor(){this[TYPE]="";const blobParts=arguments[0],options=arguments[1],buffers=[];let size=0;if(blobParts){const a=blobParts,length=Number(a.length);for(let i=0;i<length;i++){const element=a[i];let buffer;buffer=element instanceof Buffer?element:ArrayBuffer.isView(element)?Buffer.from(element.buffer,element.byteOffset,element.byteLength):element instanceof ArrayBuffer?Buffer.from(element):element instanceof Blob?element[BUFFER]:Buffer.from("string"==typeof element?element:String(element)),size+=buffer.length,buffers.push(buffer)}}this[BUFFER]=Buffer.concat(buffers);let type=options&&void 0!==options.type&&String(options.type).toLowerCase();type&&!/[^\u0020-\u007E]/.test(type)&&(this[TYPE]=type)}get size(){return this[BUFFER].length}get type(){return this[TYPE]}text(){return Promise.resolve(this[BUFFER].toString())}arrayBuffer(){const buf=this[BUFFER],ab=buf.buffer.slice(buf.byteOffset,buf.byteOffset+buf.byteLength);return Promise.resolve(ab)}stream(){const readable=new Readable;return readable._read=function(){},readable.push(this[BUFFER]),readable.push(null),readable}toString(){return"[object Blob]"}slice(){const size=this.size,start=arguments[0],end=arguments[1];let relativeStart,relativeEnd;relativeStart=void 0===start?0:start<0?Math.max(size+start,0):Math.min(start,size),relativeEnd=void 0===end?size:end<0?Math.max(size+end,0):Math.min(end,size);const span=Math.max(relativeEnd-relativeStart,0),slicedBuffer=this[BUFFER].slice(relativeStart,relativeStart+span),blob=new Blob([],{type:arguments[2]});return blob[BUFFER]=slicedBuffer,blob}}function FetchError(message,type,systemError){Error.call(this,message),this.message=message,this.type=type,systemError&&(this.code=this.errno=systemError.code),Error.captureStackTrace(this,this.constructor)}let convert;Object.defineProperties(Blob.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}}),Object.defineProperty(Blob.prototype,Symbol.toStringTag,{value:"Blob",writable:!1,enumerable:!1,configurable:!0}),FetchError.prototype=Object.create(Error.prototype),FetchError.prototype.constructor=FetchError,FetchError.prototype.name="FetchError";try{convert=require("encoding").convert}catch(e){}const INTERNALS=Symbol("Body internals"),PassThrough=stream__WEBPACK_IMPORTED_MODULE_0__.PassThrough;function Body(body){var _this=this,_ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref$size=_ref.size;let size=void 0===_ref$size?0:_ref$size;var _ref$timeout=_ref.timeout;let timeout=void 0===_ref$timeout?0:_ref$timeout;null==body?body=null:isURLSearchParams(body)?body=Buffer.from(body.toString()):isBlob(body)||Buffer.isBuffer(body)||("[object ArrayBuffer]"===Object.prototype.toString.call(body)?body=Buffer.from(body):ArrayBuffer.isView(body)?body=Buffer.from(body.buffer,body.byteOffset,body.byteLength):body instanceof stream__WEBPACK_IMPORTED_MODULE_0__||(body=Buffer.from(String(body)))),this[INTERNALS]={body,disturbed:!1,error:null},this.size=size,this.timeout=timeout,body instanceof stream__WEBPACK_IMPORTED_MODULE_0__&&body.on("error",(function(err){const error="AbortError"===err.name?err:new FetchError(`Invalid response body while trying to fetch ${_this.url}: ${err.message}`,"system",err);_this[INTERNALS].error=error}))}function consumeBody(){var _this4=this;if(this[INTERNALS].disturbed)return Body.Promise.reject(new TypeError(`body used already for: ${this.url}`));if(this[INTERNALS].disturbed=!0,this[INTERNALS].error)return Body.Promise.reject(this[INTERNALS].error);let body=this.body;if(null===body)return Body.Promise.resolve(Buffer.alloc(0));if(isBlob(body)&&(body=body.stream()),Buffer.isBuffer(body))return Body.Promise.resolve(body);if(!(body instanceof stream__WEBPACK_IMPORTED_MODULE_0__))return Body.Promise.resolve(Buffer.alloc(0));let accum=[],accumBytes=0,abort=!1;return new Body.Promise((function(resolve,reject){let resTimeout;_this4.timeout&&(resTimeout=setTimeout((function(){abort=!0,reject(new FetchError(`Response timeout while trying to fetch ${_this4.url} (over ${_this4.timeout}ms)`,"body-timeout"))}),_this4.timeout)),body.on("error",(function(err){"AbortError"===err.name?(abort=!0,reject(err)):reject(new FetchError(`Invalid response body while trying to fetch ${_this4.url}: ${err.message}`,"system",err))})),body.on("data",(function(chunk){if(!abort&&null!==chunk){if(_this4.size&&accumBytes+chunk.length>_this4.size)return abort=!0,void reject(new FetchError(`content size at ${_this4.url} over limit: ${_this4.size}`,"max-size"));accumBytes+=chunk.length,accum.push(chunk)}})),body.on("end",(function(){if(!abort){clearTimeout(resTimeout);try{resolve(Buffer.concat(accum,accumBytes))}catch(err){reject(new FetchError(`Could not create Buffer from response body for ${_this4.url}: ${err.message}`,"system",err))}}}))}))}function isURLSearchParams(obj){return"object"==typeof obj&&"function"==typeof obj.append&&"function"==typeof obj.delete&&"function"==typeof obj.get&&"function"==typeof obj.getAll&&"function"==typeof obj.has&&"function"==typeof obj.set&&("URLSearchParams"===obj.constructor.name||"[object URLSearchParams]"===Object.prototype.toString.call(obj)||"function"==typeof obj.sort)}function isBlob(obj){return"object"==typeof obj&&"function"==typeof obj.arrayBuffer&&"string"==typeof obj.type&&"function"==typeof obj.stream&&"function"==typeof obj.constructor&&"string"==typeof obj.constructor.name&&/^(Blob|File)$/.test(obj.constructor.name)&&/^(Blob|File)$/.test(obj[Symbol.toStringTag])}function clone(instance){let p1,p2,body=instance.body;if(instance.bodyUsed)throw new Error("cannot clone body after it is used");return body instanceof stream__WEBPACK_IMPORTED_MODULE_0__&&"function"!=typeof body.getBoundary&&(p1=new PassThrough,p2=new PassThrough,body.pipe(p1),body.pipe(p2),instance[INTERNALS].body=p1,body=p2),body}function extractContentType(body){return null===body?null:"string"==typeof body?"text/plain;charset=UTF-8":isURLSearchParams(body)?"application/x-www-form-urlencoded;charset=UTF-8":isBlob(body)?body.type||null:Buffer.isBuffer(body)||"[object ArrayBuffer]"===Object.prototype.toString.call(body)||ArrayBuffer.isView(body)?null:"function"==typeof body.getBoundary?`multipart/form-data;boundary=${body.getBoundary()}`:body instanceof stream__WEBPACK_IMPORTED_MODULE_0__?null:"text/plain;charset=UTF-8"}function getTotalBytes(instance){const body=instance.body;return null===body?0:isBlob(body)?body.size:Buffer.isBuffer(body)?body.length:body&&"function"==typeof body.getLengthSync&&(body._lengthRetrievers&&0==body._lengthRetrievers.length||body.hasKnownLength&&body.hasKnownLength())?body.getLengthSync():null}Body.prototype={get body(){return this[INTERNALS].body},get bodyUsed(){return this[INTERNALS].disturbed},arrayBuffer(){return consumeBody.call(this).then((function(buf){return buf.buffer.slice(buf.byteOffset,buf.byteOffset+buf.byteLength)}))},blob(){let ct=this.headers&&this.headers.get("content-type")||"";return consumeBody.call(this).then((function(buf){return Object.assign(new Blob([],{type:ct.toLowerCase()}),{[BUFFER]:buf})}))},json(){var _this2=this;return consumeBody.call(this).then((function(buffer){try{return JSON.parse(buffer.toString())}catch(err){return Body.Promise.reject(new FetchError(`invalid json response body at ${_this2.url} reason: ${err.message}`,"invalid-json"))}}))},text(){return consumeBody.call(this).then((function(buffer){return buffer.toString()}))},buffer(){return consumeBody.call(this)},textConverted(){var _this3=this;return consumeBody.call(this).then((function(buffer){return function convertBody(buffer,headers){if("function"!=typeof convert)throw new Error("The package `encoding` must be installed to use the textConverted() function");const ct=headers.get("content-type");let res,str,charset="utf-8";ct&&(res=/charset=([^;]*)/i.exec(ct));str=buffer.slice(0,1024).toString(),!res&&str&&(res=/<meta.+?charset=(['"])(.+?)\1/i.exec(str));!res&&str&&(res=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(str),res||(res=/<meta[\s]+?content=(['"])(.+?)\1[\s]+?http-equiv=(['"])content-type\3/i.exec(str),res&&res.pop()),res&&(res=/charset=(.*)/i.exec(res.pop())));!res&&str&&(res=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(str));res&&(charset=res.pop(),"gb2312"!==charset&&"gbk"!==charset||(charset="gb18030"));return convert(buffer,"UTF-8",charset).toString()}(buffer,_this3.headers)}))}},Object.defineProperties(Body.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}}),Body.mixIn=function(proto){for(const name of Object.getOwnPropertyNames(Body.prototype))if(!(name in proto)){const desc=Object.getOwnPropertyDescriptor(Body.prototype,name);Object.defineProperty(proto,name,desc)}},Body.Promise=global.Promise;const invalidTokenRegex=/[^\^_`a-zA-Z\-0-9!#$%&'*+.|~]/,invalidHeaderCharRegex=/[^\t\x20-\x7e\x80-\xff]/;function validateName(name){if(name=`${name}`,invalidTokenRegex.test(name)||""===name)throw new TypeError(`${name} is not a legal HTTP header name`)}function validateValue(value){if(value=`${value}`,invalidHeaderCharRegex.test(value))throw new TypeError(`${value} is not a legal HTTP header value`)}function find(map,name){name=name.toLowerCase();for(const key in map)if(key.toLowerCase()===name)return key}const MAP=Symbol("map");class Headers{constructor(){let init=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(this[MAP]=Object.create(null),init instanceof Headers){const rawHeaders=init.raw(),headerNames=Object.keys(rawHeaders);for(const headerName of headerNames)for(const value of rawHeaders[headerName])this.append(headerName,value)}else if(null==init);else{if("object"!=typeof init)throw new TypeError("Provided initializer must be an object");{const method=init[Symbol.iterator];if(null!=method){if("function"!=typeof method)throw new TypeError("Header pairs must be iterable");const pairs=[];for(const pair of init){if("object"!=typeof pair||"function"!=typeof pair[Symbol.iterator])throw new TypeError("Each header pair must be iterable");pairs.push(Array.from(pair))}for(const pair of pairs){if(2!==pair.length)throw new TypeError("Each header pair must be a name/value tuple");this.append(pair[0],pair[1])}}else for(const key of Object.keys(init)){const value=init[key];this.append(key,value)}}}}get(name){validateName(name=`${name}`);const key=find(this[MAP],name);return void 0===key?null:this[MAP][key].join(", ")}forEach(callback){let thisArg=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,pairs=getHeaders(this),i=0;for(;i<pairs.length;){var _pairs$i=pairs[i];const name=_pairs$i[0],value=_pairs$i[1];callback.call(thisArg,value,name,this),pairs=getHeaders(this),i++}}set(name,value){value=`${value}`,validateName(name=`${name}`),validateValue(value);const key=find(this[MAP],name);this[MAP][void 0!==key?key:name]=[value]}append(name,value){value=`${value}`,validateName(name=`${name}`),validateValue(value);const key=find(this[MAP],name);void 0!==key?this[MAP][key].push(value):this[MAP][name]=[value]}has(name){return validateName(name=`${name}`),void 0!==find(this[MAP],name)}delete(name){validateName(name=`${name}`);const key=find(this[MAP],name);void 0!==key&&delete this[MAP][key]}raw(){return this[MAP]}keys(){return createHeadersIterator(this,"key")}values(){return createHeadersIterator(this,"value")}[Symbol.iterator](){return createHeadersIterator(this,"key+value")}}function getHeaders(headers){let kind=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"key+value";const keys=Object.keys(headers[MAP]).sort();return keys.map("key"===kind?function(k){return k.toLowerCase()}:"value"===kind?function(k){return headers[MAP][k].join(", ")}:function(k){return[k.toLowerCase(),headers[MAP][k].join(", ")]})}Headers.prototype.entries=Headers.prototype[Symbol.iterator],Object.defineProperty(Headers.prototype,Symbol.toStringTag,{value:"Headers",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(Headers.prototype,{get:{enumerable:!0},forEach:{enumerable:!0},set:{enumerable:!0},append:{enumerable:!0},has:{enumerable:!0},delete:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0}});const INTERNAL=Symbol("internal");function createHeadersIterator(target,kind){const iterator=Object.create(HeadersIteratorPrototype);return iterator[INTERNAL]={target,kind,index:0},iterator}const HeadersIteratorPrototype=Object.setPrototypeOf({next(){if(!this||Object.getPrototypeOf(this)!==HeadersIteratorPrototype)throw new TypeError("Value of `this` is not a HeadersIterator");var _INTERNAL=this[INTERNAL];const target=_INTERNAL.target,kind=_INTERNAL.kind,index=_INTERNAL.index,values=getHeaders(target,kind);return index>=values.length?{value:void 0,done:!0}:(this[INTERNAL].index=index+1,{value:values[index],done:!1})}},Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));function exportNodeCompatibleHeaders(headers){const obj=Object.assign({__proto__:null},headers[MAP]),hostHeaderKey=find(headers[MAP],"Host");return void 0!==hostHeaderKey&&(obj[hostHeaderKey]=obj[hostHeaderKey][0]),obj}Object.defineProperty(HeadersIteratorPrototype,Symbol.toStringTag,{value:"HeadersIterator",writable:!1,enumerable:!1,configurable:!0});const INTERNALS$1=Symbol("Response internals"),STATUS_CODES=http__WEBPACK_IMPORTED_MODULE_1__.STATUS_CODES;class Response{constructor(){let body=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Body.call(this,body,opts);const status=opts.status||200,headers=new Headers(opts.headers);if(null!=body&&!headers.has("Content-Type")){const contentType=extractContentType(body);contentType&&headers.append("Content-Type",contentType)}this[INTERNALS$1]={url:opts.url,status,statusText:opts.statusText||STATUS_CODES[status],headers,counter:opts.counter}}get url(){return this[INTERNALS$1].url||""}get status(){return this[INTERNALS$1].status}get ok(){return this[INTERNALS$1].status>=200&&this[INTERNALS$1].status<300}get redirected(){return this[INTERNALS$1].counter>0}get statusText(){return this[INTERNALS$1].statusText}get headers(){return this[INTERNALS$1].headers}clone(){return new Response(clone(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected})}}Body.mixIn(Response.prototype),Object.defineProperties(Response.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}}),Object.defineProperty(Response.prototype,Symbol.toStringTag,{value:"Response",writable:!1,enumerable:!1,configurable:!0});const INTERNALS$2=Symbol("Request internals"),parse_url=url__WEBPACK_IMPORTED_MODULE_2__.parse,format_url=url__WEBPACK_IMPORTED_MODULE_2__.format,streamDestructionSupported="destroy"in stream__WEBPACK_IMPORTED_MODULE_0__.Readable.prototype;function isRequest(input){return"object"==typeof input&&"object"==typeof input[INTERNALS$2]}class Request{constructor(input){let parsedURL,init=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};isRequest(input)?parsedURL=parse_url(input.url):(parsedURL=input&&input.href?parse_url(input.href):parse_url(`${input}`),input={});let method=init.method||input.method||"GET";if(method=method.toUpperCase(),(null!=init.body||isRequest(input)&&null!==input.body)&&("GET"===method||"HEAD"===method))throw new TypeError("Request with GET/HEAD method cannot have body");let inputBody=null!=init.body?init.body:isRequest(input)&&null!==input.body?clone(input):null;Body.call(this,inputBody,{timeout:init.timeout||input.timeout||0,size:init.size||input.size||0});const headers=new Headers(init.headers||input.headers||{});if(null!=inputBody&&!headers.has("Content-Type")){const contentType=extractContentType(inputBody);contentType&&headers.append("Content-Type",contentType)}let signal=isRequest(input)?input.signal:null;if("signal"in init&&(signal=init.signal),null!=signal&&!function isAbortSignal(signal){const proto=signal&&"object"==typeof signal&&Object.getPrototypeOf(signal);return!(!proto||"AbortSignal"!==proto.constructor.name)}(signal))throw new TypeError("Expected signal to be an instanceof AbortSignal");this[INTERNALS$2]={method,redirect:init.redirect||input.redirect||"follow",headers,parsedURL,signal},this.follow=void 0!==init.follow?init.follow:void 0!==input.follow?input.follow:20,this.compress=void 0!==init.compress?init.compress:void 0===input.compress||input.compress,this.counter=init.counter||input.counter||0,this.agent=init.agent||input.agent}get method(){return this[INTERNALS$2].method}get url(){return format_url(this[INTERNALS$2].parsedURL)}get headers(){return this[INTERNALS$2].headers}get redirect(){return this[INTERNALS$2].redirect}get signal(){return this[INTERNALS$2].signal}clone(){return new Request(this)}}function AbortError(message){Error.call(this,message),this.type="aborted",this.message=message,Error.captureStackTrace(this,this.constructor)}Body.mixIn(Request.prototype),Object.defineProperty(Request.prototype,Symbol.toStringTag,{value:"Request",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(Request.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}}),AbortError.prototype=Object.create(Error.prototype),AbortError.prototype.constructor=AbortError,AbortError.prototype.name="AbortError";const PassThrough$1=stream__WEBPACK_IMPORTED_MODULE_0__.PassThrough,resolve_url=url__WEBPACK_IMPORTED_MODULE_2__.resolve;function fetch(url,opts){if(!fetch.Promise)throw new Error("native promise missing, set fetch.Promise to your favorite alternative");return Body.Promise=fetch.Promise,new fetch.Promise((function(resolve,reject){const request=new Request(url,opts),options=function getNodeRequestOptions(request){const parsedURL=request[INTERNALS$2].parsedURL,headers=new Headers(request[INTERNALS$2].headers);if(headers.has("Accept")||headers.set("Accept","*/*"),!parsedURL.protocol||!parsedURL.hostname)throw new TypeError("Only absolute URLs are supported");if(!/^https?:$/.test(parsedURL.protocol))throw new TypeError("Only HTTP(S) protocols are supported");if(request.signal&&request.body instanceof stream__WEBPACK_IMPORTED_MODULE_0__.Readable&&!streamDestructionSupported)throw new Error("Cancellation of streamed requests with AbortSignal is not supported in node < 8");let contentLengthValue=null;if(null==request.body&&/^(POST|PUT)$/i.test(request.method)&&(contentLengthValue="0"),null!=request.body){const totalBytes=getTotalBytes(request);"number"==typeof totalBytes&&(contentLengthValue=String(totalBytes))}contentLengthValue&&headers.set("Content-Length",contentLengthValue),headers.has("User-Agent")||headers.set("User-Agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"),request.compress&&!headers.has("Accept-Encoding")&&headers.set("Accept-Encoding","gzip,deflate");let agent=request.agent;return"function"==typeof agent&&(agent=agent(parsedURL)),headers.has("Connection")||agent||headers.set("Connection","close"),Object.assign({},parsedURL,{method:request.method,headers:exportNodeCompatibleHeaders(headers),agent})}(request),send=("https:"===options.protocol?https__WEBPACK_IMPORTED_MODULE_3__:http__WEBPACK_IMPORTED_MODULE_1__).request,signal=request.signal;let response=null;const abort=function abort(){let error=new AbortError("The user aborted a request.");reject(error),request.body&&request.body instanceof stream__WEBPACK_IMPORTED_MODULE_0__.Readable&&request.body.destroy(error),response&&response.body&&response.body.emit("error",error)};if(signal&&signal.aborted)return void abort();const abortAndFinalize=function abortAndFinalize(){abort(),finalize()},req=send(options);let reqTimeout;function finalize(){req.abort(),signal&&signal.removeEventListener("abort",abortAndFinalize),clearTimeout(reqTimeout)}signal&&signal.addEventListener("abort",abortAndFinalize),request.timeout&&req.once("socket",(function(socket){reqTimeout=setTimeout((function(){reject(new FetchError(`network timeout at: ${request.url}`,"request-timeout")),finalize()}),request.timeout)})),req.on("error",(function(err){reject(new FetchError(`request to ${request.url} failed, reason: ${err.message}`,"system",err)),finalize()})),req.on("response",(function(res){clearTimeout(reqTimeout);const headers=function createHeadersLenient(obj){const headers=new Headers;for(const name of Object.keys(obj))if(!invalidTokenRegex.test(name))if(Array.isArray(obj[name]))for(const val of obj[name])invalidHeaderCharRegex.test(val)||(void 0===headers[MAP][name]?headers[MAP][name]=[val]:headers[MAP][name].push(val));else invalidHeaderCharRegex.test(obj[name])||(headers[MAP][name]=[obj[name]]);return headers}(res.headers);if(fetch.isRedirect(res.statusCode)){const location=headers.get("Location"),locationURL=null===location?null:resolve_url(request.url,location);switch(request.redirect){case"error":return reject(new FetchError(`uri requested responds with a redirect, redirect mode is set to error: ${request.url}`,"no-redirect")),void finalize();case"manual":if(null!==locationURL)try{headers.set("Location",locationURL)}catch(err){reject(err)}break;case"follow":if(null===locationURL)break;if(request.counter>=request.follow)return reject(new FetchError(`maximum redirect reached at: ${request.url}`,"max-redirect")),void finalize();const requestOpts={headers:new Headers(request.headers),follow:request.follow,counter:request.counter+1,agent:request.agent,compress:request.compress,method:request.method,body:request.body,signal:request.signal,timeout:request.timeout,size:request.size};return 303!==res.statusCode&&request.body&&null===getTotalBytes(request)?(reject(new FetchError("Cannot follow redirect with body being a readable stream","unsupported-redirect")),void finalize()):(303!==res.statusCode&&(301!==res.statusCode&&302!==res.statusCode||"POST"!==request.method)||(requestOpts.method="GET",requestOpts.body=void 0,requestOpts.headers.delete("content-length")),resolve(fetch(new Request(locationURL,requestOpts))),void finalize())}}res.once("end",(function(){signal&&signal.removeEventListener("abort",abortAndFinalize)}));let body=res.pipe(new PassThrough$1);const response_options={url:request.url,status:res.statusCode,statusText:res.statusMessage,headers,size:request.size,timeout:request.timeout,counter:request.counter},codings=headers.get("Content-Encoding");if(!request.compress||"HEAD"===request.method||null===codings||204===res.statusCode||304===res.statusCode)return response=new Response(body,response_options),void resolve(response);const zlibOptions={flush:zlib__WEBPACK_IMPORTED_MODULE_4__.Z_SYNC_FLUSH,finishFlush:zlib__WEBPACK_IMPORTED_MODULE_4__.Z_SYNC_FLUSH};if("gzip"==codings||"x-gzip"==codings)return body=body.pipe(zlib__WEBPACK_IMPORTED_MODULE_4__.createGunzip(zlibOptions)),response=new Response(body,response_options),void resolve(response);if("deflate"!=codings&&"x-deflate"!=codings){if("br"==codings&&"function"==typeof zlib__WEBPACK_IMPORTED_MODULE_4__.createBrotliDecompress)return body=body.pipe(zlib__WEBPACK_IMPORTED_MODULE_4__.createBrotliDecompress()),response=new Response(body,response_options),void resolve(response);response=new Response(body,response_options),resolve(response)}else{res.pipe(new PassThrough$1).once("data",(function(chunk){body=8==(15&chunk[0])?body.pipe(zlib__WEBPACK_IMPORTED_MODULE_4__.createInflate()):body.pipe(zlib__WEBPACK_IMPORTED_MODULE_4__.createInflateRaw()),response=new Response(body,response_options),resolve(response)}))}})),function writeToStream(dest,instance){const body=instance.body;null===body?dest.end():isBlob(body)?body.stream().pipe(dest):Buffer.isBuffer(body)?(dest.write(body),dest.end()):body.pipe(dest)}(req,request)}))}fetch.isRedirect=function(code){return 301===code||302===code||303===code||307===code||308===code},fetch.Promise=global.Promise;const __WEBPACK_DEFAULT_EXPORT__=fetch},516:(module,__unused_webpack_exports,__webpack_require__)=>{var fs=__webpack_require__(747),path=__webpack_require__(622),os=__webpack_require__(87),runtimeRequire=require,vars=process.config&&process.config.variables||{},prebuildsOnly=!!process.env.PREBUILDS_ONLY,abi=process.versions.modules,runtime=function isElectron(){return!(!process.versions||!process.versions.electron)||(!!process.env.ELECTRON_RUN_AS_NODE||"undefined"!=typeof window&&window.process&&"renderer"===window.process.type)}()?"electron":"node",arch=os.arch(),platform=os.platform(),libc=process.env.LIBC||(function isAlpine(platform){return"linux"===platform&&fs.existsSync("/etc/alpine-release")}(platform)?"musl":"glibc"),armv=process.env.ARM_VERSION||("arm64"===arch?"8":vars.arm_version)||"",uv=(process.versions.uv||"").split(".")[0];function load(dir){return runtimeRequire(load.path(dir))}function readdirSync(dir){try{return fs.readdirSync(dir)}catch(err){return[]}}function getFirst(dir,filter){var files=readdirSync(dir).filter(filter);return files[0]&&path.join(dir,files[0])}function matchBuild(name){return/\.node$/.test(name)}function parseTags(file){var arr=file.split("."),tags={file,specificity:0};if("node"===arr.pop()){for(var i=0;i<arr.length;i++){var tag=arr[i];if("node"===tag||"electron"===tag||"node-webkit"===tag)tags.runtime=tag;else if("napi"===tag)tags.napi=!0;else if("abi"===tag.slice(0,3))tags.abi=tag.slice(3);else if("uv"===tag.slice(0,2))tags.uv=tag.slice(2);else if("armv"===tag.slice(0,4))tags.armv=tag.slice(4);else{if("glibc"!==tag&&"musl"!==tag)continue;tags.libc=tag}tags.specificity++}return tags}}function matchTags(runtime,abi){return function(tags){return null!=tags&&(!(tags.runtime!==runtime&&!function runtimeAgnostic(tags){return"node"===tags.runtime&&tags.napi}(tags))&&(!(tags.abi!==abi&&!tags.napi)&&((!tags.uv||tags.uv===uv)&&((!tags.armv||tags.armv===armv)&&(!tags.libc||tags.libc===libc)))))}}function compareTags(runtime){return function(a,b){return a.runtime!==b.runtime?a.runtime===runtime?-1:1:a.abi!==b.abi?a.abi?-1:1:a.specificity!==b.specificity?a.specificity>b.specificity?-1:1:0}}module.exports=load,load.path=function(dir){dir=path.resolve(dir||".");try{var name=runtimeRequire(path.join(dir,"package.json")).name.toUpperCase().replace(/-/g,"_");process.env[name+"_PREBUILD"]&&(dir=process.env[name+"_PREBUILD"])}catch(err){}if(!prebuildsOnly){var release=getFirst(path.join(dir,"build/Release"),matchBuild);if(release)return release;var debug=getFirst(path.join(dir,"build/Debug"),matchBuild);if(debug)return debug}var prebuild=resolve(dir);if(prebuild)return prebuild;var nearby=resolve(path.dirname(process.execPath));if(nearby)return nearby;var target=["platform="+platform,"arch="+arch,"runtime="+runtime,"abi="+abi,"uv="+uv,armv?"armv="+armv:"","libc="+libc,"node="+process.versions.node,process.versions&&process.versions.electron?"electron="+process.versions.electron:"","webpack=true"].filter(Boolean).join(" ");throw new Error("No native build was found for "+target+"\n    loaded from: "+dir+"\n");function resolve(dir){var prebuilds=path.join(dir,"prebuilds",platform+"-"+arch),winner=readdirSync(prebuilds).map(parseTags).filter(matchTags(runtime,abi)).sort(compareTags(runtime))[0];if(winner)return path.join(prebuilds,winner.file)}},load.parseTags=parseTags,load.matchTags=matchTags,load.compareTags=compareTags},119:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.activity=void 0;const path_1=__webpack_require__(622),vscode_1=__webpack_require__(549),constants_1=__webpack_require__(601),logger_1=__webpack_require__(473),util_1=__webpack_require__(882);async function details(idling,editing,debugging){var _a,_b,_c;const config=util_1.getConfig();let raw=config[idling].replace("{empty}",constants_1.FAKE_EMPTY);if(vscode_1.window.activeTextEditor){const fileName=path_1.basename(vscode_1.window.activeTextEditor.document.fileName),{dir}=path_1.parse(vscode_1.window.activeTextEditor.document.fileName),split=dir.split(path_1.sep),dirName=split[split.length-1],noWorkspaceFound=config.lowerDetailsNoWorkspaceFound.replace("{empty}",constants_1.FAKE_EMPTY),workspaceFolder=vscode_1.workspace.getWorkspaceFolder(vscode_1.window.activeTextEditor.document.uri),workspaceFolderName=null!==(_a=null==workspaceFolder?void 0:workspaceFolder.name)&&void 0!==_a?_a:noWorkspaceFound,workspaceName=null!==(_c=null===(_b=vscode_1.workspace.name)||void 0===_b?void 0:_b.replace("(Workspace)",constants_1.EMPTY))&&void 0!==_c?_c:workspaceFolderName,workspaceAndFolder=`${workspaceName}${workspaceFolderName===constants_1.FAKE_EMPTY?"":` - ${workspaceFolderName}`}`,fileIcon=util_1.resolveFileIcon(vscode_1.window.activeTextEditor.document);if(raw=vscode_1.debug.activeDebugSession?config[debugging]:config[editing],workspaceFolder){const{name}=workspaceFolder,relativePath=vscode_1.workspace.asRelativePath(vscode_1.window.activeTextEditor.document.fileName).split(path_1.sep);relativePath.splice(-1,1),raw=raw.replace("{full_dir_name}",`${name}${path_1.sep}${relativePath.join(path_1.sep)}`)}try{raw=await async function fileDetails(_raw,document,selection){var _a,_b,_c,_d,_e,_f;let raw=_raw.slice();raw.includes("{total_lines}")&&(raw=raw.replace("{total_lines}",document.lineCount.toLocaleString()));raw.includes("{current_line}")&&(raw=raw.replace("{current_line}",(selection.active.line+1).toLocaleString()));raw.includes("{current_column}")&&(raw=raw.replace("{current_column}",(selection.active.character+1).toLocaleString()));if(raw.includes("{file_size}")){let size,currentDivision=0;try{({size}=await vscode_1.workspace.fs.stat(document.uri))}catch{size=document.getText().length}const originalSize=size;if(originalSize>1e3)for(size/=1e3,currentDivision++;size>1e3;)currentDivision++,size/=1e3;raw=raw.replace("{file_size}",`${originalSize>1e3?size.toFixed(2):size}${constants_1.FILE_SIZES[currentDivision]}`)}const git=await util_1.getGit();raw.includes("{git_branch}")&&(raw=(null==git?void 0:git.repositories.length)?raw.replace("{git_branch}",null!==(_c=null===(_b=null===(_a=git.repositories.find((repo=>repo.ui.selected)))||void 0===_a?void 0:_a.state.HEAD)||void 0===_b?void 0:_b.name)&&void 0!==_c?_c:constants_1.FAKE_EMPTY):raw.replace("{git_branch}",constants_1.UNKNOWN_GIT_BRANCH));raw.includes("{git_repo_name}")&&(raw=(null==git?void 0:git.repositories.length)?raw.replace("{git_repo_name}",null!==(_f=null===(_e=null===(_d=git.repositories.find((repo=>repo.ui.selected)))||void 0===_d?void 0:_d.state.remotes[0].fetchUrl)||void 0===_e?void 0:_e.split("/")[1].replace(".git",""))&&void 0!==_f?_f:constants_1.FAKE_EMPTY):raw.replace("{git_repo_name}",constants_1.UNKNOWN_GIT_REPO_NAME));return raw}(raw,vscode_1.window.activeTextEditor.document,vscode_1.window.activeTextEditor.selection)}catch(error){logger_1.log("ERROR",`Failed to generate file details: ${error}`)}raw=raw.replace("{file_name}",fileName).replace("{dir_name}",dirName).replace("{workspace}",workspaceName).replace("{workspace_folder}",workspaceFolderName).replace("{workspace_and_folder}",workspaceAndFolder).replace("{lang}",util_1.toLower(fileIcon)).replace("{Lang}",util_1.toTitle(fileIcon)).replace("{LANG}",util_1.toUpper(fileIcon))}return raw}exports.activity=async function activity(previous={}){var _a,_b,_c;const config=util_1.getConfig(),swapBigAndSmallImage=config.swapBigAndSmallImage,appName=vscode_1.env.appName,defaultSmallImageKey=vscode_1.debug.activeDebugSession?constants_1.DEBUG_IMAGE_KEY:appName.includes("Insiders")?constants_1.VSCODE_INSIDERS_IMAGE_KEY:constants_1.VSCODE_IMAGE_KEY,defaultSmallImageText=config.smallImage.replace("{app_name}",appName),defaultLargeImageText=config.largeImageIdling,removeDetails=config.removeDetails,removeLowerDetails=config.removeLowerDetails,removeRemoteRepository=config.removeRemoteRepository,git=await util_1.getGit();let state={details:removeDetails?void 0:await details("detailsIdling","detailsEditing","detailsDebugging"),startTimestamp:config.removeTimestamp?void 0:null!==(_a=previous.startTimestamp)&&void 0!==_a?_a:Date.now(),largeImageKey:constants_1.IDLE_IMAGE_KEY,largeImageText:defaultLargeImageText,smallImageKey:defaultSmallImageKey,smallImageText:defaultSmallImageText};if(swapBigAndSmallImage&&(state={...state,largeImageKey:defaultSmallImageKey,largeImageText:defaultSmallImageText,smallImageKey:constants_1.IDLE_IMAGE_KEY,smallImageText:defaultLargeImageText}),!removeRemoteRepository&&(null==git?void 0:git.repositories.length)){let repo=null===(_c=null===(_b=git.repositories.find((repo=>repo.ui.selected)))||void 0===_b?void 0:_b.state.remotes[0])||void 0===_c?void 0:_c.fetchUrl;repo&&(repo=repo.startsWith("git@")||repo.startsWith("ssh://")?repo.replace("ssh://","").replace(":","/").replace("git@","https://").replace(".git",""):repo.replace(/(https:\/\/)([^@]*)@(.*?$)/,"$1$3").replace(".git",""),state={...state,buttons:[{label:"View Repository",url:repo}]})}if(vscode_1.window.activeTextEditor){const largeImageKey=util_1.resolveFileIcon(vscode_1.window.activeTextEditor.document),largeImageText=config.largeImage.replace("{lang}",util_1.toLower(largeImageKey)).replace("{Lang}",util_1.toTitle(largeImageKey)).replace("{LANG}",util_1.toUpper(largeImageKey)).padEnd(2,constants_1.FAKE_EMPTY);state={...state,details:removeDetails?void 0:await details("detailsIdling","detailsEditing","detailsDebugging"),state:removeLowerDetails?void 0:await details("lowerDetailsIdling","lowerDetailsEditing","lowerDetailsDebugging")},state=swapBigAndSmallImage?{...state,smallImageKey:largeImageKey,smallImageText:largeImageText}:{...state,largeImageKey,largeImageText},logger_1.log("TRACE",`VSCode language id: ${vscode_1.window.activeTextEditor.document.languageId}`)}return state}},601:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UNKNOWN_GIT_REPO_NAME=exports.UNKNOWN_GIT_BRANCH=exports.VSCODE_INSIDERS_IMAGE_KEY=exports.VSCODE_IMAGE_KEY=exports.DEBUG_IMAGE_KEY=exports.IDLE_IMAGE_KEY=exports.FILE_SIZES=exports.FAKE_EMPTY=exports.EMPTY=exports.KNOWN_LANGUAGES=exports.KNOWN_EXTENSIONS=exports.CLIENT_ID=void 0;const languages_json_1=__webpack_require__(655).__importDefault(__webpack_require__(335));exports.CLIENT_ID="383226320970055681",exports.KNOWN_EXTENSIONS=languages_json_1.default.KNOWN_EXTENSIONS,exports.KNOWN_LANGUAGES=languages_json_1.default.KNOWN_LANGUAGES,exports.EMPTY="",exports.FAKE_EMPTY="​​",exports.FILE_SIZES=[" bytes","kb","mb","gb","tb"],exports.IDLE_IMAGE_KEY="vscode-big",exports.DEBUG_IMAGE_KEY="debug",exports.VSCODE_IMAGE_KEY="vscode",exports.VSCODE_INSIDERS_IMAGE_KEY="vscode-insiders",exports.UNKNOWN_GIT_BRANCH="Unknown",exports.UNKNOWN_GIT_REPO_NAME="Unknown"},473:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.log=void 0;const tslib_1=__webpack_require__(655),vscode_1=__webpack_require__(549),dayjs_1=tslib_1.__importDefault(__webpack_require__(484)),outputChannel=vscode_1.window.createOutputChannel("Discord Presence");function send(level,message){outputChannel.appendLine(`[${dayjs_1.default().format("DD/MM/YYYY HH:mm:ss")} - ${level}] ${message}`)}exports.log=function log(level,message){if("string"==typeof message)send(level,message);else if(message instanceof Error)send(level,message.message),message.stack&&send(level,message.stack);else if("object"==typeof message)try{send(level,JSON.stringify(message,null,2))}catch{}}},882:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getGit=exports.resolveFileIcon=exports.toTitle=exports.toUpper=exports.toLower=exports.getConfig=void 0;const path_1=__webpack_require__(622),vscode_1=__webpack_require__(549),constants_1=__webpack_require__(601),logger_1=__webpack_require__(473);let git;exports.getConfig=function getConfig(){return vscode_1.workspace.getConfiguration("discord")};exports.toLower=str=>str.toLocaleLowerCase();exports.toUpper=str=>str.toLocaleUpperCase();exports.toTitle=str=>exports.toLower(str).replace(/^\w/,(c=>exports.toUpper(c))),exports.resolveFileIcon=function resolveFileIcon(document){var _a;const filename=path_1.basename(document.fileName),findKnownExtension=Object.keys(constants_1.KNOWN_EXTENSIONS).find((key=>{if(filename.endsWith(key))return!0;const match=/^\/(.*)\/([mgiy]+)$/.exec(key);if(!match)return!1;return new RegExp(match[1],match[2]).test(filename)})),findKnownLanguage=constants_1.KNOWN_LANGUAGES.find((key=>key.language===document.languageId)),fileIcon=findKnownExtension?constants_1.KNOWN_EXTENSIONS[findKnownExtension]:findKnownLanguage?findKnownLanguage.image:null;return"string"==typeof fileIcon?fileIcon:null!==(_a=null==fileIcon?void 0:fileIcon.image)&&void 0!==_a?_a:"text"},exports.getGit=async function getGit(){if(git||null===git)return git;try{logger_1.log("DEBUG","Loading git extension");const gitExtension=vscode_1.extensions.getExtension("vscode.git");(null==gitExtension?void 0:gitExtension.isActive)||(logger_1.log("TRACE","Git extension not activated, activating..."),await(null==gitExtension?void 0:gitExtension.activate())),git=null==gitExtension?void 0:gitExtension.exports.getAPI(1)}catch(error){git=null,logger_1.log("ERROR",`Failed to load git extension, is git installed?; ${error}`)}return git}},655:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__extends:()=>__extends,__assign:()=>__assign,__rest:()=>__rest,__decorate:()=>__decorate,__param:()=>__param,__metadata:()=>__metadata,__awaiter:()=>__awaiter,__generator:()=>__generator,__createBinding:()=>__createBinding,__exportStar:()=>__exportStar,__values:()=>__values,__read:()=>__read,__spread:()=>__spread,__spreadArrays:()=>__spreadArrays,__spreadArray:()=>__spreadArray,__await:()=>__await,__asyncGenerator:()=>__asyncGenerator,__asyncDelegator:()=>__asyncDelegator,__asyncValues:()=>__asyncValues,__makeTemplateObject:()=>__makeTemplateObject,__importStar:()=>__importStar,__importDefault:()=>__importDefault,__classPrivateFieldGet:()=>__classPrivateFieldGet,__classPrivateFieldSet:()=>__classPrivateFieldSet});var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])})(d,b)};function __extends(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}var __assign=function(){return(__assign=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function __rest(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t}function __decorate(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r}function __param(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}}function __metadata(metadataKey,metadataValue){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(metadataKey,metadataValue)}function __awaiter(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))}function __generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}}var __createBinding=Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]};function __exportStar(m,o){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(o,p)||__createBinding(o,m,p)}function __values(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar}function __spread(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar}function __spreadArrays(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;var r=Array(s),k=0;for(i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r}function __spreadArray(to,from,pack){if(pack||2===arguments.length)for(var ar,i=0,l=from.length;i<l;i++)!ar&&i in from||(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||from)}function __await(v){return this instanceof __await?(this.v=v,this):new __await(v)}function __asyncGenerator(thisArg,_arguments,generator){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,g=generator.apply(thisArg,_arguments||[]),q=[];return i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i;function verb(n){g[n]&&(i[n]=function(v){return new Promise((function(a,b){q.push([n,v,a,b])>1||resume(n,v)}))})}function resume(n,v){try{!function step(r){r.value instanceof __await?Promise.resolve(r.value.v).then(fulfill,reject):settle(q[0][2],r)}(g[n](v))}catch(e){settle(q[0][3],e)}}function fulfill(value){resume("next",value)}function reject(value){resume("throw",value)}function settle(f,v){f(v),q.shift(),q.length&&resume(q[0][0],q[0][1])}}function __asyncDelegator(o){var i,p;return i={},verb("next"),verb("throw",(function(e){throw e})),verb("return"),i[Symbol.iterator]=function(){return this},i;function verb(n,f){i[n]=o[n]?function(v){return(p=!p)?{value:__await(o[n](v)),done:"return"===n}:f?f(v):v}:f}}function __asyncValues(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,m=o[Symbol.asyncIterator];return m?m.call(o):(o=__values(o),i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i);function verb(n){i[n]=o[n]&&function(v){return new Promise((function(resolve,reject){(function settle(resolve,reject,d,v){Promise.resolve(v).then((function(v){resolve({value:v,done:d})}),reject)})(resolve,reject,(v=o[n](v)).done,v.value)}))}}}function __makeTemplateObject(cooked,raw){return Object.defineProperty?Object.defineProperty(cooked,"raw",{value:raw}):cooked.raw=raw,cooked}var __setModuleDefault=Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v};function __importStar(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result}function __importDefault(mod){return mod&&mod.__esModule?mod:{default:mod}}function __classPrivateFieldGet(receiver,state,kind,f){if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof state?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===kind?f:"a"===kind?f.call(receiver):f?f.value:state.get(receiver)}function __classPrivateFieldSet(receiver,state,value,kind,f){if("m"===kind)throw new TypeError("Private method is not writable");if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof state?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===kind?f.call(receiver,value):f?f.value=value:state.set(receiver,value),value}},137:module=>{"use strict";module.exports=function isValidUTF8(buf){const len=buf.length;let i=0;for(;i<len;)if(0==(128&buf[i]))i++;else if(192==(224&buf[i])){if(i+1===len||128!=(192&buf[i+1])||192==(254&buf[i]))return!1;i+=2}else if(224==(240&buf[i])){if(i+2>=len||128!=(192&buf[i+1])||128!=(192&buf[i+2])||224===buf[i]&&128==(224&buf[i+1])||237===buf[i]&&160==(224&buf[i+1]))return!1;i+=3}else{if(240!=(248&buf[i]))return!1;if(i+3>=len||128!=(192&buf[i+1])||128!=(192&buf[i+2])||128!=(192&buf[i+3])||240===buf[i]&&128==(240&buf[i+1])||244===buf[i]&&buf[i+1]>143||buf[i]>244)return!1;i+=4}return!0}},311:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";try{module.exports=__webpack_require__(516)(__dirname)}catch(e){module.exports=__webpack_require__(137)}},777:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const WebSocket=__webpack_require__(762);WebSocket.createWebSocketStream=__webpack_require__(404),WebSocket.Server=__webpack_require__(284),WebSocket.Receiver=__webpack_require__(957),WebSocket.Sender=__webpack_require__(330),module.exports=WebSocket},977:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const{EMPTY_BUFFER}=__webpack_require__(872);function concat(list,totalLength){if(0===list.length)return EMPTY_BUFFER;if(1===list.length)return list[0];const target=Buffer.allocUnsafe(totalLength);let offset=0;for(let i=0;i<list.length;i++){const buf=list[i];target.set(buf,offset),offset+=buf.length}return offset<totalLength?target.slice(0,offset):target}function _mask(source,mask,output,offset,length){for(let i=0;i<length;i++)output[offset+i]=source[i]^mask[3&i]}function _unmask(buffer,mask){const length=buffer.length;for(let i=0;i<length;i++)buffer[i]^=mask[3&i]}function toArrayBuffer(buf){return buf.byteLength===buf.buffer.byteLength?buf.buffer:buf.buffer.slice(buf.byteOffset,buf.byteOffset+buf.byteLength)}function toBuffer(data){if(toBuffer.readOnly=!0,Buffer.isBuffer(data))return data;let buf;return data instanceof ArrayBuffer?buf=Buffer.from(data):ArrayBuffer.isView(data)?buf=Buffer.from(data.buffer,data.byteOffset,data.byteLength):(buf=Buffer.from(data),toBuffer.readOnly=!1),buf}try{const bufferUtil=__webpack_require__(891),bu=bufferUtil.BufferUtil||bufferUtil;module.exports={concat,mask(source,mask,output,offset,length){length<48?_mask(source,mask,output,offset,length):bu.mask(source,mask,output,offset,length)},toArrayBuffer,toBuffer,unmask(buffer,mask){buffer.length<32?_unmask(buffer,mask):bu.unmask(buffer,mask)}}}catch(e){module.exports={concat,mask:_mask,toArrayBuffer,toBuffer,unmask:_unmask}}},872:module=>{"use strict";module.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),EMPTY_BUFFER:Buffer.alloc(0),NOOP:()=>{}}},62:module=>{"use strict";class Event{constructor(type,target){this.target=target,this.type=type}}class MessageEvent extends Event{constructor(data,target){super("message",target),this.data=data}}class CloseEvent extends Event{constructor(code,reason,target){super("close",target),this.wasClean=target._closeFrameReceived&&target._closeFrameSent,this.reason=reason,this.code=code}}class OpenEvent extends Event{constructor(target){super("open",target)}}class ErrorEvent extends Event{constructor(error,target){super("error",target),this.message=error.message,this.error=error}}const EventTarget={addEventListener(type,listener,options){if("function"!=typeof listener)return;function onMessage(data){listener.call(this,new MessageEvent(data,this))}function onClose(code,message){listener.call(this,new CloseEvent(code,message,this))}function onError(error){listener.call(this,new ErrorEvent(error,this))}function onOpen(){listener.call(this,new OpenEvent(this))}const method=options&&options.once?"once":"on";"message"===type?(onMessage._listener=listener,this[method](type,onMessage)):"close"===type?(onClose._listener=listener,this[method](type,onClose)):"error"===type?(onError._listener=listener,this[method](type,onError)):"open"===type?(onOpen._listener=listener,this[method](type,onOpen)):this[method](type,listener)},removeEventListener(type,listener){const listeners=this.listeners(type);for(let i=0;i<listeners.length;i++)listeners[i]!==listener&&listeners[i]._listener!==listener||this.removeListener(type,listeners[i])}};module.exports=EventTarget},503:module=>{"use strict";const tokenChars=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function push(dest,name,elem){void 0===dest[name]?dest[name]=[elem]:dest[name].push(elem)}module.exports={format:function format(extensions){return Object.keys(extensions).map((extension=>{let configurations=extensions[extension];return Array.isArray(configurations)||(configurations=[configurations]),configurations.map((params=>[extension].concat(Object.keys(params).map((k=>{let values=params[k];return Array.isArray(values)||(values=[values]),values.map((v=>!0===v?k:`${k}=${v}`)).join("; ")}))).join("; "))).join(", ")})).join(", ")},parse:function parse(header){const offers=Object.create(null);if(void 0===header||""===header)return offers;let extensionName,paramName,params=Object.create(null),mustUnescape=!1,isEscaping=!1,inQuotes=!1,start=-1,end=-1,i=0;for(;i<header.length;i++){const code=header.charCodeAt(i);if(void 0===extensionName)if(-1===end&&1===tokenChars[code])-1===start&&(start=i);else if(32===code||9===code)-1===end&&-1!==start&&(end=i);else{if(59!==code&&44!==code)throw new SyntaxError(`Unexpected character at index ${i}`);{if(-1===start)throw new SyntaxError(`Unexpected character at index ${i}`);-1===end&&(end=i);const name=header.slice(start,end);44===code?(push(offers,name,params),params=Object.create(null)):extensionName=name,start=end=-1}}else if(void 0===paramName)if(-1===end&&1===tokenChars[code])-1===start&&(start=i);else if(32===code||9===code)-1===end&&-1!==start&&(end=i);else if(59===code||44===code){if(-1===start)throw new SyntaxError(`Unexpected character at index ${i}`);-1===end&&(end=i),push(params,header.slice(start,end),!0),44===code&&(push(offers,extensionName,params),params=Object.create(null),extensionName=void 0),start=end=-1}else{if(61!==code||-1===start||-1!==end)throw new SyntaxError(`Unexpected character at index ${i}`);paramName=header.slice(start,i),start=end=-1}else if(isEscaping){if(1!==tokenChars[code])throw new SyntaxError(`Unexpected character at index ${i}`);-1===start?start=i:mustUnescape||(mustUnescape=!0),isEscaping=!1}else if(inQuotes)if(1===tokenChars[code])-1===start&&(start=i);else if(34===code&&-1!==start)inQuotes=!1,end=i;else{if(92!==code)throw new SyntaxError(`Unexpected character at index ${i}`);isEscaping=!0}else if(34===code&&61===header.charCodeAt(i-1))inQuotes=!0;else if(-1===end&&1===tokenChars[code])-1===start&&(start=i);else if(-1===start||32!==code&&9!==code){if(59!==code&&44!==code)throw new SyntaxError(`Unexpected character at index ${i}`);{if(-1===start)throw new SyntaxError(`Unexpected character at index ${i}`);-1===end&&(end=i);let value=header.slice(start,end);mustUnescape&&(value=value.replace(/\\/g,""),mustUnescape=!1),push(params,paramName,value),44===code&&(push(offers,extensionName,params),params=Object.create(null),extensionName=void 0),paramName=void 0,start=end=-1}}else-1===end&&(end=i)}if(-1===start||inQuotes)throw new SyntaxError("Unexpected end of input");-1===end&&(end=i);const token=header.slice(start,end);return void 0===extensionName?push(offers,token,params):(void 0===paramName?push(params,token,!0):push(params,paramName,mustUnescape?token.replace(/\\/g,""):token),push(offers,extensionName,params)),offers}}},305:module=>{"use strict";const kDone=Symbol("kDone"),kRun=Symbol("kRun");module.exports=class Limiter{constructor(concurrency){this[kDone]=()=>{this.pending--,this[kRun]()},this.concurrency=concurrency||1/0,this.jobs=[],this.pending=0}add(job){this.jobs.push(job),this[kRun]()}[kRun](){if(this.pending!==this.concurrency&&this.jobs.length){const job=this.jobs.shift();this.pending++,job(this[kDone])}}}},196:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const zlib=__webpack_require__(761),bufferUtil=__webpack_require__(977),Limiter=__webpack_require__(305),{kStatusCode,NOOP}=__webpack_require__(872),TRAILER=Buffer.from([0,0,255,255]),kPerMessageDeflate=Symbol("permessage-deflate"),kTotalLength=Symbol("total-length"),kCallback=Symbol("callback"),kBuffers=Symbol("buffers"),kError=Symbol("error");let zlibLimiter;function deflateOnData(chunk){this[kBuffers].push(chunk),this[kTotalLength]+=chunk.length}function inflateOnData(chunk){this[kTotalLength]+=chunk.length,this[kPerMessageDeflate]._maxPayload<1||this[kTotalLength]<=this[kPerMessageDeflate]._maxPayload?this[kBuffers].push(chunk):(this[kError]=new RangeError("Max payload size exceeded"),this[kError][kStatusCode]=1009,this.removeListener("data",inflateOnData),this.reset())}function inflateOnError(err){this[kPerMessageDeflate]._inflate=null,err[kStatusCode]=1007,this[kCallback](err)}module.exports=class PerMessageDeflate{constructor(options,isServer,maxPayload){if(this._maxPayload=0|maxPayload,this._options=options||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!isServer,this._deflate=null,this._inflate=null,this.params=null,!zlibLimiter){const concurrency=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;zlibLimiter=new Limiter(concurrency)}}static get extensionName(){return"permessage-deflate"}offer(){const params={};return this._options.serverNoContextTakeover&&(params.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(params.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(params.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?params.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(params.client_max_window_bits=!0),params}accept(configurations){return configurations=this.normalizeParams(configurations),this.params=this._isServer?this.acceptAsServer(configurations):this.acceptAsClient(configurations),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){const callback=this._deflate[kCallback];this._deflate.close(),this._deflate=null,callback&&callback(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(offers){const opts=this._options,accepted=offers.find((params=>!(!1===opts.serverNoContextTakeover&&params.server_no_context_takeover||params.server_max_window_bits&&(!1===opts.serverMaxWindowBits||"number"==typeof opts.serverMaxWindowBits&&opts.serverMaxWindowBits>params.server_max_window_bits)||"number"==typeof opts.clientMaxWindowBits&&!params.client_max_window_bits)));if(!accepted)throw new Error("None of the extension offers can be accepted");return opts.serverNoContextTakeover&&(accepted.server_no_context_takeover=!0),opts.clientNoContextTakeover&&(accepted.client_no_context_takeover=!0),"number"==typeof opts.serverMaxWindowBits&&(accepted.server_max_window_bits=opts.serverMaxWindowBits),"number"==typeof opts.clientMaxWindowBits?accepted.client_max_window_bits=opts.clientMaxWindowBits:!0!==accepted.client_max_window_bits&&!1!==opts.clientMaxWindowBits||delete accepted.client_max_window_bits,accepted}acceptAsClient(response){const params=response[0];if(!1===this._options.clientNoContextTakeover&&params.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(params.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&params.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(params.client_max_window_bits=this._options.clientMaxWindowBits);return params}normalizeParams(configurations){return configurations.forEach((params=>{Object.keys(params).forEach((key=>{let value=params[key];if(value.length>1)throw new Error(`Parameter "${key}" must have only a single value`);if(value=value[0],"client_max_window_bits"===key){if(!0!==value){const num=+value;if(!Number.isInteger(num)||num<8||num>15)throw new TypeError(`Invalid value for parameter "${key}": ${value}`);value=num}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${key}": ${value}`)}else if("server_max_window_bits"===key){const num=+value;if(!Number.isInteger(num)||num<8||num>15)throw new TypeError(`Invalid value for parameter "${key}": ${value}`);value=num}else{if("client_no_context_takeover"!==key&&"server_no_context_takeover"!==key)throw new Error(`Unknown parameter "${key}"`);if(!0!==value)throw new TypeError(`Invalid value for parameter "${key}": ${value}`)}params[key]=value}))})),configurations}decompress(data,fin,callback){zlibLimiter.add((done=>{this._decompress(data,fin,((err,result)=>{done(),callback(err,result)}))}))}compress(data,fin,callback){zlibLimiter.add((done=>{this._compress(data,fin,((err,result)=>{done(),callback(err,result)}))}))}_decompress(data,fin,callback){const endpoint=this._isServer?"client":"server";if(!this._inflate){const key=`${endpoint}_max_window_bits`,windowBits="number"!=typeof this.params[key]?zlib.Z_DEFAULT_WINDOWBITS:this.params[key];this._inflate=zlib.createInflateRaw({...this._options.zlibInflateOptions,windowBits}),this._inflate[kPerMessageDeflate]=this,this._inflate[kTotalLength]=0,this._inflate[kBuffers]=[],this._inflate.on("error",inflateOnError),this._inflate.on("data",inflateOnData)}this._inflate[kCallback]=callback,this._inflate.write(data),fin&&this._inflate.write(TRAILER),this._inflate.flush((()=>{const err=this._inflate[kError];if(err)return this._inflate.close(),this._inflate=null,void callback(err);const data=bufferUtil.concat(this._inflate[kBuffers],this._inflate[kTotalLength]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[kTotalLength]=0,this._inflate[kBuffers]=[],fin&&this.params[`${endpoint}_no_context_takeover`]&&this._inflate.reset()),callback(null,data)}))}_compress(data,fin,callback){const endpoint=this._isServer?"server":"client";if(!this._deflate){const key=`${endpoint}_max_window_bits`,windowBits="number"!=typeof this.params[key]?zlib.Z_DEFAULT_WINDOWBITS:this.params[key];this._deflate=zlib.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits}),this._deflate[kTotalLength]=0,this._deflate[kBuffers]=[],this._deflate.on("error",NOOP),this._deflate.on("data",deflateOnData)}this._deflate[kCallback]=callback,this._deflate.write(data),this._deflate.flush(zlib.Z_SYNC_FLUSH,(()=>{if(!this._deflate)return;let data=bufferUtil.concat(this._deflate[kBuffers],this._deflate[kTotalLength]);fin&&(data=data.slice(0,data.length-4)),this._deflate[kCallback]=null,this._deflate[kTotalLength]=0,this._deflate[kBuffers]=[],fin&&this.params[`${endpoint}_no_context_takeover`]&&this._deflate.reset(),callback(null,data)}))}}},957:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const{Writable}=__webpack_require__(413),PerMessageDeflate=__webpack_require__(196),{BINARY_TYPES,EMPTY_BUFFER,kStatusCode,kWebSocket}=__webpack_require__(872),{concat,toArrayBuffer,unmask}=__webpack_require__(977),{isValidStatusCode,isValidUTF8}=__webpack_require__(746);function error(ErrorCtor,message,prefix,statusCode){const err=new ErrorCtor(prefix?`Invalid WebSocket frame: ${message}`:message);return Error.captureStackTrace(err,error),err[kStatusCode]=statusCode,err}module.exports=class Receiver extends Writable{constructor(binaryType,extensions,isServer,maxPayload){super(),this._binaryType=binaryType||BINARY_TYPES[0],this[kWebSocket]=void 0,this._extensions=extensions||{},this._isServer=!!isServer,this._maxPayload=0|maxPayload,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=0,this._loop=!1}_write(chunk,encoding,cb){if(8===this._opcode&&0==this._state)return cb();this._bufferedBytes+=chunk.length,this._buffers.push(chunk),this.startLoop(cb)}consume(n){if(this._bufferedBytes-=n,n===this._buffers[0].length)return this._buffers.shift();if(n<this._buffers[0].length){const buf=this._buffers[0];return this._buffers[0]=buf.slice(n),buf.slice(0,n)}const dst=Buffer.allocUnsafe(n);do{const buf=this._buffers[0],offset=dst.length-n;n>=buf.length?dst.set(this._buffers.shift(),offset):(dst.set(new Uint8Array(buf.buffer,buf.byteOffset,n),offset),this._buffers[0]=buf.slice(n)),n-=buf.length}while(n>0);return dst}startLoop(cb){let err;this._loop=!0;do{switch(this._state){case 0:err=this.getInfo();break;case 1:err=this.getPayloadLength16();break;case 2:err=this.getPayloadLength64();break;case 3:this.getMask();break;case 4:err=this.getData(cb);break;default:return void(this._loop=!1)}}while(this._loop);cb(err)}getInfo(){if(this._bufferedBytes<2)return void(this._loop=!1);const buf=this.consume(2);if(0!=(48&buf[0]))return this._loop=!1,error(RangeError,"RSV2 and RSV3 must be clear",!0,1002);const compressed=64==(64&buf[0]);if(compressed&&!this._extensions[PerMessageDeflate.extensionName])return this._loop=!1,error(RangeError,"RSV1 must be clear",!0,1002);if(this._fin=128==(128&buf[0]),this._opcode=15&buf[0],this._payloadLength=127&buf[1],0===this._opcode){if(compressed)return this._loop=!1,error(RangeError,"RSV1 must be clear",!0,1002);if(!this._fragmented)return this._loop=!1,error(RangeError,"invalid opcode 0",!0,1002);this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return this._loop=!1,error(RangeError,`invalid opcode ${this._opcode}`,!0,1002);this._compressed=compressed}else{if(!(this._opcode>7&&this._opcode<11))return this._loop=!1,error(RangeError,`invalid opcode ${this._opcode}`,!0,1002);if(!this._fin)return this._loop=!1,error(RangeError,"FIN must be set",!0,1002);if(compressed)return this._loop=!1,error(RangeError,"RSV1 must be clear",!0,1002);if(this._payloadLength>125)return this._loop=!1,error(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002)}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=128==(128&buf[1]),this._isServer){if(!this._masked)return this._loop=!1,error(RangeError,"MASK must be set",!0,1002)}else if(this._masked)return this._loop=!1,error(RangeError,"MASK must be clear",!0,1002);if(126===this._payloadLength)this._state=1;else{if(127!==this._payloadLength)return this.haveLength();this._state=2}}getPayloadLength16(){if(!(this._bufferedBytes<2))return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength();this._loop=!1}getPayloadLength64(){if(this._bufferedBytes<8)return void(this._loop=!1);const buf=this.consume(8),num=buf.readUInt32BE(0);return num>Math.pow(2,21)-1?(this._loop=!1,error(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009)):(this._payloadLength=num*Math.pow(2,32)+buf.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,error(RangeError,"Max payload size exceeded",!1,1009);this._masked?this._state=3:this._state=4}getMask(){this._bufferedBytes<4?this._loop=!1:(this._mask=this.consume(4),this._state=4)}getData(cb){let data=EMPTY_BUFFER;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength)return void(this._loop=!1);data=this.consume(this._payloadLength),this._masked&&unmask(data,this._mask)}return this._opcode>7?this.controlMessage(data):this._compressed?(this._state=5,void this.decompress(data,cb)):(data.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(data)),this.dataMessage())}decompress(data,cb){this._extensions[PerMessageDeflate.extensionName].decompress(data,this._fin,((err,buf)=>{if(err)return cb(err);if(buf.length){if(this._messageLength+=buf.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return cb(error(RangeError,"Max payload size exceeded",!1,1009));this._fragments.push(buf)}const er=this.dataMessage();if(er)return cb(er);this.startLoop(cb)}))}dataMessage(){if(this._fin){const messageLength=this._messageLength,fragments=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let data;data="nodebuffer"===this._binaryType?concat(fragments,messageLength):"arraybuffer"===this._binaryType?toArrayBuffer(concat(fragments,messageLength)):fragments,this.emit("message",data)}else{const buf=concat(fragments,messageLength);if(!isValidUTF8(buf))return this._loop=!1,error(Error,"invalid UTF-8 sequence",!0,1007);this.emit("message",buf.toString())}}this._state=0}controlMessage(data){if(8===this._opcode)if(this._loop=!1,0===data.length)this.emit("conclude",1005,""),this.end();else{if(1===data.length)return error(RangeError,"invalid payload length 1",!0,1002);{const code=data.readUInt16BE(0);if(!isValidStatusCode(code))return error(RangeError,`invalid status code ${code}`,!0,1002);const buf=data.slice(2);if(!isValidUTF8(buf))return error(Error,"invalid UTF-8 sequence",!0,1007);this.emit("conclude",code,buf.toString()),this.end()}}else 9===this._opcode?this.emit("ping",data):this.emit("pong",data);this._state=0}}},330:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const{randomFillSync}=__webpack_require__(373),PerMessageDeflate=__webpack_require__(196),{EMPTY_BUFFER}=__webpack_require__(872),{isValidStatusCode}=__webpack_require__(746),{mask:applyMask,toBuffer}=__webpack_require__(977),mask=Buffer.alloc(4);class Sender{constructor(socket,extensions){this._extensions=extensions||{},this._socket=socket,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(data,options){const merge=options.mask&&options.readOnly;let offset=options.mask?6:2,payloadLength=data.length;data.length>=65536?(offset+=8,payloadLength=127):data.length>125&&(offset+=2,payloadLength=126);const target=Buffer.allocUnsafe(merge?data.length+offset:offset);return target[0]=options.fin?128|options.opcode:options.opcode,options.rsv1&&(target[0]|=64),target[1]=payloadLength,126===payloadLength?target.writeUInt16BE(data.length,2):127===payloadLength&&(target.writeUInt32BE(0,2),target.writeUInt32BE(data.length,6)),options.mask?(randomFillSync(mask,0,4),target[1]|=128,target[offset-4]=mask[0],target[offset-3]=mask[1],target[offset-2]=mask[2],target[offset-1]=mask[3],merge?(applyMask(data,mask,target,offset,data.length),[target]):(applyMask(data,mask,data,0,data.length),[target,data])):[target,data]}close(code,data,mask,cb){let buf;if(void 0===code)buf=EMPTY_BUFFER;else{if("number"!=typeof code||!isValidStatusCode(code))throw new TypeError("First argument must be a valid error code number");if(void 0===data||""===data)buf=Buffer.allocUnsafe(2),buf.writeUInt16BE(code,0);else{const length=Buffer.byteLength(data);if(length>123)throw new RangeError("The message must not be greater than 123 bytes");buf=Buffer.allocUnsafe(2+length),buf.writeUInt16BE(code,0),buf.write(data,2)}}this._deflating?this.enqueue([this.doClose,buf,mask,cb]):this.doClose(buf,mask,cb)}doClose(data,mask,cb){this.sendFrame(Sender.frame(data,{fin:!0,rsv1:!1,opcode:8,mask,readOnly:!1}),cb)}ping(data,mask,cb){const buf=toBuffer(data);if(buf.length>125)throw new RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPing,buf,mask,toBuffer.readOnly,cb]):this.doPing(buf,mask,toBuffer.readOnly,cb)}doPing(data,mask,readOnly,cb){this.sendFrame(Sender.frame(data,{fin:!0,rsv1:!1,opcode:9,mask,readOnly}),cb)}pong(data,mask,cb){const buf=toBuffer(data);if(buf.length>125)throw new RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPong,buf,mask,toBuffer.readOnly,cb]):this.doPong(buf,mask,toBuffer.readOnly,cb)}doPong(data,mask,readOnly,cb){this.sendFrame(Sender.frame(data,{fin:!0,rsv1:!1,opcode:10,mask,readOnly}),cb)}send(data,options,cb){const buf=toBuffer(data),perMessageDeflate=this._extensions[PerMessageDeflate.extensionName];let opcode=options.binary?2:1,rsv1=options.compress;if(this._firstFragment?(this._firstFragment=!1,rsv1&&perMessageDeflate&&(rsv1=buf.length>=perMessageDeflate._threshold),this._compress=rsv1):(rsv1=!1,opcode=0),options.fin&&(this._firstFragment=!0),perMessageDeflate){const opts={fin:options.fin,rsv1,opcode,mask:options.mask,readOnly:toBuffer.readOnly};this._deflating?this.enqueue([this.dispatch,buf,this._compress,opts,cb]):this.dispatch(buf,this._compress,opts,cb)}else this.sendFrame(Sender.frame(buf,{fin:options.fin,rsv1:!1,opcode,mask:options.mask,readOnly:toBuffer.readOnly}),cb)}dispatch(data,compress,options,cb){if(!compress)return void this.sendFrame(Sender.frame(data,options),cb);const perMessageDeflate=this._extensions[PerMessageDeflate.extensionName];this._bufferedBytes+=data.length,this._deflating=!0,perMessageDeflate.compress(data,options.fin,((_,buf)=>{if(this._socket.destroyed){const err=new Error("The socket was closed while data was being compressed");"function"==typeof cb&&cb(err);for(let i=0;i<this._queue.length;i++){const callback=this._queue[i][4];"function"==typeof callback&&callback(err)}}else this._bufferedBytes-=data.length,this._deflating=!1,options.readOnly=!1,this.sendFrame(Sender.frame(buf,options),cb),this.dequeue()}))}dequeue(){for(;!this._deflating&&this._queue.length;){const params=this._queue.shift();this._bufferedBytes-=params[1].length,Reflect.apply(params[0],this,params.slice(1))}}enqueue(params){this._bufferedBytes+=params[1].length,this._queue.push(params)}sendFrame(list,cb){2===list.length?(this._socket.cork(),this._socket.write(list[0]),this._socket.write(list[1],cb),this._socket.uncork()):this._socket.write(list[0],cb)}}module.exports=Sender},404:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const{Duplex}=__webpack_require__(413);function emitClose(stream){stream.emit("close")}function duplexOnEnd(){!this.destroyed&&this._writableState.finished&&this.destroy()}function duplexOnError(err){this.removeListener("error",duplexOnError),this.destroy(),0===this.listenerCount("error")&&this.emit("error",err)}module.exports=function createWebSocketStream(ws,options){let resumeOnReceiverDrain=!0;function receiverOnDrain(){resumeOnReceiverDrain&&ws._socket.resume()}ws.readyState===ws.CONNECTING?ws.once("open",(function open(){ws._receiver.removeAllListeners("drain"),ws._receiver.on("drain",receiverOnDrain)})):(ws._receiver.removeAllListeners("drain"),ws._receiver.on("drain",receiverOnDrain));const duplex=new Duplex({...options,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return ws.on("message",(function message(msg){duplex.push(msg)||(resumeOnReceiverDrain=!1,ws._socket.pause())})),ws.once("error",(function error(err){duplex.destroyed||duplex.destroy(err)})),ws.once("close",(function close(){duplex.destroyed||duplex.push(null)})),duplex._destroy=function(err,callback){if(ws.readyState===ws.CLOSED)return callback(err),void process.nextTick(emitClose,duplex);let called=!1;ws.once("error",(function error(err){called=!0,callback(err)})),ws.once("close",(function close(){called||callback(err),process.nextTick(emitClose,duplex)})),ws.terminate()},duplex._final=function(callback){ws.readyState!==ws.CONNECTING?null!==ws._socket&&(ws._socket._writableState.finished?(callback(),duplex._readableState.endEmitted&&duplex.destroy()):(ws._socket.once("finish",(function finish(){callback()})),ws.close())):ws.once("open",(function open(){duplex._final(callback)}))},duplex._read=function(){ws.readyState!==ws.OPEN||resumeOnReceiverDrain||(resumeOnReceiverDrain=!0,ws._receiver._writableState.needDrain||ws._socket.resume())},duplex._write=function(chunk,encoding,callback){ws.readyState!==ws.CONNECTING?ws.send(chunk,callback):ws.once("open",(function open(){duplex._write(chunk,encoding,callback)}))},duplex.on("end",duplexOnEnd),duplex.on("error",duplexOnError),duplex}},746:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";function isValidStatusCode(code){return code>=1e3&&code<=1014&&1004!==code&&1005!==code&&1006!==code||code>=3e3&&code<=4999}function _isValidUTF8(buf){const len=buf.length;let i=0;for(;i<len;)if(0==(128&buf[i]))i++;else if(192==(224&buf[i])){if(i+1===len||128!=(192&buf[i+1])||192==(254&buf[i]))return!1;i+=2}else if(224==(240&buf[i])){if(i+2>=len||128!=(192&buf[i+1])||128!=(192&buf[i+2])||224===buf[i]&&128==(224&buf[i+1])||237===buf[i]&&160==(224&buf[i+1]))return!1;i+=3}else{if(240!=(248&buf[i]))return!1;if(i+3>=len||128!=(192&buf[i+1])||128!=(192&buf[i+2])||128!=(192&buf[i+3])||240===buf[i]&&128==(240&buf[i+1])||244===buf[i]&&buf[i+1]>143||buf[i]>244)return!1;i+=4}return!0}try{let isValidUTF8=__webpack_require__(311);"object"==typeof isValidUTF8&&(isValidUTF8=isValidUTF8.Validation.isValidUTF8),module.exports={isValidStatusCode,isValidUTF8:buf=>buf.length<150?_isValidUTF8(buf):isValidUTF8(buf)}}catch(e){module.exports={isValidStatusCode,isValidUTF8:_isValidUTF8}}},284:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const EventEmitter=__webpack_require__(614),{createHash}=__webpack_require__(373),{createServer,STATUS_CODES}=__webpack_require__(605),PerMessageDeflate=__webpack_require__(196),WebSocket=__webpack_require__(762),{format,parse}=__webpack_require__(503),{GUID,kWebSocket}=__webpack_require__(872),keyRegex=/^[+/0-9A-Za-z]{22}==$/;function emitClose(server){server.emit("close")}function socketOnError(){this.destroy()}function abortHandshake(socket,code,message,headers){socket.writable&&(message=message||STATUS_CODES[code],headers={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(message),...headers},socket.write(`HTTP/1.1 ${code} ${STATUS_CODES[code]}\r\n`+Object.keys(headers).map((h=>`${h}: ${headers[h]}`)).join("\r\n")+"\r\n\r\n"+message)),socket.removeListener("error",socketOnError),socket.destroy()}function trim(str){return str.trim()}module.exports=class WebSocketServer extends EventEmitter{constructor(options,callback){if(super(),null==(options={maxPayload:104857600,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,...options}).port&&!options.server&&!options.noServer)throw new TypeError('One of the "port", "server", or "noServer" options must be specified');if(null!=options.port?(this._server=createServer(((req,res)=>{const body=STATUS_CODES[426];res.writeHead(426,{"Content-Length":body.length,"Content-Type":"text/plain"}),res.end(body)})),this._server.listen(options.port,options.host,options.backlog,callback)):options.server&&(this._server=options.server),this._server){const emitConnection=this.emit.bind(this,"connection");this._removeListeners=function addListeners(server,map){for(const event of Object.keys(map))server.on(event,map[event]);return function removeListeners(){for(const event of Object.keys(map))server.removeListener(event,map[event])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(req,socket,head)=>{this.handleUpgrade(req,socket,head,emitConnection)}})}!0===options.perMessageDeflate&&(options.perMessageDeflate={}),options.clientTracking&&(this.clients=new Set),this.options=options}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(cb){if(cb&&this.once("close",cb),this.clients)for(const client of this.clients)client.terminate();const server=this._server;server&&(this._removeListeners(),this._removeListeners=this._server=null,null!=this.options.port)?server.close((()=>this.emit("close"))):process.nextTick(emitClose,this)}shouldHandle(req){if(this.options.path){const index=req.url.indexOf("?");if((-1!==index?req.url.slice(0,index):req.url)!==this.options.path)return!1}return!0}handleUpgrade(req,socket,head,cb){socket.on("error",socketOnError);const key=void 0!==req.headers["sec-websocket-key"]&&req.headers["sec-websocket-key"].trim(),version=+req.headers["sec-websocket-version"],extensions={};if("GET"!==req.method||"websocket"!==req.headers.upgrade.toLowerCase()||!key||!keyRegex.test(key)||8!==version&&13!==version||!this.shouldHandle(req))return abortHandshake(socket,400);if(this.options.perMessageDeflate){const perMessageDeflate=new PerMessageDeflate(this.options.perMessageDeflate,!0,this.options.maxPayload);try{const offers=parse(req.headers["sec-websocket-extensions"]);offers[PerMessageDeflate.extensionName]&&(perMessageDeflate.accept(offers[PerMessageDeflate.extensionName]),extensions[PerMessageDeflate.extensionName]=perMessageDeflate)}catch(err){return abortHandshake(socket,400)}}if(this.options.verifyClient){const info={origin:req.headers[""+(8===version?"sec-websocket-origin":"origin")],secure:!(!req.socket.authorized&&!req.socket.encrypted),req};if(2===this.options.verifyClient.length)return void this.options.verifyClient(info,((verified,code,message,headers)=>{if(!verified)return abortHandshake(socket,code||401,message,headers);this.completeUpgrade(key,extensions,req,socket,head,cb)}));if(!this.options.verifyClient(info))return abortHandshake(socket,401)}this.completeUpgrade(key,extensions,req,socket,head,cb)}completeUpgrade(key,extensions,req,socket,head,cb){if(!socket.readable||!socket.writable)return socket.destroy();if(socket[kWebSocket])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");const headers=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${createHash("sha1").update(key+GUID).digest("base64")}`],ws=new WebSocket(null);let protocol=req.headers["sec-websocket-protocol"];if(protocol&&(protocol=protocol.split(",").map(trim),protocol=this.options.handleProtocols?this.options.handleProtocols(protocol,req):protocol[0],protocol&&(headers.push(`Sec-WebSocket-Protocol: ${protocol}`),ws._protocol=protocol)),extensions[PerMessageDeflate.extensionName]){const params=extensions[PerMessageDeflate.extensionName].params,value=format({[PerMessageDeflate.extensionName]:[params]});headers.push(`Sec-WebSocket-Extensions: ${value}`),ws._extensions=extensions}this.emit("headers",headers,req),socket.write(headers.concat("\r\n").join("\r\n")),socket.removeListener("error",socketOnError),ws.setSocket(socket,head,this.options.maxPayload),this.clients&&(this.clients.add(ws),ws.on("close",(()=>this.clients.delete(ws)))),cb(ws,req)}}},762:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const EventEmitter=__webpack_require__(614),https=__webpack_require__(211),http=__webpack_require__(605),net=__webpack_require__(631),tls=__webpack_require__(16),{randomBytes,createHash}=__webpack_require__(373),{URL}=__webpack_require__(835),PerMessageDeflate=__webpack_require__(196),Receiver=__webpack_require__(957),Sender=__webpack_require__(330),{BINARY_TYPES,EMPTY_BUFFER,GUID,kStatusCode,kWebSocket,NOOP}=__webpack_require__(872),{addEventListener,removeEventListener}=__webpack_require__(62),{format,parse}=__webpack_require__(503),{toBuffer}=__webpack_require__(977),readyStates=["CONNECTING","OPEN","CLOSING","CLOSED"],protocolVersions=[8,13];class WebSocket extends EventEmitter{constructor(address,protocols,options){super(),this._binaryType=BINARY_TYPES[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage="",this._closeTimer=null,this._extensions={},this._protocol="",this._readyState=WebSocket.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==address?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,Array.isArray(protocols)?protocols=protocols.join(", "):"object"==typeof protocols&&null!==protocols&&(options=protocols,protocols=void 0),initAsClient(this,address,protocols,options)):this._isServer=!0}get binaryType(){return this._binaryType}set binaryType(type){BINARY_TYPES.includes(type)&&(this._binaryType=type,this._receiver&&(this._receiver._binaryType=type))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(socket,head,maxPayload){const receiver=new Receiver(this.binaryType,this._extensions,this._isServer,maxPayload);this._sender=new Sender(socket,this._extensions),this._receiver=receiver,this._socket=socket,receiver[kWebSocket]=this,socket[kWebSocket]=this,receiver.on("conclude",receiverOnConclude),receiver.on("drain",receiverOnDrain),receiver.on("error",receiverOnError),receiver.on("message",receiverOnMessage),receiver.on("ping",receiverOnPing),receiver.on("pong",receiverOnPong),socket.setTimeout(0),socket.setNoDelay(),head.length>0&&socket.unshift(head),socket.on("close",socketOnClose),socket.on("data",socketOnData),socket.on("end",socketOnEnd),socket.on("error",socketOnError),this._readyState=WebSocket.OPEN,this.emit("open")}emitClose(){if(!this._socket)return this._readyState=WebSocket.CLOSED,void this.emit("close",this._closeCode,this._closeMessage);this._extensions[PerMessageDeflate.extensionName]&&this._extensions[PerMessageDeflate.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=WebSocket.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(code,data){if(this.readyState!==WebSocket.CLOSED){if(this.readyState===WebSocket.CONNECTING){const msg="WebSocket was closed before the connection was established";return abortHandshake(this,this._req,msg)}this.readyState!==WebSocket.CLOSING?(this._readyState=WebSocket.CLOSING,this._sender.close(code,data,!this._isServer,(err=>{err||(this._closeFrameSent=!0,this._closeFrameReceived&&this._socket.end())})),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),3e4)):this._closeFrameSent&&this._closeFrameReceived&&this._socket.end()}}ping(data,mask,cb){if(this.readyState===WebSocket.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof data?(cb=data,data=mask=void 0):"function"==typeof mask&&(cb=mask,mask=void 0),"number"==typeof data&&(data=data.toString()),this.readyState===WebSocket.OPEN?(void 0===mask&&(mask=!this._isServer),this._sender.ping(data||EMPTY_BUFFER,mask,cb)):sendAfterClose(this,data,cb)}pong(data,mask,cb){if(this.readyState===WebSocket.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof data?(cb=data,data=mask=void 0):"function"==typeof mask&&(cb=mask,mask=void 0),"number"==typeof data&&(data=data.toString()),this.readyState===WebSocket.OPEN?(void 0===mask&&(mask=!this._isServer),this._sender.pong(data||EMPTY_BUFFER,mask,cb)):sendAfterClose(this,data,cb)}send(data,options,cb){if(this.readyState===WebSocket.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof options&&(cb=options,options={}),"number"==typeof data&&(data=data.toString()),this.readyState!==WebSocket.OPEN)return void sendAfterClose(this,data,cb);const opts={binary:"string"!=typeof data,mask:!this._isServer,compress:!0,fin:!0,...options};this._extensions[PerMessageDeflate.extensionName]||(opts.compress=!1),this._sender.send(data||EMPTY_BUFFER,opts,cb)}terminate(){if(this.readyState!==WebSocket.CLOSED){if(this.readyState===WebSocket.CONNECTING){const msg="WebSocket was closed before the connection was established";return abortHandshake(this,this._req,msg)}this._socket&&(this._readyState=WebSocket.CLOSING,this._socket.destroy())}}}function initAsClient(websocket,address,protocols,options){const opts={protocolVersion:protocolVersions[1],maxPayload:104857600,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...options,createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:void 0,host:void 0,path:void 0,port:void 0};if(!protocolVersions.includes(opts.protocolVersion))throw new RangeError(`Unsupported protocol version: ${opts.protocolVersion} (supported versions: ${protocolVersions.join(", ")})`);let parsedUrl;address instanceof URL?(parsedUrl=address,websocket._url=address.href):(parsedUrl=new URL(address),websocket._url=address);const isUnixSocket="ws+unix:"===parsedUrl.protocol;if(!(parsedUrl.host||isUnixSocket&&parsedUrl.pathname))throw new Error(`Invalid URL: ${websocket.url}`);const isSecure="wss:"===parsedUrl.protocol||"https:"===parsedUrl.protocol,defaultPort=isSecure?443:80,key=randomBytes(16).toString("base64"),get=isSecure?https.get:http.get;let perMessageDeflate;if(opts.createConnection=isSecure?tlsConnect:netConnect,opts.defaultPort=opts.defaultPort||defaultPort,opts.port=parsedUrl.port||defaultPort,opts.host=parsedUrl.hostname.startsWith("[")?parsedUrl.hostname.slice(1,-1):parsedUrl.hostname,opts.headers={"Sec-WebSocket-Version":opts.protocolVersion,"Sec-WebSocket-Key":key,Connection:"Upgrade",Upgrade:"websocket",...opts.headers},opts.path=parsedUrl.pathname+parsedUrl.search,opts.timeout=opts.handshakeTimeout,opts.perMessageDeflate&&(perMessageDeflate=new PerMessageDeflate(!0!==opts.perMessageDeflate?opts.perMessageDeflate:{},!1,opts.maxPayload),opts.headers["Sec-WebSocket-Extensions"]=format({[PerMessageDeflate.extensionName]:perMessageDeflate.offer()})),protocols&&(opts.headers["Sec-WebSocket-Protocol"]=protocols),opts.origin&&(opts.protocolVersion<13?opts.headers["Sec-WebSocket-Origin"]=opts.origin:opts.headers.Origin=opts.origin),(parsedUrl.username||parsedUrl.password)&&(opts.auth=`${parsedUrl.username}:${parsedUrl.password}`),isUnixSocket){const parts=opts.path.split(":");opts.socketPath=parts[0],opts.path=parts[1]}let req=websocket._req=get(opts);opts.timeout&&req.on("timeout",(()=>{abortHandshake(websocket,req,"Opening handshake has timed out")})),req.on("error",(err=>{null===req||req.aborted||(req=websocket._req=null,websocket._readyState=WebSocket.CLOSING,websocket.emit("error",err),websocket.emitClose())})),req.on("response",(res=>{const location=res.headers.location,statusCode=res.statusCode;if(location&&opts.followRedirects&&statusCode>=300&&statusCode<400){if(++websocket._redirects>opts.maxRedirects)return void abortHandshake(websocket,req,"Maximum redirects exceeded");req.abort();const addr=new URL(location,address);initAsClient(websocket,addr,protocols,options)}else websocket.emit("unexpected-response",req,res)||abortHandshake(websocket,req,`Unexpected server response: ${res.statusCode}`)})),req.on("upgrade",((res,socket,head)=>{if(websocket.emit("upgrade",res),websocket.readyState!==WebSocket.CONNECTING)return;req=websocket._req=null;const digest=createHash("sha1").update(key+GUID).digest("base64");if(res.headers["sec-websocket-accept"]!==digest)return void abortHandshake(websocket,socket,"Invalid Sec-WebSocket-Accept header");const serverProt=res.headers["sec-websocket-protocol"],protList=(protocols||"").split(/, */);let protError;if(!protocols&&serverProt?protError="Server sent a subprotocol but none was requested":protocols&&!serverProt?protError="Server sent no subprotocol":serverProt&&!protList.includes(serverProt)&&(protError="Server sent an invalid subprotocol"),protError)abortHandshake(websocket,socket,protError);else{if(serverProt&&(websocket._protocol=serverProt),perMessageDeflate)try{const extensions=parse(res.headers["sec-websocket-extensions"]);extensions[PerMessageDeflate.extensionName]&&(perMessageDeflate.accept(extensions[PerMessageDeflate.extensionName]),websocket._extensions[PerMessageDeflate.extensionName]=perMessageDeflate)}catch(err){return void abortHandshake(websocket,socket,"Invalid Sec-WebSocket-Extensions header")}websocket.setSocket(socket,head,opts.maxPayload)}}))}function netConnect(options){return options.path=options.socketPath,net.connect(options)}function tlsConnect(options){return options.path=void 0,options.servername||""===options.servername||(options.servername=net.isIP(options.host)?"":options.host),tls.connect(options)}function abortHandshake(websocket,stream,message){websocket._readyState=WebSocket.CLOSING;const err=new Error(message);Error.captureStackTrace(err,abortHandshake),stream.setHeader?(stream.abort(),stream.socket&&!stream.socket.destroyed&&stream.socket.destroy(),stream.once("abort",websocket.emitClose.bind(websocket)),websocket.emit("error",err)):(stream.destroy(err),stream.once("error",websocket.emit.bind(websocket,"error")),stream.once("close",websocket.emitClose.bind(websocket)))}function sendAfterClose(websocket,data,cb){if(data){const length=toBuffer(data).length;websocket._socket?websocket._sender._bufferedBytes+=length:websocket._bufferedAmount+=length}if(cb){cb(new Error(`WebSocket is not open: readyState ${websocket.readyState} (${readyStates[websocket.readyState]})`))}}function receiverOnConclude(code,reason){const websocket=this[kWebSocket];websocket._socket.removeListener("data",socketOnData),websocket._socket.resume(),websocket._closeFrameReceived=!0,websocket._closeMessage=reason,websocket._closeCode=code,1005===code?websocket.close():websocket.close(code,reason)}function receiverOnDrain(){this[kWebSocket]._socket.resume()}function receiverOnError(err){const websocket=this[kWebSocket];websocket._socket.removeListener("data",socketOnData),websocket._readyState=WebSocket.CLOSING,websocket._closeCode=err[kStatusCode],websocket.emit("error",err),websocket._socket.destroy()}function receiverOnFinish(){this[kWebSocket].emitClose()}function receiverOnMessage(data){this[kWebSocket].emit("message",data)}function receiverOnPing(data){const websocket=this[kWebSocket];websocket.pong(data,!websocket._isServer,NOOP),websocket.emit("ping",data)}function receiverOnPong(data){this[kWebSocket].emit("pong",data)}function socketOnClose(){const websocket=this[kWebSocket];this.removeListener("close",socketOnClose),this.removeListener("end",socketOnEnd),websocket._readyState=WebSocket.CLOSING,websocket._socket.read(),websocket._receiver.end(),this.removeListener("data",socketOnData),this[kWebSocket]=void 0,clearTimeout(websocket._closeTimer),websocket._receiver._writableState.finished||websocket._receiver._writableState.errorEmitted?websocket.emitClose():(websocket._receiver.on("error",receiverOnFinish),websocket._receiver.on("finish",receiverOnFinish))}function socketOnData(chunk){this[kWebSocket]._receiver.write(chunk)||this.pause()}function socketOnEnd(){const websocket=this[kWebSocket];websocket._readyState=WebSocket.CLOSING,websocket._receiver.end(),this.end()}function socketOnError(){const websocket=this[kWebSocket];this.removeListener("error",socketOnError),this.on("error",NOOP),websocket&&(websocket._readyState=WebSocket.CLOSING,this.destroy())}readyStates.forEach(((readyState,i)=>{const descriptor={enumerable:!0,value:i};Object.defineProperty(WebSocket.prototype,readyState,descriptor),Object.defineProperty(WebSocket,readyState,descriptor)})),["binaryType","bufferedAmount","extensions","protocol","readyState","url"].forEach((property=>{Object.defineProperty(WebSocket.prototype,property,{enumerable:!0})})),["open","error","close","message"].forEach((method=>{Object.defineProperty(WebSocket.prototype,`on${method}`,{configurable:!0,enumerable:!0,get(){const listeners=this.listeners(method);for(let i=0;i<listeners.length;i++)if(listeners[i]._listener)return listeners[i]._listener},set(listener){const listeners=this.listeners(method);for(let i=0;i<listeners.length;i++)listeners[i]._listener&&this.removeListener(method,listeners[i]);this.addEventListener(method,listener)}})})),WebSocket.prototype.addEventListener=addEventListener,WebSocket.prototype.removeEventListener=removeEventListener,module.exports=WebSocket},335:module=>{"use strict";module.exports=JSON.parse('{"KNOWN_LANGUAGES":[{"language":"abap","image":"text"},{"language":"bat","image":"bat"},{"language":"bibtex","image":"text"},{"language":"clojure","image":"clojure"},{"language":"coffeescript","image":"coffeescript"},{"language":"c","image":"c"},{"language":"cpp","image":"cpp"},{"language":"csharp","image":"csharp"},{"language":"css","image":"css"},{"language":"diff","image":"manifest"},{"language":"dockerfile","image":"docker"},{"language":"fsharp","image":"fsharp"},{"language":"git-commit","image":"manifest"},{"language":"git-rebase","image":"manifest"},{"language":"go","image":"go"},{"language":"groovy","image":"groovy"},{"language":"handlebars","image":"handlebars"},{"language":"haml","image":"text"},{"language":"html","image":"html"},{"language":"ini","image":"manifest"},{"language":"java","image":"java"},{"language":"javascript","image":"javascript"},{"language":"javascriptreact","image":"jsx"},{"language":"jsx","image":"jsx"},{"language":"json","image":"json"},{"language":"jsonc","image":"json"},{"language":"jupyter","image":"jupyter"},{"language":"latex","image":"text"},{"language":"less","image":"less"},{"language":"lua","image":"lua"},{"language":"makefile","image":"makefile"},{"language":"markdown","image":"markdown"},{"language":"objective-c","image":"objective-c"},{"language":"objective-cpp","image":"objective-c"},{"language":"perl","image":"perl"},{"language":"perl6","image":"perl"},{"language":"php","image":"php"},{"language":"plaintext","image":"text"},{"language":"powershell","image":"powershell"},{"language":"jade","image":"pug"},{"language":"pug","image":"pug"},{"language":"python","image":"python"},{"language":"r","image":"r"},{"language":"razor","image":"cshtml"},{"language":"ruby","image":"ruby"},{"language":"rust","image":"rust"},{"language":"scss","image":"scss"},{"language":"sass","image":"scss"},{"language":"shaderlab","image":"manifest"},{"language":"slim","image":"text"},{"language":"sql","image":"sql"},{"language":"stylus","image":"stylus"},{"language":"swift","image":"swift"},{"language":"typescript","image":"typescript"},{"language":"typescriptreact","image":"tsx"},{"language":"tex","image":"tex"},{"language":"vb","image":"vb"},{"language":"vue","image":"vue"},{"language":"vue-html","image":"vue"},{"language":"xml","image":"xml"},{"language":"xsl","image":"xml"},{"language":"yaml","image":"yaml"}],"KNOWN_EXTENSIONS":{".ahk":{"image":"ahk"},".ahkl":{"image":"ahk"},"androidmanifest.xml":{"image":"android"},"/^angular[^.]*\\\\.js$/i":{"image":"angular"},".applescript":{"image":"applescript"},"/(\\\\.)?appveyor\\\\.yml/i":{"image":"appveyor"},".ino":{"image":"arduino"},".swf":{"image":"as"},".as":{"image":"as"},".jsfl":{"image":"as"},".swc":{"image":"as"},".asp":{"image":"asp"},".asax":{"image":"asp"},".ascx":{"image":"asp"},".ashx":{"image":"asp"},".asmx":{"image":"asp"},".aspx":{"image":"asp"},".axd":{"image":"asp"},"/\\\\.(l?a|[ls]?o|out|s|a51|asm|axf|elf|prx|puff|z80)$/i":{"image":"assembly"},".agc":{"image":"assembly"},".ko":{"image":"assembly"},".lst":{"image":"assembly"},"/\\\\.((c([+px]{2}?)?-?)?objdump|bsdiff|bin|dat|pak|pdb)$/i":{"image":"assembly"},".d-objdump":{"image":"assembly"},"/\\\\.gcode|\\\\.gco/i":{"image":"assembly"},"/\\\\.rpy[bc]$/i":{"image":"assembly"},"/\\\\.py[co]$/i":{"image":"assembly"},".swp":{"image":"assembly"},".DS_Store":{"image":"assembly"},".au3":{"image":"autoit"},"babel.config.js":{"image":"babel"},"/\\\\.babelrc/i":{"image":"babel"},".bat":{"image":"bat"},".batch":{"image":"bat"},".cmd":{"image":"bat"},"/\\\\.(exe|com|msi)$/i":{"image":"bat"},".reg":{"image":"bat"},"/^(\\\\.bowerrc|bower\\\\.json|Bowerfile)$/i":{"image":"bower"},"/\\\\.bf?$/i":{"image":"brainfuck"},"/\\\\.c$/i":{"image":"c"},"/(cargo.toml|cargo.lock)/i":{"image":"cargo"},".casc":{"image":"casc"},".cas":{"image":"casc"},".cfc":{"image":"coldfusion"},".cfm":{"image":"coldfusion"},"circle.yml":{"image":"circleci"},".clj":{"image":"clojure"},".cl2":{"image":"clojure"},".cljc":{"image":"clojure"},".cljx":{"image":"clojure"},".hic":{"image":"clojure"},"/\\\\.cljs(cm)?$/i":{"image":"clojure"},".cmake":{"image":"cmake"},"/^CMakeLists\\\\.txt$/":{"image":"cmake"},"/\\\\.codeclimate\\\\.(yml|json)/i":{"image":"codeclimate"},".coffee":{"image":"coffeescript"},".cjsx":{"image":"coffeescript"},".coffee.ecr":{"image":"coffeescript"},".coffee.erb":{"image":"coffeescript"},".litcoffee":{"image":"coffeescript"},".iced":{"image":"coffeescript"},"/\\\\.c[+px]{2}$|\\\\.cc$/i":{"image":"cpp"},"/\\\\.h[+px]{2}$/i":{"image":"cpp"},"/\\\\.[it]pp$/i":{"image":"cpp"},"/\\\\.(tcc|inl)$/i":{"image":"cpp"},".cats":{"image":"cpp"},".idc":{"image":"cpp"},".w":{"image":"cpp"},".nc":{"image":"cpp"},".upc":{"image":"cpp"},".xpm":{"image":"cpp"},"/\\\\.e?cr$/i":{"image":"crystal"},".cs":{"image":"csharp"},".csx":{"image":"csharp"},".cshtml":{"image":"cshtml"},".css":{"image":"css"},".css.map":{"image":"cssmap"},".cu":{"image":"cuda"},"/\\\\.di?$/i":{"image":"d"},".dart":{"image":"dart"},".dfm":{"image":"delphi"},".dpr":{"image":"delphi"},".dsc":{"image":"denizen"},".dm":{"image":"dm"},".dme":{"image":"dm"},".dmm":{"image":"dm"},"/^(Dockerfile|docker-compose)|\\\\.docker(file|ignore)$/i":{"image":"docker"},"/^docker-sync\\\\.yml$/i":{"image":"docker"},".editorconfig":{"image":"editorconfig"},".ejs":{"image":"ejs"},".ex":{"image":"elixir"},"/\\\\.(exs|l?eex)$/i":{"image":"elixir"},"/^mix\\\\.(exs?|lock)$/i":{"image":"elixir"},".elm":{"image":"elm"},".env":{"image":"env"},".erl":{"image":"erlang"},".beam":{"image":"erlang"},".hrl":{"image":"erlang"},".xrl":{"image":"erlang"},".yrl":{"image":"erlang"},".app.src":{"image":"erlang"},"/^Emakefile$/":{"image":"erlang"},"/^rebar(\\\\.config)?\\\\.lock$/i":{"image":"erlang"},"/\\\\.(eslintrc|eslintignore)/i":{"image":"eslint"},"/(\\\\.firebaserc|firebase\\\\.json)/i":{"image":"firebase"},".flowconfig":{"image":"flowconfig"},".fs":{"image":"fsharp"},".fsi":{"image":"fsharp"},".fsscript":{"image":"fsharp"},".fsx":{"image":"fsharp"},"/gatsby-(browser|node|ssr|config)\\\\.js/i":{"image":"gatsbyjs"},"/^Gemfile(\\\\.lock)?$/i":{"image":"gemfile"},"/^\\\\.git|^\\\\.keep$|\\\\.mailmap$/i":{"image":"git"},".go":{"image":"go"},".gd":{"image":"godot"},".gradle":{"image":"gradle"},"gradlew":{"image":"gradle"},".gql":{"image":"graphql"},".graphql":{"image":"graphql"},".groovy":{"image":"groovy"},".gvy":{"image":"groovy"},".gy":{"image":"groovy"},".gsh":{"image":"groovy"},"/gruntfile\\\\.(js|coffee)/i":{"image":"gruntfile"},"gulpfile.js":{"image":"gulp"},"/\\\\.(hbs|handlebars|(mu)?stache)$/i":{"image":"handlebars"},".prg":{"image":"harbour"},".hbp":{"image":"harbour"},".hbc":{"image":"harbour"},".rc":{"image":"harbour"},".fmg":{"image":"harbour"},".hs":{"image":"haskell"},".hsc":{"image":"haskell"},".c2hs":{"image":"haskell"},".lhs":{"image":"haskell"},".hx":{"image":"haxe"},".hxml":{"image":"haxe"},"/^procfile/i":{"image":"heroku"},"heroku.yml":{"image":"heroku"},".hjson":{"image":"hjson"},"/\\\\.x?html?$/i":{"image":"html"},".http":{"image":"http"},".rest":{"image":"http"},".jar":{"image":"jar"},".java":{"image":"java"},"jest.config.js":{"image":"jest"},".jinja":{"image":"jinja"},".js":{"image":"javascript"},".es6":{"image":"javascript"},".es":{"image":"javascript"},".mjs":{"image":"javascript"},".js.map":{"image":"jsmap"},".json":{"image":"json"},".jsonc":{"image":"json"},".jsx":{"image":"jsx"},"/\\\\.(jil|jl)/i":{"image":"julia"},".ipynb":{"image":"jupyter"},".kt":{"image":"kotlin"},".ktm":{"image":"kotlin"},".kts":{"image":"kotlin"},".less":{"image":"less"},".lsp":{"image":"lisp"},".lisp":{"image":"lisp"},".l":{"image":"lisp"},".nl":{"image":"lisp"},".ny":{"image":"lisp"},".podsl":{"image":"lisp"},".sexp":{"image":"lisp"},".ss":{"image":"lisp"},".scm":{"image":"lisp"},".ls":{"image":"livescript"},".log":{"image":"log"},".lua":{"image":"lua"},".pd_lua":{"image":"lua"},".rbxs":{"image":"lua"},".wlua":{"image":"lua"},"/^Makefile/":{"image":"makefile"},"/^mk\\\\.config$/":{"image":"makefile"},"/\\\\.(mk|mak|make)$/i":{"image":"makefile"},"/^BSDmakefile$/i":{"image":"makefile"},"/^GNUmakefile$/i":{"image":"makefile"},"/^makefile\\\\.sco$/i":{"image":"makefile"},"/^Kbuild$/":{"image":"makefile"},"/^makefile$/":{"image":"makefile"},"/^mkfile$/i":{"image":"makefile"},"/^\\\\.?qmake$/i":{"image":"makefile"},"/\\\\.(h|geo|topo)$/i":{"image":"manifest"},".cson":{"image":"manifest"},".json5":{"image":"manifest"},".ndjson":{"image":"manifest"},".fea":{"image":"manifest"},".json.eex":{"image":"manifest"},".proto":{"image":"manifest"},".pytb":{"image":"manifest"},".pydeps":{"image":"manifest"},"/\\\\.pot?$/i":{"image":"manifest"},".ejson":{"image":"manifest"},".edn":{"image":"manifest"},".eam.fs":{"image":"manifest"},".qml":{"image":"manifest"},".qbs":{"image":"manifest"},".ston":{"image":"manifest"},".ttl":{"image":"manifest"},".rviz":{"image":"manifest"},".syntax":{"image":"manifest"},".webmanifest":{"image":"manifest"},"/^pkginfo$/":{"image":"manifest"},"/^mime\\\\.types$/i":{"image":"manifest"},"/^METADATA\\\\.pb$/":{"image":"manifest"},"/[\\\\/\\\\\\\\](?:magic[\\\\/\\\\\\\\]Magdir|file[\\\\/\\\\\\\\]magic)[\\\\/\\\\\\\\][-.\\\\w]+$/i":{"image":"manifest"},"/(\\\\\\\\|\\\\/)dev[-\\\\w]+\\\\1(?:[^\\\\\\\\\\\\/]+\\\\1)*(?!DESC|NOTES)(?:[A-Z][-A-Z]*)(?:\\\\.in)?$/":{"image":"manifest"},"lib/icons/.icondb.js":{"image":"manifest"},"/\\\\.git[\\\\/\\\\\\\\](.*[\\\\/\\\\\\\\])?(HEAD|ORIG_HEAD|packed-refs|logs[\\\\/\\\\\\\\](.+[\\\\/\\\\\\\\])?[^\\\\/\\\\\\\\]+)$/":{"image":"manifest"},"/\\\\.(md|mdown|markdown|mkd|mkdown|mdwn|mkdn|rmd|ron|pmd)$/i":{"image":"markdown"},".mdx":{"image":"markdownx"},".marko":{"image":"marko"},".nim":{"image":"nim"},".nims":{"image":"nim"},".nimble":{"image":"nim"},".nix":{"image":"nix"},"nodemon.json":{"image":"nodemon"},".npmrc":{"image":"npm"},"/\\\\.mm?$/i":{"image":"objective-c"},".pch":{"image":"objective-c"},".x":{"image":"objective-c"},".ml":{"image":"ocaml"},".mli":{"image":"ocaml"},".eliom":{"image":"ocaml"},".eliomi":{"image":"ocaml"},".ml4":{"image":"ocaml"},".mll":{"image":"ocaml"},".mly":{"image":"ocaml"},"/\\\\.pas(cal)?$/i":{"image":"pascal"},".lpr":{"image":"pascal"},".p":{"image":"pawn"},".inc":{"image":"pawn"},".sma":{"image":"pawn"},".pwn":{"image":"pawn"},".sp":{"image":"sourcepawn"},"/\\\\.p(er)?l$/i":{"image":"perl"},".al":{"image":"perl"},".ph":{"image":"perl"},".plx":{"image":"perl"},".pm":{"image":"perl"},"/\\\\.(psgi|xs)$/i":{"image":"perl"},".pl6":{"image":"perl"},"/\\\\.[tp]6$|\\\\.6pl$/i":{"image":"perl"},"/\\\\.(pm6|p6m)$/i":{"image":"perl"},".6pm":{"image":"perl"},".nqp":{"image":"perl"},".p6l":{"image":"perl"},".pod6":{"image":"perl"},"/^Rexfile$/":{"image":"perl"},"/\\\\.php([st\\\\d]|_cs)?$/i":{"image":"php"},"/^Phakefile/":{"image":"php"},".pony":{"image":"ponylang"},".pcss":{"image":"postcss"},".ps1":{"image":"powershell"},".psd1":{"image":"powershell"},".psm1":{"image":"powershell"},".ps1xml":{"image":"powershell"},".prettierignore":{"image":"prettier"},"/\\\\.prettier((rc)|(\\\\.(toml|yml|yaml|json|js))?$){2}/i":{"image":"prettier"},"prettier.config.js":{"image":"prettier"},"prisma.yml":{"image":"prisma"},".pde":{"image":"processing"},".jade":{"image":"pug"},".pug":{"image":"pug"},".purs":{"image":"purescript"},".py":{"image":"python"},".ipy":{"image":"python"},".isolate":{"image":"python"},".pep":{"image":"python"},".gyp":{"image":"python"},".gypi":{"image":"python"},".pyde":{"image":"python"},".pyp":{"image":"python"},".pyt":{"image":"python"},".py3":{"image":"python"},".pyi":{"image":"python"},".pyw":{"image":"python"},".tac":{"image":"python"},".wsgi":{"image":"python"},".xpy":{"image":"python"},".rpy":{"image":"python"},"/\\\\.?(pypirc|pythonrc|python-venv)$/i":{"image":"python"},"/^(SConstruct|SConscript)$/":{"image":"python"},"/^(Snakefile|WATCHLISTS)$/":{"image":"python"},"/^wscript$/":{"image":"python"},"/\\\\.(r|Rprofile|rsx|rd)$/i":{"image":"r"},"/\\\\.res?i?$/i":{"image":"reasonml"},"/\\\\.(rb|ru|ruby|erb|gemspec|god|mspec|pluginspec|podspec|rabl|rake|opal)$/i":{"image":"ruby"},"/^\\\\.?(irbrc|gemrc|pryrc|ruby-(gemset|version))$/i":{"image":"ruby"},"/^(Appraisals|(Rake|[bB]uild|Cap|Danger|Deliver|Fast|Guard|Jar|Maven|Pod|Puppet|Snap)file(\\\\.lock)?)$/":{"image":"ruby"},"/\\\\.(jbuilder|rbuild|rb[wx]|builder)$/i":{"image":"ruby"},"/^rails$/":{"image":"ruby"},".watchr":{"image":"ruby"},".rs":{"image":"rust"},"/\\\\.(sc|scala)$/i":{"image":"scala"},".scss":{"image":"scss"},".sass":{"image":"scss"},"/\\\\.(sh|rc|bats|bash|tool|install|command)$/i":{"image":"shell"},"/^(\\\\.?bash(rc|[-_]?(profile|login|logout|history|prompt))|_osc|config|install-sh|PKGBUILD)$/i":{"image":"shell"},"/\\\\.(ksh|mksh|pdksh)$/i":{"image":"shell"},".sh-session":{"image":"shell"},"/\\\\.zsh(-theme|_history)?$|^\\\\.?(antigen|zpreztorc|zlogin|zlogout|zprofile|zshenv|zshrc)$/i":{"image":"shell"},"/\\\\.fish$|^\\\\.fishrc$/i":{"image":"shell"},"/^\\\\.?(login|profile)$/":{"image":"shell"},".inputrc":{"image":"shell"},".tmux":{"image":"shell"},"/^(configure|config\\\\.(guess|rpath|status|sub)|depcomp|libtool|compile)$/":{"image":"shell"},"/^\\\\/(private\\\\/)?etc\\\\/([^\\\\/]+\\\\/)*(profile$|nanorc$|rc\\\\.|csh\\\\.)/i":{"image":"shell"},"/^\\\\.?cshrc$/i":{"image":"shell"},".profile":{"image":"shell"},".tcsh":{"image":"shell"},".csh":{"image":"shell"},".sk":{"image":"skript"},".sqf":{"image":"sqf"},"/\\\\.(my)?sql$/i":{"image":"sql"},".ddl":{"image":"sql"},".udf":{"image":"sql"},".hql":{"image":"sql"},".viw":{"image":"sql"},".prc":{"image":"sql"},".cql":{"image":"sql"},".db2":{"image":"sql"},"/\\\\.(styl|stylus)$/i":{"image":"stylus"},".svelte":{"image":"svelte"},".svg":{"image":"svg"},".swift":{"image":"swift"},".tex":{"image":"tex"},".ltx":{"image":"tex"},".aux":{"image":"tex"},".sty":{"image":"tex"},".dtx":{"image":"tex"},".cls":{"image":"tex"},".ins":{"image":"tex"},".lbx":{"image":"tex"},".mkiv":{"image":"tex"},".mkvi":{"image":"tex"},".mkii":{"image":"tex"},".texi":{"image":"tex"},"/^hyphen(ex)?\\\\.(cs|den|det|fr|sv|us)$/":{"image":"tex"},"/\\\\.te?xt$/i":{"image":"text"},".rtf":{"image":"text"},"/\\\\.i?nfo$/i":{"image":"text"},".msg":{"image":"text"},"/\\\\.(utxt|utf8)$/i":{"image":"text"},".toml":{"image":"toml"},".travis.yml":{"image":"travis"},".ts":{"image":"typescript"},".tsx":{"image":"tsx"},".twig":{"image":"twig"},"/.*\\\\.d\\\\.ts/i":{"image":"typescript-def"},".v":{"image":"v"},".vh":{"image":"v"},".vala":{"image":"vala"},".vapi":{"image":"vala"},".vb":{"image":"vb"},".vbs":{"image":"vb"},".vbhtml":{"image":"vb"},".vbproj":{"image":"vb"},".vba":{"image":"vba"},".vcxproj":{"image":"vcxproj"},".vscodeignore":{"image":"vscodeignore"},".vue":{"image":"vue"},".wat":{"image":"wasm"},".wast":{"image":"wasm"},".wasm":{"image":"wasm"},"/webpack(\\\\.dev|\\\\.development|\\\\.prod|\\\\.production)?\\\\.config(\\\\.babel)?\\\\.(js|jsx|coffee|ts|json|json5|yaml|yml)/i":{"image":"webpack"},".xml":{"image":"xml"},"/\\\\.ya?ml$/i":{"image":"yaml"},"/^yarn(\\\\.lock)?$/i":{"image":"yarn"},".yarnrc":{"image":"yarn"},".zig":{"image":"zig"}}}')},373:module=>{"use strict";module.exports=require("crypto")},614:module=>{"use strict";module.exports=require("events")},747:module=>{"use strict";module.exports=require("fs")},605:module=>{"use strict";module.exports=require("http")},211:module=>{"use strict";module.exports=require("https")},631:module=>{"use strict";module.exports=require("net")},87:module=>{"use strict";module.exports=require("os")},622:module=>{"use strict";module.exports=require("path")},413:module=>{"use strict";module.exports=require("stream")},213:module=>{"use strict";module.exports=require("timers")},16:module=>{"use strict";module.exports=require("tls")},835:module=>{"use strict";module.exports=require("url")},549:module=>{"use strict";module.exports=require("vscode")},761:module=>{"use strict";module.exports=require("zlib")}},__webpack_module_cache__={};function __webpack_require__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(void 0!==cachedModule)return cachedModule.exports;var module=__webpack_module_cache__[moduleId]={exports:{}};return __webpack_modules__[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.exports}__webpack_require__.d=(exports,definition)=>{for(var key in definition)__webpack_require__.o(definition,key)&&!__webpack_require__.o(exports,key)&&Object.defineProperty(exports,key,{enumerable:!0,get:definition[key]})},__webpack_require__.o=(obj,prop)=>Object.prototype.hasOwnProperty.call(obj,prop),__webpack_require__.r=exports=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{"use strict";var exports=__webpack_exports__;Object.defineProperty(exports,"__esModule",{value:!0}),exports.deactivate=exports.activate=exports.cleanUp=void 0;const tslib_1=__webpack_require__(655),{Client}=__webpack_require__(277),vscode_1=__webpack_require__(549),throttle_1=tslib_1.__importDefault(__webpack_require__(630)),activity_1=__webpack_require__(119),constants_1=__webpack_require__(601),logger_1=__webpack_require__(473),util_1=__webpack_require__(882),statusBarIcon=vscode_1.window.createStatusBarItem(vscode_1.StatusBarAlignment.Left);statusBarIcon.text="$(pulse) Connecting to Discord...";let rpc=new Client({transport:"ipc"});const config=util_1.getConfig();let idle,state={},listeners=[];function cleanUp(){listeners.forEach((listener=>listener.dispose())),listeners=[]}async function sendActivity(){state={...await activity_1.activity(state)},rpc.setActivity(state)}async function login(){var _a;logger_1.log("INFO","Creating discord-rpc client"),rpc=new Client({transport:"ipc"}),rpc.on("ready",(()=>{logger_1.log("INFO","Successfully connected to Discord"),cleanUp(),statusBarIcon.text="$(globe) Connected to Discord",statusBarIcon.tooltip="Connected to Discord",sendActivity();const onChangeActiveTextEditor=vscode_1.window.onDidChangeActiveTextEditor((()=>sendActivity())),onChangeTextDocument=vscode_1.workspace.onDidChangeTextDocument(throttle_1.default((()=>sendActivity()),2e3)),onStartDebugSession=vscode_1.debug.onDidStartDebugSession((()=>sendActivity())),onTerminateDebugSession=vscode_1.debug.onDidTerminateDebugSession((()=>sendActivity()));listeners.push(onChangeActiveTextEditor,onChangeTextDocument,onStartDebugSession,onTerminateDebugSession)})),rpc.on("disconnected",(async()=>{cleanUp(),await rpc.destroy(),statusBarIcon.text="$(pulse) Reconnect to Discord",statusBarIcon.command="discord.reconnect"}));try{await rpc.login({clientId:constants_1.CLIENT_ID})}catch(error){logger_1.log("ERROR",`Encountered following error while trying to login:\n${error}`),cleanUp(),await rpc.destroy(),config.suppressNotifications||((null===(_a=null==error?void 0:error.message)||void 0===_a?void 0:_a.includes("ENOENT"))?vscode_1.window.showErrorMessage("No Discord client detected"):vscode_1.window.showErrorMessage(`Couldn't connect to Discord via RPC: ${error}`)),statusBarIcon.text="$(pulse) Reconnect to Discord",statusBarIcon.command="discord.reconnect"}}exports.cleanUp=cleanUp,exports.activate=async function activate(context){logger_1.log("INFO","Discord Presence activated");let isWorkspaceExcluded=!1;for(const pattern of config.workspaceExcludePatterns){const regex=new RegExp(pattern),folders=vscode_1.workspace.workspaceFolders;if(!folders)break;if(folders.some((folder=>regex.test(folder.uri.fsPath)))){isWorkspaceExcluded=!0;break}}const enable=async(update=!0)=>{if(update)try{await config.update("enabled",!0)}catch{}logger_1.log("INFO","Enable: Cleaning up old listeners"),cleanUp(),statusBarIcon.text="$(pulse) Connecting to Discord...",statusBarIcon.show(),logger_1.log("INFO","Enable: Attempting to recreate login"),login()},disable=async(update=!0)=>{if(update)try{await config.update("enabled",!1)}catch{}logger_1.log("INFO","Disable: Cleaning up old listeners"),cleanUp(),null==rpc||rpc.destroy(),logger_1.log("INFO","Disable: Destroyed the rpc instance"),statusBarIcon.hide()},enabler=vscode_1.commands.registerCommand("discord.enable",(async()=>{await disable(),await enable(),await vscode_1.window.showInformationMessage("Enabled Discord Presence for this workspace")})),disabler=vscode_1.commands.registerCommand("discord.disable",(async()=>{await disable(),await vscode_1.window.showInformationMessage("Disabled Discord Presence for this workspace")})),reconnecter=vscode_1.commands.registerCommand("discord.reconnect",(async()=>{await disable(!1),await enable(!1)})),disconnect=vscode_1.commands.registerCommand("discord.disconnect",(async()=>{await disable(!1),statusBarIcon.text="$(pulse) Reconnect to Discord",statusBarIcon.command="discord.reconnect",statusBarIcon.show()}));context.subscriptions.push(enabler,disabler,reconnecter,disconnect),!isWorkspaceExcluded&&config.enabled&&(statusBarIcon.show(),await login()),vscode_1.window.onDidChangeWindowState((async windowState=>{0!==config.idleTimeout&&(windowState.focused?(idle&&clearTimeout(idle),await sendActivity()):idle=setTimeout((async()=>{state={},await rpc.clearActivity()}),1e3*config.idleTimeout))})),await util_1.getGit()},exports.deactivate=function deactivate(){cleanUp(),rpc.destroy()}})(),module.exports=__webpack_exports__})();
//# sourceMappingURL=extension.js.map