var _v=Object.create;var li=Object.defineProperty,Pv=Object.defineProperties,Ev=Object.getOwnPropertyDescriptor,xv=Object.getOwnPropertyDescriptors,kv=Object.getOwnPropertyNames,co=Object.getOwnPropertySymbols,qv=Object.getPrototypeOf,Ss=Object.prototype.hasOwnProperty,Bc=Object.prototype.propertyIsEnumerable;var Gc=(t,e,n)=>e in t?li(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,uo=(t,e)=>{for(var n in e||(e={}))Ss.call(e,n)&&Gc(t,n,e[n]);if(co)for(var n of co(e))Bc.call(e,n)&&Gc(t,n,e[n]);return t},Vc=(t,e)=>Pv(t,xv(e)),Xc=t=>li(t,"__esModule",{value:!0});var Jc=(t,e)=>{var n={};for(var r in t)Ss.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&co)for(var r of co(t))e.indexOf(r)<0&&Bc.call(t,r)&&(n[r]=t[r]);return n};var _=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Ov=(t,e)=>{Xc(t);for(var n in e)li(t,n,{get:e[n],enumerable:!0})},Iv=(t,e,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of kv(e))!Ss.call(t,r)&&r!=="default"&&li(t,r,{get:()=>e[r],enumerable:!(n=Ev(e,r))||n.enumerable});return t},re=t=>Iv(Xc(li(t!=null?_v(qv(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var di=_((S_,Yc)=>{var Fv="2.0.0",Nv=256,Av=Number.MAX_SAFE_INTEGER||9007199254740991,Lv=16;Yc.exports={SEMVER_SPEC_VERSION:Fv,MAX_LENGTH:Nv,MAX_SAFE_INTEGER:Av,MAX_SAFE_COMPONENT_LENGTH:Lv}});var fi=_((__,Qc)=>{var Mv=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};Qc.exports=Mv});var sr=_((Un,Zc)=>{var{MAX_SAFE_COMPONENT_LENGTH:_s}=di(),$v=fi();Un=Zc.exports={};var jv=Un.re=[],H=Un.src=[],W=Un.t={},Hv=0,ie=(t,e,n)=>{let r=Hv++;$v(r,e),W[t]=r,H[r]=e,jv[r]=new RegExp(e,n?"g":void 0)};ie("NUMERICIDENTIFIER","0|[1-9]\\d*");ie("NUMERICIDENTIFIERLOOSE","[0-9]+");ie("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");ie("MAINVERSION",`(${H[W.NUMERICIDENTIFIER]})\\.(${H[W.NUMERICIDENTIFIER]})\\.(${H[W.NUMERICIDENTIFIER]})`);ie("MAINVERSIONLOOSE",`(${H[W.NUMERICIDENTIFIERLOOSE]})\\.(${H[W.NUMERICIDENTIFIERLOOSE]})\\.(${H[W.NUMERICIDENTIFIERLOOSE]})`);ie("PRERELEASEIDENTIFIER",`(?:${H[W.NUMERICIDENTIFIER]}|${H[W.NONNUMERICIDENTIFIER]})`);ie("PRERELEASEIDENTIFIERLOOSE",`(?:${H[W.NUMERICIDENTIFIERLOOSE]}|${H[W.NONNUMERICIDENTIFIER]})`);ie("PRERELEASE",`(?:-(${H[W.PRERELEASEIDENTIFIER]}(?:\\.${H[W.PRERELEASEIDENTIFIER]})*))`);ie("PRERELEASELOOSE",`(?:-?(${H[W.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${H[W.PRERELEASEIDENTIFIERLOOSE]})*))`);ie("BUILDIDENTIFIER","[0-9A-Za-z-]+");ie("BUILD",`(?:\\+(${H[W.BUILDIDENTIFIER]}(?:\\.${H[W.BUILDIDENTIFIER]})*))`);ie("FULLPLAIN",`v?${H[W.MAINVERSION]}${H[W.PRERELEASE]}?${H[W.BUILD]}?`);ie("FULL",`^${H[W.FULLPLAIN]}$`);ie("LOOSEPLAIN",`[v=\\s]*${H[W.MAINVERSIONLOOSE]}${H[W.PRERELEASELOOSE]}?${H[W.BUILD]}?`);ie("LOOSE",`^${H[W.LOOSEPLAIN]}$`);ie("GTLT","((?:<|>)?=?)");ie("XRANGEIDENTIFIERLOOSE",`${H[W.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);ie("XRANGEIDENTIFIER",`${H[W.NUMERICIDENTIFIER]}|x|X|\\*`);ie("XRANGEPLAIN",`[v=\\s]*(${H[W.XRANGEIDENTIFIER]})(?:\\.(${H[W.XRANGEIDENTIFIER]})(?:\\.(${H[W.XRANGEIDENTIFIER]})(?:${H[W.PRERELEASE]})?${H[W.BUILD]}?)?)?`);ie("XRANGEPLAINLOOSE",`[v=\\s]*(${H[W.XRANGEIDENTIFIERLOOSE]})(?:\\.(${H[W.XRANGEIDENTIFIERLOOSE]})(?:\\.(${H[W.XRANGEIDENTIFIERLOOSE]})(?:${H[W.PRERELEASELOOSE]})?${H[W.BUILD]}?)?)?`);ie("XRANGE",`^${H[W.GTLT]}\\s*${H[W.XRANGEPLAIN]}$`);ie("XRANGELOOSE",`^${H[W.GTLT]}\\s*${H[W.XRANGEPLAINLOOSE]}$`);ie("COERCE",`(^|[^\\d])(\\d{1,${_s}})(?:\\.(\\d{1,${_s}}))?(?:\\.(\\d{1,${_s}}))?(?:$|[^\\d])`);ie("COERCERTL",H[W.COERCE],!0);ie("LONETILDE","(?:~>?)");ie("TILDETRIM",`(\\s*)${H[W.LONETILDE]}\\s+`,!0);Un.tildeTrimReplace="$1~";ie("TILDE",`^${H[W.LONETILDE]}${H[W.XRANGEPLAIN]}$`);ie("TILDELOOSE",`^${H[W.LONETILDE]}${H[W.XRANGEPLAINLOOSE]}$`);ie("LONECARET","(?:\\^)");ie("CARETTRIM",`(\\s*)${H[W.LONECARET]}\\s+`,!0);Un.caretTrimReplace="$1^";ie("CARET",`^${H[W.LONECARET]}${H[W.XRANGEPLAIN]}$`);ie("CARETLOOSE",`^${H[W.LONECARET]}${H[W.XRANGEPLAINLOOSE]}$`);ie("COMPARATORLOOSE",`^${H[W.GTLT]}\\s*(${H[W.LOOSEPLAIN]})$|^$`);ie("COMPARATOR",`^${H[W.GTLT]}\\s*(${H[W.FULLPLAIN]})$|^$`);ie("COMPARATORTRIM",`(\\s*)${H[W.GTLT]}\\s*(${H[W.LOOSEPLAIN]}|${H[W.XRANGEPLAIN]})`,!0);Un.comparatorTrimReplace="$1$2$3";ie("HYPHENRANGE",`^\\s*(${H[W.XRANGEPLAIN]})\\s+-\\s+(${H[W.XRANGEPLAIN]})\\s*$`);ie("HYPHENRANGELOOSE",`^\\s*(${H[W.XRANGEPLAINLOOSE]})\\s+-\\s+(${H[W.XRANGEPLAINLOOSE]})\\s*$`);ie("STAR","(<|>)?=?\\s*\\*");ie("GTE0","^\\s*>=\\s*0.0.0\\s*$");ie("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")});var pi=_((P_,eu)=>{var Wv=["includePrerelease","loose","rtl"],zv=t=>t?typeof t!="object"?{loose:!0}:Wv.filter(e=>t[e]).reduce((e,n)=>(e[n]=!0,e),{}):{};eu.exports=zv});var lo=_((E_,ru)=>{var tu=/^[0-9]+$/,nu=(t,e)=>{let n=tu.test(t),r=tu.test(e);return n&&r&&(t=+t,e=+e),t===e?0:n&&!r?-1:r&&!n?1:t<e?-1:1},Uv=(t,e)=>nu(e,t);ru.exports={compareIdentifiers:nu,rcompareIdentifiers:Uv}});var tt=_((x_,au)=>{var fo=fi(),{MAX_LENGTH:iu,MAX_SAFE_INTEGER:po}=di(),{re:ou,t:su}=sr(),Kv=pi(),{compareIdentifiers:hi}=lo(),Lt=class{constructor(e,n){if(n=Kv(n),e instanceof Lt){if(e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid Version: ${e}`);if(e.length>iu)throw new TypeError(`version is longer than ${iu} characters`);fo("SemVer",e,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;let r=e.trim().match(n.loose?ou[su.LOOSE]:ou[su.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>po||this.major<0)throw new TypeError("Invalid major version");if(this.minor>po||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>po||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let o=+i;if(o>=0&&o<po)return o}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(fo("SemVer.compare",this.version,this.options,e),!(e instanceof Lt)){if(typeof e=="string"&&e===this.version)return 0;e=new Lt(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof Lt||(e=new Lt(e,this.options)),hi(this.major,e.major)||hi(this.minor,e.minor)||hi(this.patch,e.patch)}comparePre(e){if(e instanceof Lt||(e=new Lt(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let n=0;do{let r=this.prerelease[n],i=e.prerelease[n];if(fo("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return hi(r,i)}while(++n)}compareBuild(e){e instanceof Lt||(e=new Lt(e,this.options));let n=0;do{let r=this.build[n],i=e.build[n];if(fo("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return hi(r,i)}while(++n)}inc(e,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n),this.inc("pre",n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n),this.inc("pre",n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let r=this.prerelease.length;for(;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}n&&(this.prerelease[0]===n?isNaN(this.prerelease[1])&&(this.prerelease=[n,0]):this.prerelease=[n,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}};au.exports=Lt});var ar=_((k_,du)=>{var{MAX_LENGTH:Bv}=di(),{re:cu,t:uu}=sr(),lu=tt(),Gv=pi(),Vv=(t,e)=>{if(e=Gv(e),t instanceof lu)return t;if(typeof t!="string"||t.length>Bv||!(e.loose?cu[uu.LOOSE]:cu[uu.FULL]).test(t))return null;try{return new lu(t,e)}catch(r){return null}};du.exports=Vv});var pu=_((q_,fu)=>{var Xv=ar(),Jv=(t,e)=>{let n=Xv(t,e);return n?n.version:null};fu.exports=Jv});var gu=_((O_,hu)=>{var Yv=ar(),Qv=(t,e)=>{let n=Yv(t.trim().replace(/^[=v]+/,""),e);return n?n.version:null};hu.exports=Qv});var vu=_((I_,mu)=>{var Zv=tt(),ey=(t,e,n,r)=>{typeof n=="string"&&(r=n,n=void 0);try{return new Zv(t,n).inc(e,r).version}catch(i){return null}};mu.exports=ey});var Mt=_((F_,Cu)=>{var yu=tt(),ty=(t,e,n)=>new yu(t,n).compare(new yu(e,n));Cu.exports=ty});var ho=_((N_,wu)=>{var ny=Mt(),ry=(t,e,n)=>ny(t,e,n)===0;wu.exports=ry});var Tu=_((A_,bu)=>{var Ru=ar(),iy=ho(),oy=(t,e)=>{if(iy(t,e))return null;{let n=Ru(t),r=Ru(e),i=n.prerelease.length||r.prerelease.length,o=i?"pre":"",s=i?"prerelease":"";for(let c in n)if((c==="major"||c==="minor"||c==="patch")&&n[c]!==r[c])return o+c;return s}};bu.exports=oy});var Su=_((L_,Du)=>{var sy=tt(),ay=(t,e)=>new sy(t,e).major;Du.exports=ay});var Pu=_((M_,_u)=>{var cy=tt(),uy=(t,e)=>new cy(t,e).minor;_u.exports=uy});var xu=_(($_,Eu)=>{var ly=tt(),dy=(t,e)=>new ly(t,e).patch;Eu.exports=dy});var qu=_((j_,ku)=>{var fy=ar(),py=(t,e)=>{let n=fy(t,e);return n&&n.prerelease.length?n.prerelease:null};ku.exports=py});var Iu=_((H_,Ou)=>{var hy=Mt(),gy=(t,e,n)=>hy(e,t,n);Ou.exports=gy});var Nu=_((W_,Fu)=>{var my=Mt(),vy=(t,e)=>my(t,e,!0);Fu.exports=vy});var go=_((z_,Lu)=>{var Au=tt(),yy=(t,e,n)=>{let r=new Au(t,n),i=new Au(e,n);return r.compare(i)||r.compareBuild(i)};Lu.exports=yy});var $u=_((U_,Mu)=>{var Cy=go(),wy=(t,e)=>t.sort((n,r)=>Cy(n,r,e));Mu.exports=wy});var Hu=_((K_,ju)=>{var Ry=go(),by=(t,e)=>t.sort((n,r)=>Ry(r,n,e));ju.exports=by});var gi=_((B_,Wu)=>{var Ty=Mt(),Dy=(t,e,n)=>Ty(t,e,n)>0;Wu.exports=Dy});var mo=_((G_,zu)=>{var Sy=Mt(),_y=(t,e,n)=>Sy(t,e,n)<0;zu.exports=_y});var Ps=_((V_,Uu)=>{var Py=Mt(),Ey=(t,e,n)=>Py(t,e,n)!==0;Uu.exports=Ey});var vo=_((X_,Ku)=>{var xy=Mt(),ky=(t,e,n)=>xy(t,e,n)>=0;Ku.exports=ky});var yo=_((J_,Bu)=>{var qy=Mt(),Oy=(t,e,n)=>qy(t,e,n)<=0;Bu.exports=Oy});var Es=_((Y_,Gu)=>{var Iy=ho(),Fy=Ps(),Ny=gi(),Ay=vo(),Ly=mo(),My=yo(),$y=(t,e,n,r)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t===n;case"!==":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t!==n;case"":case"=":case"==":return Iy(t,n,r);case"!=":return Fy(t,n,r);case">":return Ny(t,n,r);case">=":return Ay(t,n,r);case"<":return Ly(t,n,r);case"<=":return My(t,n,r);default:throw new TypeError(`Invalid operator: ${e}`)}};Gu.exports=$y});var Xu=_((Q_,Vu)=>{var jy=tt(),Hy=ar(),{re:Co,t:wo}=sr(),Wy=(t,e)=>{if(t instanceof jy)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let n=null;if(!e.rtl)n=t.match(Co[wo.COERCE]);else{let r;for(;(r=Co[wo.COERCERTL].exec(t))&&(!n||n.index+n[0].length!==t.length);)(!n||r.index+r[0].length!==n.index+n[0].length)&&(n=r),Co[wo.COERCERTL].lastIndex=r.index+r[1].length+r[2].length;Co[wo.COERCERTL].lastIndex=-1}return n===null?null:Hy(`${n[2]}.${n[3]||"0"}.${n[4]||"0"}`,e)};Vu.exports=Wy});var Yu=_((Z_,Ju)=>{"use strict";Ju.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var Zu=_((eP,Qu)=>{"use strict";Qu.exports=de;de.Node=cr;de.create=de;function de(t){var e=this;if(e instanceof de||(e=new de),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)e.push(arguments[n]);return e}de.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,n=t.prev;return e&&(e.prev=n),n&&(n.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=n),t.list.length--,t.next=null,t.prev=null,t.list=null,e};de.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};de.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};de.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)Uy(this,arguments[t]);return this.length};de.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)Ky(this,arguments[t]);return this.length};de.prototype.pop=function(){if(!!this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};de.prototype.shift=function(){if(!!this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};de.prototype.forEach=function(t,e){e=e||this;for(var n=this.head,r=0;n!==null;r++)t.call(e,n.value,r,this),n=n.next};de.prototype.forEachReverse=function(t,e){e=e||this;for(var n=this.tail,r=this.length-1;n!==null;r--)t.call(e,n.value,r,this),n=n.prev};de.prototype.get=function(t){for(var e=0,n=this.head;n!==null&&e<t;e++)n=n.next;if(e===t&&n!==null)return n.value};de.prototype.getReverse=function(t){for(var e=0,n=this.tail;n!==null&&e<t;e++)n=n.prev;if(e===t&&n!==null)return n.value};de.prototype.map=function(t,e){e=e||this;for(var n=new de,r=this.head;r!==null;)n.push(t.call(e,r.value,this)),r=r.next;return n};de.prototype.mapReverse=function(t,e){e=e||this;for(var n=new de,r=this.tail;r!==null;)n.push(t.call(e,r.value,this)),r=r.prev;return n};de.prototype.reduce=function(t,e){var n,r=this.head;if(arguments.length>1)n=e;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=t(n,r.value,i),r=r.next;return n};de.prototype.reduceReverse=function(t,e){var n,r=this.tail;if(arguments.length>1)n=e;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=t(n,r.value,i),r=r.prev;return n};de.prototype.toArray=function(){for(var t=new Array(this.length),e=0,n=this.head;n!==null;e++)t[e]=n.value,n=n.next;return t};de.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,n=this.tail;n!==null;e++)t[e]=n.value,n=n.prev;return t};de.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var n=new de;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=0,i=this.head;i!==null&&r<t;r++)i=i.next;for(;i!==null&&r<e;r++,i=i.next)n.push(i.value);return n};de.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var n=new de;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=this.length,i=this.tail;i!==null&&r>e;r--)i=i.prev;for(;i!==null&&r>t;r--,i=i.prev)n.push(i.value);return n};de.prototype.splice=function(t,e,...n){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var r=0,i=this.head;i!==null&&r<t;r++)i=i.next;for(var o=[],r=0;i&&r<e;r++)o.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=zy(this,i,n[r]);return o};de.prototype.reverse=function(){for(var t=this.head,e=this.tail,n=t;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=e,this.tail=t,this};function zy(t,e,n){var r=e===t.head?new cr(n,null,e,t):new cr(n,e,e.next,t);return r.next===null&&(t.tail=r),r.prev===null&&(t.head=r),t.length++,r}function Uy(t,e){t.tail=new cr(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function Ky(t,e){t.head=new cr(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function cr(t,e,n,r){if(!(this instanceof cr))return new cr(t,e,n,r);this.list=r,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{Yu()(de)}catch(t){}});var sl=_((tP,ol)=>{"use strict";var By=Zu(),ur=Symbol("max"),Tn=Symbol("length"),Or=Symbol("lengthCalculator"),mi=Symbol("allowStale"),lr=Symbol("maxAge"),Dn=Symbol("dispose"),el=Symbol("noDisposeOnSet"),ze=Symbol("lruList"),Bt=Symbol("cache"),tl=Symbol("updateAgeOnGet"),xs=()=>1,nl=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");let n=this[ur]=e.max||1/0,r=e.length||xs;if(this[Or]=typeof r!="function"?xs:r,this[mi]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[lr]=e.maxAge||0,this[Dn]=e.dispose,this[el]=e.noDisposeOnSet||!1,this[tl]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[ur]=e||1/0,vi(this)}get max(){return this[ur]}set allowStale(e){this[mi]=!!e}get allowStale(){return this[mi]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[lr]=e,vi(this)}get maxAge(){return this[lr]}set lengthCalculator(e){typeof e!="function"&&(e=xs),e!==this[Or]&&(this[Or]=e,this[Tn]=0,this[ze].forEach(n=>{n.length=this[Or](n.value,n.key),this[Tn]+=n.length})),vi(this)}get lengthCalculator(){return this[Or]}get length(){return this[Tn]}get itemCount(){return this[ze].length}rforEach(e,n){n=n||this;for(let r=this[ze].tail;r!==null;){let i=r.prev;il(this,e,r,n),r=i}}forEach(e,n){n=n||this;for(let r=this[ze].head;r!==null;){let i=r.next;il(this,e,r,n),r=i}}keys(){return this[ze].toArray().map(e=>e.key)}values(){return this[ze].toArray().map(e=>e.value)}reset(){this[Dn]&&this[ze]&&this[ze].length&&this[ze].forEach(e=>this[Dn](e.key,e.value)),this[Bt]=new Map,this[ze]=new By,this[Tn]=0}dump(){return this[ze].map(e=>Ro(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[ze]}set(e,n,r){if(r=r||this[lr],r&&typeof r!="number")throw new TypeError("maxAge must be a number");let i=r?Date.now():0,o=this[Or](n,e);if(this[Bt].has(e)){if(o>this[ur])return Ir(this,this[Bt].get(e)),!1;let a=this[Bt].get(e).value;return this[Dn]&&(this[el]||this[Dn](e,a.value)),a.now=i,a.maxAge=r,a.value=n,this[Tn]+=o-a.length,a.length=o,this.get(e),vi(this),!0}let s=new rl(e,n,o,i,r);return s.length>this[ur]?(this[Dn]&&this[Dn](e,n),!1):(this[Tn]+=s.length,this[ze].unshift(s),this[Bt].set(e,this[ze].head),vi(this),!0)}has(e){if(!this[Bt].has(e))return!1;let n=this[Bt].get(e).value;return!Ro(this,n)}get(e){return ks(this,e,!0)}peek(e){return ks(this,e,!1)}pop(){let e=this[ze].tail;return e?(Ir(this,e),e.value):null}del(e){Ir(this,this[Bt].get(e))}load(e){this.reset();let n=Date.now();for(let r=e.length-1;r>=0;r--){let i=e[r],o=i.e||0;if(o===0)this.set(i.k,i.v);else{let s=o-n;s>0&&this.set(i.k,i.v,s)}}}prune(){this[Bt].forEach((e,n)=>ks(this,n,!1))}},ks=(t,e,n)=>{let r=t[Bt].get(e);if(r){let i=r.value;if(Ro(t,i)){if(Ir(t,r),!t[mi])return}else n&&(t[tl]&&(r.value.now=Date.now()),t[ze].unshiftNode(r));return i.value}},Ro=(t,e)=>{if(!e||!e.maxAge&&!t[lr])return!1;let n=Date.now()-e.now;return e.maxAge?n>e.maxAge:t[lr]&&n>t[lr]},vi=t=>{if(t[Tn]>t[ur])for(let e=t[ze].tail;t[Tn]>t[ur]&&e!==null;){let n=e.prev;Ir(t,e),e=n}},Ir=(t,e)=>{if(e){let n=e.value;t[Dn]&&t[Dn](n.key,n.value),t[Tn]-=n.length,t[Bt].delete(n.key),t[ze].removeNode(e)}},rl=class{constructor(e,n,r,i,o){this.key=e,this.value=n,this.length=r,this.now=i,this.maxAge=o||0}},il=(t,e,n,r)=>{let i=n.value;Ro(t,i)&&(Ir(t,n),t[mi]||(i=void 0)),i&&e.call(r,i.value,i.key,t)};ol.exports=nl});var $t=_((nP,ll)=>{var Fr=class{constructor(e,n){if(n=Vy(n),e instanceof Fr)return e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease?e:new Fr(e.raw,n);if(e instanceof qs)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(r=>this.parseRange(r.trim())).filter(r=>r.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);if(this.set.length>1){let r=this.set[0];if(this.set=this.set.filter(i=>!cl(i[0])),this.set.length===0)this.set=[r];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&Zy(i[0])){this.set=[i];break}}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();let r=`parseRange:${Object.keys(this.options).join(",")}:${e}`,i=al.get(r);if(i)return i;let o=this.options.loose,s=o?nt[Je.HYPHENRANGELOOSE]:nt[Je.HYPHENRANGE];e=e.replace(s,uC(this.options.includePrerelease)),qe("hyphen replace",e),e=e.replace(nt[Je.COMPARATORTRIM],Jy),qe("comparator trim",e,nt[Je.COMPARATORTRIM]),e=e.replace(nt[Je.TILDETRIM],Yy),e=e.replace(nt[Je.CARETTRIM],Qy),e=e.split(/\s+/).join(" ");let c=o?nt[Je.COMPARATORLOOSE]:nt[Je.COMPARATOR],a=e.split(" ").map(C=>eC(C,this.options)).join(" ").split(/\s+/).map(C=>cC(C,this.options)).filter(this.options.loose?C=>!!C.match(c):()=>!0).map(C=>new qs(C,this.options)),p=a.length,h=new Map;for(let C of a){if(cl(C))return[C];h.set(C.value,C)}h.size>1&&h.has("")&&h.delete("");let m=[...h.values()];return al.set(r,m),m}intersects(e,n){if(!(e instanceof Fr))throw new TypeError("a Range is required");return this.set.some(r=>ul(r,n)&&e.set.some(i=>ul(i,n)&&r.every(o=>i.every(s=>o.intersects(s,n)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new Xy(e,this.options)}catch(n){return!1}for(let n=0;n<this.set.length;n++)if(lC(this.set[n],e,this.options))return!0;return!1}};ll.exports=Fr;var Gy=sl(),al=new Gy({max:1e3}),Vy=pi(),qs=yi(),qe=fi(),Xy=tt(),{re:nt,t:Je,comparatorTrimReplace:Jy,tildeTrimReplace:Yy,caretTrimReplace:Qy}=sr(),cl=t=>t.value==="<0.0.0-0",Zy=t=>t.value==="",ul=(t,e)=>{let n=!0,r=t.slice(),i=r.pop();for(;n&&r.length;)n=r.every(o=>i.intersects(o,e)),i=r.pop();return n},eC=(t,e)=>(qe("comp",t,e),t=rC(t,e),qe("caret",t),t=tC(t,e),qe("tildes",t),t=oC(t,e),qe("xrange",t),t=aC(t,e),qe("stars",t),t),pt=t=>!t||t.toLowerCase()==="x"||t==="*",tC=(t,e)=>t.trim().split(/\s+/).map(n=>nC(n,e)).join(" "),nC=(t,e)=>{let n=e.loose?nt[Je.TILDELOOSE]:nt[Je.TILDE];return t.replace(n,(r,i,o,s,c)=>{qe("tilde",t,r,i,o,s,c);let a;return pt(i)?a="":pt(o)?a=`>=${i}.0.0 <${+i+1}.0.0-0`:pt(s)?a=`>=${i}.${o}.0 <${i}.${+o+1}.0-0`:c?(qe("replaceTilde pr",c),a=`>=${i}.${o}.${s}-${c} <${i}.${+o+1}.0-0`):a=`>=${i}.${o}.${s} <${i}.${+o+1}.0-0`,qe("tilde return",a),a})},rC=(t,e)=>t.trim().split(/\s+/).map(n=>iC(n,e)).join(" "),iC=(t,e)=>{qe("caret",t,e);let n=e.loose?nt[Je.CARETLOOSE]:nt[Je.CARET],r=e.includePrerelease?"-0":"";return t.replace(n,(i,o,s,c,a)=>{qe("caret",t,i,o,s,c,a);let p;return pt(o)?p="":pt(s)?p=`>=${o}.0.0${r} <${+o+1}.0.0-0`:pt(c)?o==="0"?p=`>=${o}.${s}.0${r} <${o}.${+s+1}.0-0`:p=`>=${o}.${s}.0${r} <${+o+1}.0.0-0`:a?(qe("replaceCaret pr",a),o==="0"?s==="0"?p=`>=${o}.${s}.${c}-${a} <${o}.${s}.${+c+1}-0`:p=`>=${o}.${s}.${c}-${a} <${o}.${+s+1}.0-0`:p=`>=${o}.${s}.${c}-${a} <${+o+1}.0.0-0`):(qe("no pr"),o==="0"?s==="0"?p=`>=${o}.${s}.${c}${r} <${o}.${s}.${+c+1}-0`:p=`>=${o}.${s}.${c}${r} <${o}.${+s+1}.0-0`:p=`>=${o}.${s}.${c} <${+o+1}.0.0-0`),qe("caret return",p),p})},oC=(t,e)=>(qe("replaceXRanges",t,e),t.split(/\s+/).map(n=>sC(n,e)).join(" ")),sC=(t,e)=>{t=t.trim();let n=e.loose?nt[Je.XRANGELOOSE]:nt[Je.XRANGE];return t.replace(n,(r,i,o,s,c,a)=>{qe("xRange",t,r,i,o,s,c,a);let p=pt(o),h=p||pt(s),m=h||pt(c),C=m;return i==="="&&C&&(i=""),a=e.includePrerelease?"-0":"",p?i===">"||i==="<"?r="<0.0.0-0":r="*":i&&C?(h&&(s=0),c=0,i===">"?(i=">=",h?(o=+o+1,s=0,c=0):(s=+s+1,c=0)):i==="<="&&(i="<",h?o=+o+1:s=+s+1),i==="<"&&(a="-0"),r=`${i+o}.${s}.${c}${a}`):h?r=`>=${o}.0.0${a} <${+o+1}.0.0-0`:m&&(r=`>=${o}.${s}.0${a} <${o}.${+s+1}.0-0`),qe("xRange return",r),r})},aC=(t,e)=>(qe("replaceStars",t,e),t.trim().replace(nt[Je.STAR],"")),cC=(t,e)=>(qe("replaceGTE0",t,e),t.trim().replace(nt[e.includePrerelease?Je.GTE0PRE:Je.GTE0],"")),uC=t=>(e,n,r,i,o,s,c,a,p,h,m,C,v)=>(pt(r)?n="":pt(i)?n=`>=${r}.0.0${t?"-0":""}`:pt(o)?n=`>=${r}.${i}.0${t?"-0":""}`:s?n=`>=${n}`:n=`>=${n}${t?"-0":""}`,pt(p)?a="":pt(h)?a=`<${+p+1}.0.0-0`:pt(m)?a=`<${p}.${+h+1}.0-0`:C?a=`<=${p}.${h}.${m}-${C}`:t?a=`<${p}.${h}.${+m+1}-0`:a=`<=${a}`,`${n} ${a}`.trim()),lC=(t,e,n)=>{for(let r=0;r<t.length;r++)if(!t[r].test(e))return!1;if(e.prerelease.length&&!n.includePrerelease){for(let r=0;r<t.length;r++)if(qe(t[r].semver),t[r].semver!==qs.ANY&&t[r].semver.prerelease.length>0){let i=t[r].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var yi=_((rP,gl)=>{var Ci=Symbol("SemVer ANY"),wi=class{static get ANY(){return Ci}constructor(e,n){if(n=dC(n),e instanceof wi){if(e.loose===!!n.loose)return e;e=e.value}Is("comparator",e,n),this.options=n,this.loose=!!n.loose,this.parse(e),this.semver===Ci?this.value="":this.value=this.operator+this.semver.version,Is("comp",this)}parse(e){let n=this.options.loose?dl[fl.COMPARATORLOOSE]:dl[fl.COMPARATOR],r=e.match(n);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=r[1]!==void 0?r[1]:"",this.operator==="="&&(this.operator=""),r[2]?this.semver=new pl(r[2],this.options.loose):this.semver=Ci}toString(){return this.value}test(e){if(Is("Comparator.test",e,this.options.loose),this.semver===Ci||e===Ci)return!0;if(typeof e=="string")try{e=new pl(e,this.options)}catch(n){return!1}return Os(e,this.operator,this.semver,this.options)}intersects(e,n){if(!(e instanceof wi))throw new TypeError("a Comparator is required");if((!n||typeof n!="object")&&(n={loose:!!n,includePrerelease:!1}),this.operator==="")return this.value===""?!0:new hl(e.value,n).test(this.value);if(e.operator==="")return e.value===""?!0:new hl(this.value,n).test(e.semver);let r=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<"),o=this.semver.version===e.semver.version,s=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<="),c=Os(this.semver,"<",e.semver,n)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),a=Os(this.semver,">",e.semver,n)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return r||i||o&&s||c||a}};gl.exports=wi;var dC=pi(),{re:dl,t:fl}=sr(),Os=Es(),Is=fi(),pl=tt(),hl=$t()});var Ri=_((iP,ml)=>{var fC=$t(),pC=(t,e,n)=>{try{e=new fC(e,n)}catch(r){return!1}return e.test(t)};ml.exports=pC});var yl=_((oP,vl)=>{var hC=$t(),gC=(t,e)=>new hC(t,e).set.map(n=>n.map(r=>r.value).join(" ").trim().split(" "));vl.exports=gC});var wl=_((sP,Cl)=>{var mC=tt(),vC=$t(),yC=(t,e,n)=>{let r=null,i=null,o=null;try{o=new vC(e,n)}catch(s){return null}return t.forEach(s=>{o.test(s)&&(!r||i.compare(s)===-1)&&(r=s,i=new mC(r,n))}),r};Cl.exports=yC});var bl=_((aP,Rl)=>{var CC=tt(),wC=$t(),RC=(t,e,n)=>{let r=null,i=null,o=null;try{o=new wC(e,n)}catch(s){return null}return t.forEach(s=>{o.test(s)&&(!r||i.compare(s)===1)&&(r=s,i=new CC(r,n))}),r};Rl.exports=RC});var Sl=_((cP,Dl)=>{var Fs=tt(),bC=$t(),Tl=gi(),TC=(t,e)=>{t=new bC(t,e);let n=new Fs("0.0.0");if(t.test(n)||(n=new Fs("0.0.0-0"),t.test(n)))return n;n=null;for(let r=0;r<t.set.length;++r){let i=t.set[r],o=null;i.forEach(s=>{let c=new Fs(s.semver.version);switch(s.operator){case">":c.prerelease.length===0?c.patch++:c.prerelease.push(0),c.raw=c.format();case"":case">=":(!o||Tl(c,o))&&(o=c);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${s.operator}`)}}),o&&(!n||Tl(n,o))&&(n=o)}return n&&t.test(n)?n:null};Dl.exports=TC});var Pl=_((uP,_l)=>{var DC=$t(),SC=(t,e)=>{try{return new DC(t,e).range||"*"}catch(n){return null}};_l.exports=SC});var bo=_((lP,ql)=>{var _C=tt(),El=yi(),{ANY:PC}=El,EC=$t(),xC=Ri(),xl=gi(),kl=mo(),kC=yo(),qC=vo(),OC=(t,e,n,r)=>{t=new _C(t,r),e=new EC(e,r);let i,o,s,c,a;switch(n){case">":i=xl,o=kC,s=kl,c=">",a=">=";break;case"<":i=kl,o=qC,s=xl,c="<",a="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(xC(t,e,r))return!1;for(let p=0;p<e.set.length;++p){let h=e.set[p],m=null,C=null;if(h.forEach(v=>{v.semver===PC&&(v=new El(">=0.0.0")),m=m||v,C=C||v,i(v.semver,m.semver,r)?m=v:s(v.semver,C.semver,r)&&(C=v)}),m.operator===c||m.operator===a||(!C.operator||C.operator===c)&&o(t,C.semver))return!1;if(C.operator===a&&s(t,C.semver))return!1}return!0};ql.exports=OC});var Il=_((dP,Ol)=>{var IC=bo(),FC=(t,e,n)=>IC(t,e,">",n);Ol.exports=FC});var Nl=_((fP,Fl)=>{var NC=bo(),AC=(t,e,n)=>NC(t,e,"<",n);Fl.exports=AC});var Ml=_((pP,Ll)=>{var Al=$t(),LC=(t,e,n)=>(t=new Al(t,n),e=new Al(e,n),t.intersects(e));Ll.exports=LC});var jl=_((hP,$l)=>{var MC=Ri(),$C=Mt();$l.exports=(t,e,n)=>{let r=[],i=null,o=null,s=t.sort((h,m)=>$C(h,m,n));for(let h of s)MC(h,e,n)?(o=h,i||(i=h)):(o&&r.push([i,o]),o=null,i=null);i&&r.push([i,null]);let c=[];for(let[h,m]of r)h===m?c.push(h):!m&&h===s[0]?c.push("*"):m?h===s[0]?c.push(`<=${m}`):c.push(`${h} - ${m}`):c.push(`>=${h}`);let a=c.join(" || "),p=typeof e.raw=="string"?e.raw:String(e);return a.length<p.length?a:e}});var Kl=_((gP,Ul)=>{var Hl=$t(),To=yi(),{ANY:Ns}=To,bi=Ri(),As=Mt(),jC=(t,e,n={})=>{if(t===e)return!0;t=new Hl(t,n),e=new Hl(e,n);let r=!1;e:for(let i of t.set){for(let o of e.set){let s=HC(i,o,n);if(r=r||s!==null,s)continue e}if(r)return!1}return!0},HC=(t,e,n)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===Ns){if(e.length===1&&e[0].semver===Ns)return!0;n.includePrerelease?t=[new To(">=0.0.0-0")]:t=[new To(">=0.0.0")]}if(e.length===1&&e[0].semver===Ns){if(n.includePrerelease)return!0;e=[new To(">=0.0.0")]}let r=new Set,i,o;for(let v of t)v.operator===">"||v.operator===">="?i=Wl(i,v,n):v.operator==="<"||v.operator==="<="?o=zl(o,v,n):r.add(v.semver);if(r.size>1)return null;let s;if(i&&o){if(s=As(i.semver,o.semver,n),s>0)return null;if(s===0&&(i.operator!==">="||o.operator!=="<="))return null}for(let v of r){if(i&&!bi(v,String(i),n)||o&&!bi(v,String(o),n))return null;for(let S of e)if(!bi(v,String(S),n))return!1;return!0}let c,a,p,h,m=o&&!n.includePrerelease&&o.semver.prerelease.length?o.semver:!1,C=i&&!n.includePrerelease&&i.semver.prerelease.length?i.semver:!1;m&&m.prerelease.length===1&&o.operator==="<"&&m.prerelease[0]===0&&(m=!1);for(let v of e){if(h=h||v.operator===">"||v.operator===">=",p=p||v.operator==="<"||v.operator==="<=",i){if(C&&v.semver.prerelease&&v.semver.prerelease.length&&v.semver.major===C.major&&v.semver.minor===C.minor&&v.semver.patch===C.patch&&(C=!1),v.operator===">"||v.operator===">="){if(c=Wl(i,v,n),c===v&&c!==i)return!1}else if(i.operator===">="&&!bi(i.semver,String(v),n))return!1}if(o){if(m&&v.semver.prerelease&&v.semver.prerelease.length&&v.semver.major===m.major&&v.semver.minor===m.minor&&v.semver.patch===m.patch&&(m=!1),v.operator==="<"||v.operator==="<="){if(a=zl(o,v,n),a===v&&a!==o)return!1}else if(o.operator==="<="&&!bi(o.semver,String(v),n))return!1}if(!v.operator&&(o||i)&&s!==0)return!1}return!(i&&p&&!o&&s!==0||o&&h&&!i&&s!==0||C||m)},Wl=(t,e,n)=>{if(!t)return e;let r=As(t.semver,e.semver,n);return r>0?t:r<0||e.operator===">"&&t.operator===">="?e:t},zl=(t,e,n)=>{if(!t)return e;let r=As(t.semver,e.semver,n);return r<0?t:r>0||e.operator==="<"&&t.operator==="<="?e:t};Ul.exports=jC});var Gl=_((mP,Bl)=>{var Ls=sr();Bl.exports={re:Ls.re,src:Ls.src,tokens:Ls.t,SEMVER_SPEC_VERSION:di().SEMVER_SPEC_VERSION,SemVer:tt(),compareIdentifiers:lo().compareIdentifiers,rcompareIdentifiers:lo().rcompareIdentifiers,parse:ar(),valid:pu(),clean:gu(),inc:vu(),diff:Tu(),major:Su(),minor:Pu(),patch:xu(),prerelease:qu(),compare:Mt(),rcompare:Iu(),compareLoose:Nu(),compareBuild:go(),sort:$u(),rsort:Hu(),gt:gi(),lt:mo(),eq:ho(),neq:Ps(),gte:vo(),lte:yo(),cmp:Es(),coerce:Xu(),Comparator:yi(),Range:$t(),satisfies:Ri(),toComparators:yl(),maxSatisfying:wl(),minSatisfying:bl(),minVersion:Sl(),validRange:Pl(),outside:bo(),gtr:Il(),ltr:Nl(),intersects:Ml(),simplifyRange:jl(),subset:Kl()}});var Sn=_(Pe=>{"use strict";Object.defineProperty(Pe,"__esModule",{value:!0});Pe.asPromise=Pe.thenable=Pe.typedArray=Pe.stringArray=Pe.array=Pe.func=Pe.error=Pe.number=Pe.string=Pe.boolean=void 0;function WC(t){return t===!0||t===!1}Pe.boolean=WC;function Vl(t){return typeof t=="string"||t instanceof String}Pe.string=Vl;function zC(t){return typeof t=="number"||t instanceof Number}Pe.number=zC;function UC(t){return t instanceof Error}Pe.error=UC;function Xl(t){return typeof t=="function"}Pe.func=Xl;function Jl(t){return Array.isArray(t)}Pe.array=Jl;function KC(t){return Jl(t)&&t.every(e=>Vl(e))}Pe.stringArray=KC;function BC(t,e){return Array.isArray(t)&&t.every(e)}Pe.typedArray=BC;function Yl(t){return t&&Xl(t.then)}Pe.thenable=Yl;function GC(t){return t instanceof Promise?t:Yl(t)?new Promise((e,n)=>{t.then(r=>e(r),r=>n(r))}):Promise.resolve(t)}Pe.asPromise=GC});var _n=_(js=>{"use strict";Object.defineProperty(js,"__esModule",{value:!0});var Ms;function $s(){if(Ms===void 0)throw new Error("No runtime abstraction layer installed");return Ms}(function(t){function e(n){if(n===void 0)throw new Error("No runtime abstraction layer provided");Ms=n}t.install=e})($s||($s={}));js.default=$s});var Hs=_(Ti=>{"use strict";Object.defineProperty(Ti,"__esModule",{value:!0});Ti.Disposable=void 0;var VC;(function(t){function e(n){return{dispose:n}}t.create=e})(VC=Ti.Disposable||(Ti.Disposable={}))});var Zl=_(Do=>{"use strict";Object.defineProperty(Do,"__esModule",{value:!0});Do.AbstractMessageBuffer=void 0;var XC=13,JC=10,YC=`\r
`,Ql=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let n=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(n),this._totalLength+=n.byteLength}tryReadHeaders(){if(this._chunks.length===0)return;let e=0,n=0,r=0,i=0;e:for(;n<this._chunks.length;){let a=this._chunks[n];r=0;t:for(;r<a.length;){switch(a[r]){case XC:switch(e){case 0:e=1;break;case 2:e=3;break;default:e=0}break;case JC:switch(e){case 1:e=2;break;case 3:e=4,r++;break e;default:e=0}break;default:e=0}r++}i+=a.byteLength,n++}if(e!==4)return;let o=this._read(i+r),s=new Map,c=this.toString(o,"ascii").split(YC);if(c.length<2)return s;for(let a=0;a<c.length-2;a++){let p=c[a],h=p.indexOf(":");if(h===-1)throw new Error("Message header must separate key and value using :");let m=p.substr(0,h),C=p.substr(h+1).trim();s.set(m,C)}return s}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let o=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(o)}if(this._chunks[0].byteLength>e){let o=this._chunks[0],s=this.asNative(o,e);return this._chunks[0]=o.slice(e),this._totalLength-=e,s}let n=this.allocNative(e),r=0,i=0;for(;e>0;){let o=this._chunks[i];if(o.byteLength>e){let s=o.slice(0,e);n.set(s,r),r+=e,this._chunks[i]=o.slice(e),this._totalLength-=e,e-=e}else n.set(o,r),r+=o.byteLength,this._chunks.shift(),this._totalLength-=o.byteLength,e-=o.byteLength}return n}};Do.AbstractMessageBuffer=Ql});var id=_(zs=>{"use strict";Object.defineProperty(zs,"__esModule",{value:!0});var QC=_n(),ed=require("util"),dr=Hs(),ZC=Zl(),Di=class extends ZC.AbstractMessageBuffer{constructor(e="utf-8"){super(e)}emptyBuffer(){return Di.emptyBuffer}fromString(e,n){return Buffer.from(e,n)}toString(e,n){return e instanceof Buffer?e.toString(n):new ed.TextDecoder(n).decode(e)}asNative(e,n){return n===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,n):Buffer.from(e,0,n)}allocNative(e){return Buffer.allocUnsafe(e)}};Di.emptyBuffer=Buffer.allocUnsafe(0);var td=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),dr.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),dr.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),dr.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),dr.Disposable.create(()=>this.stream.off("data",e))}},nd=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),dr.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),dr.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),dr.Disposable.create(()=>this.stream.off("end",e))}write(e,n){return new Promise((r,i)=>{let o=s=>{s==null?r():i(s)};typeof e=="string"?this.stream.write(e,n,o):this.stream.write(e,o)})}end(){this.stream.end()}},rd=Object.freeze({messageBuffer:Object.freeze({create:t=>new Di(t)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(t,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(t,void 0,0),e.charset))}catch(n){return Promise.reject(n)}}}),decoder:Object.freeze({name:"application/json",decode:(t,e)=>{try{return t instanceof Buffer?Promise.resolve(JSON.parse(t.toString(e.charset))):Promise.resolve(JSON.parse(new ed.TextDecoder(e.charset).decode(t)))}catch(n){return Promise.reject(n)}}})}),stream:Object.freeze({asReadableStream:t=>new td(t),asWritableStream:t=>new nd(t)}),console,timer:Object.freeze({setTimeout(t,e,...n){let r=setTimeout(t,e,...n);return{dispose:()=>clearTimeout(r)}},setImmediate(t,...e){let n=setImmediate(t,...e);return{dispose:()=>clearImmediate(n)}},setInterval(t,e,...n){let r=setInterval(t,e,...n);return{dispose:()=>clearInterval(r)}}})});function Ws(){return rd}(function(t){function e(){QC.default.install(rd)}t.install=e})(Ws||(Ws={}));zs.default=Ws});var Nr=_(rt=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0});rt.stringArray=rt.array=rt.func=rt.error=rt.number=rt.string=rt.boolean=void 0;function ew(t){return t===!0||t===!1}rt.boolean=ew;function od(t){return typeof t=="string"||t instanceof String}rt.string=od;function tw(t){return typeof t=="number"||t instanceof Number}rt.number=tw;function nw(t){return t instanceof Error}rt.error=nw;function rw(t){return typeof t=="function"}rt.func=rw;function sd(t){return Array.isArray(t)}rt.array=sd;function iw(t){return sd(t)&&t.every(e=>od(e))}rt.stringArray=iw});var Us=_(U=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0});U.isResponseMessage=U.isNotificationMessage=U.isRequestMessage=U.NotificationType9=U.NotificationType8=U.NotificationType7=U.NotificationType6=U.NotificationType5=U.NotificationType4=U.NotificationType3=U.NotificationType2=U.NotificationType1=U.NotificationType0=U.NotificationType=U.RequestType9=U.RequestType8=U.RequestType7=U.RequestType6=U.RequestType5=U.RequestType4=U.RequestType3=U.RequestType2=U.RequestType1=U.RequestType=U.RequestType0=U.AbstractMessageSignature=U.ParameterStructures=U.ResponseError=U.ErrorCodes=void 0;var fr=Nr(),ad;(function(t){t.ParseError=-32700,t.InvalidRequest=-32600,t.MethodNotFound=-32601,t.InvalidParams=-32602,t.InternalError=-32603,t.jsonrpcReservedErrorRangeStart=-32099,t.serverErrorStart=t.jsonrpcReservedErrorRangeStart,t.MessageWriteError=-32099,t.MessageReadError=-32098,t.ServerNotInitialized=-32002,t.UnknownErrorCode=-32001,t.jsonrpcReservedErrorRangeEnd=-32e3,t.serverErrorEnd=t.jsonrpcReservedErrorRangeEnd})(ad=U.ErrorCodes||(U.ErrorCodes={}));var So=class extends Error{constructor(e,n,r){super(n);this.code=fr.number(e)?e:ad.UnknownErrorCode,this.data=r,Object.setPrototypeOf(this,So.prototype)}toJson(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}};U.ResponseError=So;var Ye=class{constructor(e){this.kind=e}static is(e){return e===Ye.auto||e===Ye.byName||e===Ye.byPosition}toString(){return this.kind}};U.ParameterStructures=Ye;Ye.auto=new Ye("auto");Ye.byPosition=new Ye("byPosition");Ye.byName=new Ye("byName");var Ce=class{constructor(e,n){this.method=e,this.numberOfParams=n}get parameterStructures(){return Ye.auto}};U.AbstractMessageSignature=Ce;var cd=class extends Ce{constructor(e){super(e,0)}};U.RequestType0=cd;var ud=class extends Ce{constructor(e,n=Ye.auto){super(e,1);this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};U.RequestType=ud;var ld=class extends Ce{constructor(e,n=Ye.auto){super(e,1);this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};U.RequestType1=ld;var dd=class extends Ce{constructor(e){super(e,2)}};U.RequestType2=dd;var fd=class extends Ce{constructor(e){super(e,3)}};U.RequestType3=fd;var pd=class extends Ce{constructor(e){super(e,4)}};U.RequestType4=pd;var hd=class extends Ce{constructor(e){super(e,5)}};U.RequestType5=hd;var gd=class extends Ce{constructor(e){super(e,6)}};U.RequestType6=gd;var md=class extends Ce{constructor(e){super(e,7)}};U.RequestType7=md;var vd=class extends Ce{constructor(e){super(e,8)}};U.RequestType8=vd;var yd=class extends Ce{constructor(e){super(e,9)}};U.RequestType9=yd;var Cd=class extends Ce{constructor(e,n=Ye.auto){super(e,1);this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};U.NotificationType=Cd;var wd=class extends Ce{constructor(e){super(e,0)}};U.NotificationType0=wd;var Rd=class extends Ce{constructor(e,n=Ye.auto){super(e,1);this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};U.NotificationType1=Rd;var bd=class extends Ce{constructor(e){super(e,2)}};U.NotificationType2=bd;var Td=class extends Ce{constructor(e){super(e,3)}};U.NotificationType3=Td;var Dd=class extends Ce{constructor(e){super(e,4)}};U.NotificationType4=Dd;var Sd=class extends Ce{constructor(e){super(e,5)}};U.NotificationType5=Sd;var _d=class extends Ce{constructor(e){super(e,6)}};U.NotificationType6=_d;var Pd=class extends Ce{constructor(e){super(e,7)}};U.NotificationType7=Pd;var Ed=class extends Ce{constructor(e){super(e,8)}};U.NotificationType8=Ed;var xd=class extends Ce{constructor(e){super(e,9)}};U.NotificationType9=xd;function ow(t){let e=t;return e&&fr.string(e.method)&&(fr.string(e.id)||fr.number(e.id))}U.isRequestMessage=ow;function sw(t){let e=t;return e&&fr.string(e.method)&&t.id===void 0}U.isNotificationMessage=sw;function aw(t){let e=t;return e&&(e.result!==void 0||!!e.error)&&(fr.string(e.id)||fr.number(e.id)||e.id===null)}U.isResponseMessage=aw});var Bs=_(Pn=>{"use strict";var kd;Object.defineProperty(Pn,"__esModule",{value:!0});Pn.LRUCache=Pn.LinkedMap=Pn.Touch=void 0;var ht;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(ht=Pn.Touch||(Pn.Touch={}));var Ks=class{constructor(){this[kd]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)===null||e===void 0?void 0:e.value}get last(){var e;return(e=this._tail)===null||e===void 0?void 0:e.value}has(e){return this._map.has(e)}get(e,n=ht.None){let r=this._map.get(e);if(!!r)return n!==ht.None&&this.touch(r,n),r.value}set(e,n,r=ht.None){let i=this._map.get(e);if(i)i.value=n,r!==ht.None&&this.touch(i,r);else{switch(i={key:e,value:n,next:void 0,previous:void 0},r){case ht.None:this.addItemLast(i);break;case ht.First:this.addItemFirst(i);break;case ht.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let n=this._map.get(e);if(!!n)return this._map.delete(e),this.removeItem(n),this._size--,n.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,n){let r=this._state,i=this._head;for(;i;){if(n?e.bind(n)(i.value,i.key,this):e(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:n.key,done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}values(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:n.value,done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}entries(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:[n.key,n.value],done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}[(kd=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let n=this._head,r=this.size;for(;n&&r>e;)this._map.delete(n.key),n=n.next,r--;this._head=n,this._size=r,n&&(n.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let n=e.next,r=e.previous;if(!n||!r)throw new Error("Invalid list");n.previous=r,r.next=n}e.next=void 0,e.previous=void 0,this._state++}touch(e,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(n!==ht.First&&n!==ht.Last)){if(n===ht.First){if(e===this._head)return;let r=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(n===ht.Last){if(e===this._tail)return;let r=e.next,i=e.previous;e===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((n,r)=>{e.push([r,n])}),e}fromJSON(e){this.clear();for(let[n,r]of e)this.set(n,r)}};Pn.LinkedMap=Ks;var qd=class extends Ks{constructor(e,n=1){super();this._limit=e,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,n=ht.AsNew){return super.get(e,n)}peek(e){return super.get(e,ht.None)}set(e,n){return super.set(e,n,ht.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};Pn.LRUCache=qd});var Ar=_(pr=>{"use strict";Object.defineProperty(pr,"__esModule",{value:!0});pr.Emitter=pr.Event=void 0;var cw=_n(),uw;(function(t){let e={dispose(){}};t.None=function(){return e}})(uw=pr.Event||(pr.Event={}));var Od=class{add(e,n=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(n),Array.isArray(r)&&r.push({dispose:()=>this.remove(e,n)})}remove(e,n=null){if(!this._callbacks)return;let r=!1;for(let i=0,o=this._callbacks.length;i<o;i++)if(this._callbacks[i]===e)if(this._contexts[i]===n){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else r=!0;if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let n=[],r=this._callbacks.slice(0),i=this._contexts.slice(0);for(let o=0,s=r.length;o<s;o++)try{n.push(r[o].apply(i[o],e))}catch(c){cw.default().console.error(c)}return n}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},Si=class{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,n,r)=>{this._callbacks||(this._callbacks=new Od),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,n);let i={dispose:()=>{!this._callbacks||(this._callbacks.remove(e,n),i.dispose=Si._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(r)&&r.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};pr.Emitter=Si;Si._noop=function(){}});var Js=_(hr=>{"use strict";Object.defineProperty(hr,"__esModule",{value:!0});hr.CancellationTokenSource=hr.CancellationToken=void 0;var lw=_n(),dw=Nr(),Gs=Ar(),Vs;(function(t){t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Gs.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Gs.Event.None});function e(n){let r=n;return r&&(r===t.None||r===t.Cancelled||dw.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}t.is=e})(Vs=hr.CancellationToken||(hr.CancellationToken={}));var fw=Object.freeze(function(t,e){let n=lw.default().timer.setTimeout(t.bind(e),0);return{dispose(){n.dispose()}}}),Xs=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?fw:(this._emitter||(this._emitter=new Gs.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},Id=class{get token(){return this._token||(this._token=new Xs),this._token}cancel(){this._token?this._token.cancel():this._token=Vs.Cancelled}dispose(){this._token?this._token instanceof Xs&&this._token.dispose():this._token=Vs.None}};hr.CancellationTokenSource=Id});var Nd=_(En=>{"use strict";Object.defineProperty(En,"__esModule",{value:!0});En.ReadableStreamMessageReader=En.AbstractMessageReader=En.MessageReader=void 0;var Ys=_n(),Lr=Nr(),Qs=Ar(),pw;(function(t){function e(n){let r=n;return r&&Lr.func(r.listen)&&Lr.func(r.dispose)&&Lr.func(r.onError)&&Lr.func(r.onClose)&&Lr.func(r.onPartialMessage)}t.is=e})(pw=En.MessageReader||(En.MessageReader={}));var Zs=class{constructor(){this.errorEmitter=new Qs.Emitter,this.closeEmitter=new Qs.Emitter,this.partialMessageEmitter=new Qs.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${Lr.string(e.message)?e.message:"unknown"}`)}};En.AbstractMessageReader=Zs;var ea;(function(t){function e(n){var r;let i,o,s,c=new Map,a,p=new Map;if(n===void 0||typeof n=="string")i=n!=null?n:"utf-8";else{if(i=(r=n.charset)!==null&&r!==void 0?r:"utf-8",n.contentDecoder!==void 0&&(s=n.contentDecoder,c.set(s.name,s)),n.contentDecoders!==void 0)for(let h of n.contentDecoders)c.set(h.name,h);if(n.contentTypeDecoder!==void 0&&(a=n.contentTypeDecoder,p.set(a.name,a)),n.contentTypeDecoders!==void 0)for(let h of n.contentTypeDecoders)p.set(h.name,h)}return a===void 0&&(a=Ys.default().applicationJson.decoder,p.set(a.name,a)),{charset:i,contentDecoder:s,contentDecoders:c,contentTypeDecoder:a,contentTypeDecoders:p}}t.fromOptions=e})(ea||(ea={}));var Fd=class extends Zs{constructor(e,n){super();this.readable=e,this.options=ea.fromOptions(n),this.buffer=Ys.default().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let n=this.readable.onData(r=>{this.onData(r)});return this.readable.onError(r=>this.fireError(r)),this.readable.onClose(()=>this.fireClose()),n}onData(e){for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let i=this.buffer.tryReadHeaders();if(!i)return;let o=i.get("Content-Length");if(!o)throw new Error("Header must provide a Content-Length property.");let s=parseInt(o);if(isNaN(s))throw new Error("Content-Length value must be a number.");this.nextMessageLength=s}let n=this.buffer.tryReadBody(this.nextMessageLength);if(n===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1;let r;this.options.contentDecoder!==void 0?r=this.options.contentDecoder.decode(n):r=Promise.resolve(n),r.then(i=>{this.options.contentTypeDecoder.decode(i,this.options).then(o=>{this.callback(o)},o=>{this.fireError(o)})},i=>{this.fireError(i)})}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=Ys.default().timer.setTimeout((e,n)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:n}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};En.ReadableStreamMessageReader=Fd});var Ld=_(_o=>{"use strict";Object.defineProperty(_o,"__esModule",{value:!0});_o.Semaphore=void 0;var hw=_n(),Ad=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((n,r)=>{this._waiting.push({thunk:e,resolve:n,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||hw.default().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let n=e.thunk();n instanceof Promise?n.then(r=>{this._active--,e.resolve(r),this.runNext()},r=>{this._active--,e.reject(r),this.runNext()}):(this._active--,e.resolve(n),this.runNext())}catch(n){this._active--,e.reject(n),this.runNext()}}};_o.Semaphore=Ad});var Wd=_(xn=>{"use strict";Object.defineProperty(xn,"__esModule",{value:!0});xn.WriteableStreamMessageWriter=xn.AbstractMessageWriter=xn.MessageWriter=void 0;var Md=_n(),_i=Nr(),gw=Ld(),$d=Ar(),mw="Content-Length: ",jd=`\r
`,vw;(function(t){function e(n){let r=n;return r&&_i.func(r.dispose)&&_i.func(r.onClose)&&_i.func(r.onError)&&_i.func(r.write)}t.is=e})(vw=xn.MessageWriter||(xn.MessageWriter={}));var ta=class{constructor(){this.errorEmitter=new $d.Emitter,this.closeEmitter=new $d.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,n,r){this.errorEmitter.fire([this.asError(e),n,r])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${_i.string(e.message)?e.message:"unknown"}`)}};xn.AbstractMessageWriter=ta;var na;(function(t){function e(n){var r,i;return n===void 0||typeof n=="string"?{charset:n!=null?n:"utf-8",contentTypeEncoder:Md.default().applicationJson.encoder}:{charset:(r=n.charset)!==null&&r!==void 0?r:"utf-8",contentEncoder:n.contentEncoder,contentTypeEncoder:(i=n.contentTypeEncoder)!==null&&i!==void 0?i:Md.default().applicationJson.encoder}}t.fromOptions=e})(na||(na={}));var Hd=class extends ta{constructor(e,n){super();this.writable=e,this.options=na.fromOptions(n),this.errorCount=0,this.writeSemaphore=new gw.Semaphore(1),this.writable.onError(r=>this.fireError(r)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(r=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(r):r).then(r=>{let i=[];return i.push(mw,r.byteLength.toString(),jd),i.push(jd),this.doWrite(e,i,r)},r=>{throw this.fireError(r),r}))}async doWrite(e,n,r){try{return await this.writable.write(n.join(""),"ascii"),this.writable.write(r)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){this.writable.end()}};xn.WriteableStreamMessageWriter=Hd});var Vd=_(Z=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});Z.createMessageConnection=Z.ConnectionOptions=Z.CancellationStrategy=Z.CancellationSenderStrategy=Z.CancellationReceiverStrategy=Z.ConnectionStrategy=Z.ConnectionError=Z.ConnectionErrors=Z.LogTraceNotification=Z.SetTraceNotification=Z.TraceFormat=Z.Trace=Z.NullLogger=Z.ProgressType=void 0;var zd=_n(),je=Nr(),Q=Us(),Ud=Bs(),Pi=Ar(),ra=Js(),Ei;(function(t){t.type=new Q.NotificationType("$/cancelRequest")})(Ei||(Ei={}));var Po;(function(t){t.type=new Q.NotificationType("$/progress")})(Po||(Po={}));var Kd=class{constructor(){}};Z.ProgressType=Kd;var ia;(function(t){function e(n){return je.func(n)}t.is=e})(ia||(ia={}));Z.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var Ne;(function(t){t[t.Off=0]="Off",t[t.Messages=1]="Messages",t[t.Verbose=2]="Verbose"})(Ne=Z.Trace||(Z.Trace={}));(function(t){function e(r){if(!je.string(r))return t.Off;switch(r=r.toLowerCase(),r){case"off":return t.Off;case"messages":return t.Messages;case"verbose":return t.Verbose;default:return t.Off}}t.fromString=e;function n(r){switch(r){case t.Off:return"off";case t.Messages:return"messages";case t.Verbose:return"verbose";default:return"off"}}t.toString=n})(Ne=Z.Trace||(Z.Trace={}));var Gt;(function(t){t.Text="text",t.JSON="json"})(Gt=Z.TraceFormat||(Z.TraceFormat={}));(function(t){function e(n){return je.string(n)?(n=n.toLowerCase(),n==="json"?t.JSON:t.Text):t.Text}t.fromString=e})(Gt=Z.TraceFormat||(Z.TraceFormat={}));var Bd;(function(t){t.type=new Q.NotificationType("$/setTrace")})(Bd=Z.SetTraceNotification||(Z.SetTraceNotification={}));var oa;(function(t){t.type=new Q.NotificationType("$/logTrace")})(oa=Z.LogTraceNotification||(Z.LogTraceNotification={}));var Eo;(function(t){t[t.Closed=1]="Closed",t[t.Disposed=2]="Disposed",t[t.AlreadyListening=3]="AlreadyListening"})(Eo=Z.ConnectionErrors||(Z.ConnectionErrors={}));var gr=class extends Error{constructor(e,n){super(n);this.code=e,Object.setPrototypeOf(this,gr.prototype)}};Z.ConnectionError=gr;var Gd;(function(t){function e(n){let r=n;return r&&je.func(r.cancelUndispatched)}t.is=e})(Gd=Z.ConnectionStrategy||(Z.ConnectionStrategy={}));var sa;(function(t){t.Message=Object.freeze({createCancellationTokenSource(n){return new ra.CancellationTokenSource}});function e(n){let r=n;return r&&je.func(r.createCancellationTokenSource)}t.is=e})(sa=Z.CancellationReceiverStrategy||(Z.CancellationReceiverStrategy={}));var aa;(function(t){t.Message=Object.freeze({sendCancellation(n,r){return n.sendNotification(Ei.type,{id:r})},cleanup(n){}});function e(n){let r=n;return r&&je.func(r.sendCancellation)&&je.func(r.cleanup)}t.is=e})(aa=Z.CancellationSenderStrategy||(Z.CancellationSenderStrategy={}));var ca;(function(t){t.Message=Object.freeze({receiver:sa.Message,sender:aa.Message});function e(n){let r=n;return r&&sa.is(r.receiver)&&aa.is(r.sender)}t.is=e})(ca=Z.CancellationStrategy||(Z.CancellationStrategy={}));var yw;(function(t){function e(n){let r=n;return r&&(ca.is(r.cancellationStrategy)||Gd.is(r.connectionStrategy))}t.is=e})(yw=Z.ConnectionOptions||(Z.ConnectionOptions={}));var Vt;(function(t){t[t.New=1]="New",t[t.Listening=2]="Listening",t[t.Closed=3]="Closed",t[t.Disposed=4]="Disposed"})(Vt||(Vt={}));function Cw(t,e,n,r){let i=n!==void 0?n:Z.NullLogger,o=0,s=0,c=0,a="2.0",p,h=Object.create(null),m,C=Object.create(null),v=new Map,S,k=new Ud.LinkedMap,N=Object.create(null),F=new Set,L=Object.create(null),E=Ne.Off,M=Gt.Text,q,B=Vt.New,X=new Pi.Emitter,Me=new Pi.Emitter,xe=new Pi.Emitter,Xe=new Pi.Emitter,ct=new Pi.Emitter,$e=r&&r.cancellationStrategy?r.cancellationStrategy:ca.Message;function ut(T){if(T===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+T.toString()}function yt(T){return T===null?"res-unknown-"+(++c).toString():"res-"+T.toString()}function lt(){return"not-"+(++s).toString()}function Kt(T,O){Q.isRequestMessage(O)?T.set(ut(O.id),O):Q.isResponseMessage(O)?T.set(yt(O.id),O):T.set(lt(),O)}function De(T){}function dt(){return B===Vt.Listening}function ft(){return B===Vt.Closed}function et(){return B===Vt.Disposed}function Tt(){(B===Vt.New||B===Vt.Listening)&&(B=Vt.Closed,Me.fire(void 0))}function qt(T){X.fire([T,void 0,void 0])}function tr(T){X.fire(T)}t.onClose(Tt),t.onError(qt),e.onClose(Tt),e.onError(tr);function $n(){S||k.size===0||(S=zd.default().timer.setImmediate(()=>{S=void 0,vn()}))}function vn(){if(k.size===0)return;let T=k.shift();try{Q.isRequestMessage(T)?nr(T):Q.isNotificationMessage(T)?sn(T):Q.isResponseMessage(T)?on(T):yn(T)}finally{$n()}}let rn=T=>{try{if(Q.isNotificationMessage(T)&&T.method===Ei.type.method){let O=T.params.id,$=ut(O),G=k.get($);if(Q.isRequestMessage(G)){let w=r==null?void 0:r.connectionStrategy,b=w&&w.cancelUndispatched?w.cancelUndispatched(G,De):De(G);if(b&&(b.error!==void 0||b.result!==void 0)){k.delete($),b.id=G.id,Ot(b,T.method,Date.now()),e.write(b).catch(()=>i.error("Sending response for canceled message failed."));return}}let l=String(O),u=L[l];if(u!==void 0){u.cancel(),Dt(T);return}else F.add(O)}Kt(k,T)}finally{$n()}};function nr(T){if(et())return;function O(g,f,D){let P={jsonrpc:a,id:T.id};g instanceof Q.ResponseError?P.error=g.toJson():P.result=g===void 0?null:g,Ot(P,f,D),e.write(P).catch(()=>i.error("Sending response failed."))}function $(g,f,D){let P={jsonrpc:a,id:T.id,error:g.toJson()};Ot(P,f,D),e.write(P).catch(()=>i.error("Sending response failed."))}function G(g,f,D){g===void 0&&(g=null);let P={jsonrpc:a,id:T.id,result:g};Ot(P,f,D),e.write(P).catch(()=>i.error("Sending response failed."))}Cn(T);let l=h[T.method],u,w;l&&(u=l.type,w=l.handler);let b=Date.now();if(w||p){let g=String(T.id),f=$e.receiver.createCancellationTokenSource(g);T.id!==null&&F.has(T.id)&&f.cancel(),L[g]=f;try{let D;if(w)if(T.params===void 0){if(u!==void 0&&u.numberOfParams!==0){$(new Q.ResponseError(Q.ErrorCodes.InvalidParams,`Request ${T.method} defines ${u.numberOfParams} params but received none.`),T.method,b);return}D=w(f.token)}else if(Array.isArray(T.params)){if(u!==void 0&&u.parameterStructures===Q.ParameterStructures.byName){$(new Q.ResponseError(Q.ErrorCodes.InvalidParams,`Request ${T.method} defines parameters by name but received parameters by position`),T.method,b);return}D=w(...T.params,f.token)}else{if(u!==void 0&&u.parameterStructures===Q.ParameterStructures.byPosition){$(new Q.ResponseError(Q.ErrorCodes.InvalidParams,`Request ${T.method} defines parameters by position but received parameters by name`),T.method,b);return}D=w(T.params,f.token)}else p&&(D=p(T.method,T.params,f.token));let P=D;D?P.then?P.then(z=>{delete L[g],O(z,T.method,b)},z=>{delete L[g],z instanceof Q.ResponseError?$(z,T.method,b):z&&je.string(z.message)?$(new Q.ResponseError(Q.ErrorCodes.InternalError,`Request ${T.method} failed with message: ${z.message}`),T.method,b):$(new Q.ResponseError(Q.ErrorCodes.InternalError,`Request ${T.method} failed unexpectedly without providing any details.`),T.method,b)}):(delete L[g],O(D,T.method,b)):(delete L[g],G(D,T.method,b))}catch(D){delete L[g],D instanceof Q.ResponseError?O(D,T.method,b):D&&je.string(D.message)?$(new Q.ResponseError(Q.ErrorCodes.InternalError,`Request ${T.method} failed with message: ${D.message}`),T.method,b):$(new Q.ResponseError(Q.ErrorCodes.InternalError,`Request ${T.method} failed unexpectedly without providing any details.`),T.method,b)}}else $(new Q.ResponseError(Q.ErrorCodes.MethodNotFound,`Unhandled method ${T.method}`),T.method,b)}function on(T){if(!et())if(T.id===null)T.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(T.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let O=String(T.id),$=N[O];if(Hn(T,$),$){delete N[O];try{if(T.error){let G=T.error;$.reject(new Q.ResponseError(G.code,G.message,G.data))}else if(T.result!==void 0)$.resolve(T.result);else throw new Error("Should never happen.")}catch(G){G.message?i.error(`Response handler '${$.method}' failed with message: ${G.message}`):i.error(`Response handler '${$.method}' failed unexpectedly.`)}}}}function sn(T){if(et())return;let O,$;if(T.method===Ei.type.method){let G=T.params.id;F.delete(G),Dt(T);return}else{let G=C[T.method];G&&($=G.handler,O=G.type)}if($||m)try{Dt(T),$?T.params===void 0?(O!==void 0&&O.numberOfParams!==0&&O.parameterStructures!==Q.ParameterStructures.byName&&i.error(`Notification ${T.method} defines ${O.numberOfParams} params but received none.`),$()):Array.isArray(T.params)?(O!==void 0&&(O.parameterStructures===Q.ParameterStructures.byName&&i.error(`Notification ${T.method} defines parameters by name but received parameters by position`),O.numberOfParams!==T.params.length&&i.error(`Notification ${T.method} defines ${O.numberOfParams} params but received ${T.params.length} arguments`)),$(...T.params)):(O!==void 0&&O.parameterStructures===Q.ParameterStructures.byPosition&&i.error(`Notification ${T.method} defines parameters by position but received parameters by name`),$(T.params)):m&&m(T.method,T.params)}catch(G){G.message?i.error(`Notification handler '${T.method}' failed with message: ${G.message}`):i.error(`Notification handler '${T.method}' failed unexpectedly.`)}else xe.fire(T)}function yn(T){if(!T){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(T,null,4)}`);let O=T;if(je.string(O.id)||je.number(O.id)){let $=String(O.id),G=N[$];G&&G.reject(new Error("The received response has neither a result nor an error property."))}}function jn(T){if(!(E===Ne.Off||!q))if(M===Gt.Text){let O;E===Ne.Verbose&&T.params&&(O=`Params: ${JSON.stringify(T.params,null,4)}

`),q.log(`Sending request '${T.method} - (${T.id})'.`,O)}else ke("send-request",T)}function rr(T){if(!(E===Ne.Off||!q))if(M===Gt.Text){let O;E===Ne.Verbose&&(T.params?O=`Params: ${JSON.stringify(T.params,null,4)}

`:O=`No parameters provided.

`),q.log(`Sending notification '${T.method}'.`,O)}else ke("send-notification",T)}function Ot(T,O,$){if(!(E===Ne.Off||!q))if(M===Gt.Text){let G;E===Ne.Verbose&&(T.error&&T.error.data?G=`Error data: ${JSON.stringify(T.error.data,null,4)}

`:T.result?G=`Result: ${JSON.stringify(T.result,null,4)}

`:T.error===void 0&&(G=`No result returned.

`)),q.log(`Sending response '${O} - (${T.id})'. Processing request took ${Date.now()-$}ms`,G)}else ke("send-response",T)}function Cn(T){if(!(E===Ne.Off||!q))if(M===Gt.Text){let O;E===Ne.Verbose&&T.params&&(O=`Params: ${JSON.stringify(T.params,null,4)}

`),q.log(`Received request '${T.method} - (${T.id})'.`,O)}else ke("receive-request",T)}function Dt(T){if(!(E===Ne.Off||!q||T.method===oa.type.method))if(M===Gt.Text){let O;E===Ne.Verbose&&(T.params?O=`Params: ${JSON.stringify(T.params,null,4)}

`:O=`No parameters provided.

`),q.log(`Received notification '${T.method}'.`,O)}else ke("receive-notification",T)}function Hn(T,O){if(!(E===Ne.Off||!q))if(M===Gt.Text){let $;if(E===Ne.Verbose&&(T.error&&T.error.data?$=`Error data: ${JSON.stringify(T.error.data,null,4)}

`:T.result?$=`Result: ${JSON.stringify(T.result,null,4)}

`:T.error===void 0&&($=`No result returned.

`)),O){let G=T.error?` Request failed: ${T.error.message} (${T.error.code}).`:"";q.log(`Received response '${O.method} - (${T.id})' in ${Date.now()-O.timerStart}ms.${G}`,$)}else q.log(`Received response ${T.id} without active response promise.`,$)}else ke("receive-response",T)}function ke(T,O){if(!q||E===Ne.Off)return;let $={isLSPMessage:!0,type:T,message:O,timestamp:Date.now()};q.log($)}function Ct(){if(ft())throw new gr(Eo.Closed,"Connection is closed.");if(et())throw new gr(Eo.Disposed,"Connection is disposed.")}function ir(){if(dt())throw new gr(Eo.AlreadyListening,"Connection is already listening")}function or(){if(!dt())throw new Error("Call listen() first.")}function It(T){return T===void 0?null:T}function Wn(T){if(T!==null)return T}function Ft(T){return T!=null&&!Array.isArray(T)&&typeof T=="object"}function wn(T,O){switch(T){case Q.ParameterStructures.auto:return Ft(O)?Wn(O):[It(O)];case Q.ParameterStructures.byName:if(!Ft(O))throw new Error("Received parameters by name but param is not an object literal.");return Wn(O);case Q.ParameterStructures.byPosition:return[It(O)];default:throw new Error(`Unknown parameter structure ${T.toString()}`)}}function Rn(T,O){let $,G=T.numberOfParams;switch(G){case 0:$=void 0;break;case 1:$=wn(T.parameterStructures,O[0]);break;default:$=[];for(let l=0;l<O.length&&l<G;l++)$.push(It(O[l]));if(O.length<G)for(let l=O.length;l<G;l++)$.push(null);break}return $}let Nt={sendNotification:(T,...O)=>{Ct();let $,G;if(je.string(T)){$=T;let u=O[0],w=0,b=Q.ParameterStructures.auto;Q.ParameterStructures.is(u)&&(w=1,b=u);let g=O.length,f=g-w;switch(f){case 0:G=void 0;break;case 1:G=wn(b,O[w]);break;default:if(b===Q.ParameterStructures.byName)throw new Error(`Received ${f} parameters for 'by Name' notification parameter structure.`);G=O.slice(w,g).map(D=>It(D));break}}else{let u=O;$=T.method,G=Rn(T,u)}let l={jsonrpc:a,method:$,params:G};return rr(l),e.write(l).catch(()=>i.error("Sending notification failed."))},onNotification:(T,O)=>{Ct();let $;return je.func(T)?m=T:O&&(je.string(T)?($=T,C[T]={type:void 0,handler:O}):($=T.method,C[T.method]={type:T,handler:O})),{dispose:()=>{$!==void 0?delete C[$]:m=void 0}}},onProgress:(T,O,$)=>{if(v.has(O))throw new Error(`Progress handler for token ${O} already registered`);return v.set(O,$),{dispose:()=>{v.delete(O)}}},sendProgress:(T,O,$)=>Nt.sendNotification(Po.type,{token:O,value:$}),onUnhandledProgress:Xe.event,sendRequest:(T,...O)=>{Ct(),or();let $,G,l;if(je.string(T)){$=T;let g=O[0],f=O[O.length-1],D=0,P=Q.ParameterStructures.auto;Q.ParameterStructures.is(g)&&(D=1,P=g);let z=O.length;ra.CancellationToken.is(f)&&(z=z-1,l=f);let ue=z-D;switch(ue){case 0:G=void 0;break;case 1:G=wn(P,O[D]);break;default:if(P===Q.ParameterStructures.byName)throw new Error(`Received ${ue} parameters for 'by Name' request parameter structure.`);G=O.slice(D,z).map(le=>It(le));break}}else{let g=O;$=T.method,G=Rn(T,g);let f=T.numberOfParams;l=ra.CancellationToken.is(g[f])?g[f]:void 0}let u=o++,w;return l&&(w=l.onCancellationRequested(()=>{let g=$e.sender.sendCancellation(Nt,u);return g===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${u}`),Promise.resolve()):g.catch(()=>{i.log(`Sending cancellation messages for id ${u} failed`)})})),new Promise((g,f)=>{let D={jsonrpc:a,id:u,method:$,params:G},P=le=>{g(le),$e.sender.cleanup(u),w==null||w.dispose()},z=le=>{f(le),$e.sender.cleanup(u),w==null||w.dispose()},ue={method:$,timerStart:Date.now(),resolve:P,reject:z};jn(D);try{e.write(D).catch(()=>i.error("Sending request failed."))}catch(le){ue.reject(new Q.ResponseError(Q.ErrorCodes.MessageWriteError,le.message?le.message:"Unknown reason")),ue=null}ue&&(N[String(u)]=ue)})},onRequest:(T,O)=>{Ct();let $=null;return ia.is(T)?($=void 0,p=T):je.string(T)?($=null,O!==void 0&&($=T,h[T]={handler:O,type:void 0})):O!==void 0&&($=T.method,h[T.method]={type:T,handler:O}),{dispose:()=>{$!==null&&($!==void 0?delete h[$]:p=void 0)}}},trace:(T,O,$)=>{let G=!1,l=Gt.Text;$!==void 0&&(je.boolean($)?G=$:(G=$.sendNotification||!1,l=$.traceFormat||Gt.Text)),E=T,M=l,E===Ne.Off?q=void 0:q=O,G&&!ft()&&!et()&&Nt.sendNotification(Bd.type,{value:Ne.toString(T)}).catch(()=>{i.error("Sending trace notification failed")})},onError:X.event,onClose:Me.event,onUnhandledNotification:xe.event,onDispose:ct.event,end:()=>{e.end()},dispose:()=>{if(et())return;B=Vt.Disposed,ct.fire(void 0);let T=new Error("Connection got disposed.");Object.keys(N).forEach(O=>{N[O].reject(T)}),N=Object.create(null),L=Object.create(null),F=new Set,k=new Ud.LinkedMap,je.func(e.dispose)&&e.dispose(),je.func(t.dispose)&&t.dispose()},listen:()=>{Ct(),ir(),B=Vt.Listening,t.listen(rn)},inspect:()=>{zd.default().console.log("inspect")}};return Nt.onNotification(oa.type,T=>{E===Ne.Off||!q||q.log(T.message,E===Ne.Verbose?T.verbose:void 0)}),Nt.onNotification(Po.type,T=>{let O=v.get(T.token);O?O(T.value):Xe.fire(T)}),Nt}Z.createMessageConnection=Cw});var fa=_(I=>{"use strict";Object.defineProperty(I,"__esModule",{value:!0});I.ConnectionErrors=I.LogTraceNotification=I.SetTraceNotification=I.TraceFormat=I.Trace=I.ProgressType=I.createMessageConnection=I.NullLogger=I.ConnectionOptions=I.ConnectionStrategy=I.WriteableStreamMessageWriter=I.AbstractMessageWriter=I.MessageWriter=I.ReadableStreamMessageReader=I.AbstractMessageReader=I.MessageReader=I.CancellationToken=I.CancellationTokenSource=I.Emitter=I.Event=I.Disposable=I.LRUCache=I.Touch=I.LinkedMap=I.ParameterStructures=I.NotificationType9=I.NotificationType8=I.NotificationType7=I.NotificationType6=I.NotificationType5=I.NotificationType4=I.NotificationType3=I.NotificationType2=I.NotificationType1=I.NotificationType0=I.NotificationType=I.ErrorCodes=I.ResponseError=I.RequestType9=I.RequestType8=I.RequestType7=I.RequestType6=I.RequestType5=I.RequestType4=I.RequestType3=I.RequestType2=I.RequestType1=I.RequestType0=I.RequestType=I.RAL=void 0;I.CancellationStrategy=I.CancellationSenderStrategy=I.CancellationReceiverStrategy=I.ConnectionError=void 0;var ye=Us();Object.defineProperty(I,"RequestType",{enumerable:!0,get:function(){return ye.RequestType}});Object.defineProperty(I,"RequestType0",{enumerable:!0,get:function(){return ye.RequestType0}});Object.defineProperty(I,"RequestType1",{enumerable:!0,get:function(){return ye.RequestType1}});Object.defineProperty(I,"RequestType2",{enumerable:!0,get:function(){return ye.RequestType2}});Object.defineProperty(I,"RequestType3",{enumerable:!0,get:function(){return ye.RequestType3}});Object.defineProperty(I,"RequestType4",{enumerable:!0,get:function(){return ye.RequestType4}});Object.defineProperty(I,"RequestType5",{enumerable:!0,get:function(){return ye.RequestType5}});Object.defineProperty(I,"RequestType6",{enumerable:!0,get:function(){return ye.RequestType6}});Object.defineProperty(I,"RequestType7",{enumerable:!0,get:function(){return ye.RequestType7}});Object.defineProperty(I,"RequestType8",{enumerable:!0,get:function(){return ye.RequestType8}});Object.defineProperty(I,"RequestType9",{enumerable:!0,get:function(){return ye.RequestType9}});Object.defineProperty(I,"ResponseError",{enumerable:!0,get:function(){return ye.ResponseError}});Object.defineProperty(I,"ErrorCodes",{enumerable:!0,get:function(){return ye.ErrorCodes}});Object.defineProperty(I,"NotificationType",{enumerable:!0,get:function(){return ye.NotificationType}});Object.defineProperty(I,"NotificationType0",{enumerable:!0,get:function(){return ye.NotificationType0}});Object.defineProperty(I,"NotificationType1",{enumerable:!0,get:function(){return ye.NotificationType1}});Object.defineProperty(I,"NotificationType2",{enumerable:!0,get:function(){return ye.NotificationType2}});Object.defineProperty(I,"NotificationType3",{enumerable:!0,get:function(){return ye.NotificationType3}});Object.defineProperty(I,"NotificationType4",{enumerable:!0,get:function(){return ye.NotificationType4}});Object.defineProperty(I,"NotificationType5",{enumerable:!0,get:function(){return ye.NotificationType5}});Object.defineProperty(I,"NotificationType6",{enumerable:!0,get:function(){return ye.NotificationType6}});Object.defineProperty(I,"NotificationType7",{enumerable:!0,get:function(){return ye.NotificationType7}});Object.defineProperty(I,"NotificationType8",{enumerable:!0,get:function(){return ye.NotificationType8}});Object.defineProperty(I,"NotificationType9",{enumerable:!0,get:function(){return ye.NotificationType9}});Object.defineProperty(I,"ParameterStructures",{enumerable:!0,get:function(){return ye.ParameterStructures}});var ua=Bs();Object.defineProperty(I,"LinkedMap",{enumerable:!0,get:function(){return ua.LinkedMap}});Object.defineProperty(I,"LRUCache",{enumerable:!0,get:function(){return ua.LRUCache}});Object.defineProperty(I,"Touch",{enumerable:!0,get:function(){return ua.Touch}});var ww=Hs();Object.defineProperty(I,"Disposable",{enumerable:!0,get:function(){return ww.Disposable}});var Xd=Ar();Object.defineProperty(I,"Event",{enumerable:!0,get:function(){return Xd.Event}});Object.defineProperty(I,"Emitter",{enumerable:!0,get:function(){return Xd.Emitter}});var Jd=Js();Object.defineProperty(I,"CancellationTokenSource",{enumerable:!0,get:function(){return Jd.CancellationTokenSource}});Object.defineProperty(I,"CancellationToken",{enumerable:!0,get:function(){return Jd.CancellationToken}});var la=Nd();Object.defineProperty(I,"MessageReader",{enumerable:!0,get:function(){return la.MessageReader}});Object.defineProperty(I,"AbstractMessageReader",{enumerable:!0,get:function(){return la.AbstractMessageReader}});Object.defineProperty(I,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return la.ReadableStreamMessageReader}});var da=Wd();Object.defineProperty(I,"MessageWriter",{enumerable:!0,get:function(){return da.MessageWriter}});Object.defineProperty(I,"AbstractMessageWriter",{enumerable:!0,get:function(){return da.AbstractMessageWriter}});Object.defineProperty(I,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return da.WriteableStreamMessageWriter}});var wt=Vd();Object.defineProperty(I,"ConnectionStrategy",{enumerable:!0,get:function(){return wt.ConnectionStrategy}});Object.defineProperty(I,"ConnectionOptions",{enumerable:!0,get:function(){return wt.ConnectionOptions}});Object.defineProperty(I,"NullLogger",{enumerable:!0,get:function(){return wt.NullLogger}});Object.defineProperty(I,"createMessageConnection",{enumerable:!0,get:function(){return wt.createMessageConnection}});Object.defineProperty(I,"ProgressType",{enumerable:!0,get:function(){return wt.ProgressType}});Object.defineProperty(I,"Trace",{enumerable:!0,get:function(){return wt.Trace}});Object.defineProperty(I,"TraceFormat",{enumerable:!0,get:function(){return wt.TraceFormat}});Object.defineProperty(I,"SetTraceNotification",{enumerable:!0,get:function(){return wt.SetTraceNotification}});Object.defineProperty(I,"LogTraceNotification",{enumerable:!0,get:function(){return wt.LogTraceNotification}});Object.defineProperty(I,"ConnectionErrors",{enumerable:!0,get:function(){return wt.ConnectionErrors}});Object.defineProperty(I,"ConnectionError",{enumerable:!0,get:function(){return wt.ConnectionError}});Object.defineProperty(I,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return wt.CancellationReceiverStrategy}});Object.defineProperty(I,"CancellationSenderStrategy",{enumerable:!0,get:function(){return wt.CancellationSenderStrategy}});Object.defineProperty(I,"CancellationStrategy",{enumerable:!0,get:function(){return wt.CancellationStrategy}});var Rw=_n();I.RAL=Rw.default});var mr=_(pe=>{"use strict";var bw=pe&&pe.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Tw=pe&&pe.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&bw(e,t,n)};Object.defineProperty(pe,"__esModule",{value:!0});pe.createMessageConnection=pe.createServerSocketTransport=pe.createClientSocketTransport=pe.createServerPipeTransport=pe.createClientPipeTransport=pe.generateRandomPipeName=pe.StreamMessageWriter=pe.StreamMessageReader=pe.SocketMessageWriter=pe.SocketMessageReader=pe.IPCMessageWriter=pe.IPCMessageReader=void 0;var Mr=id();Mr.default.install();var an=fa(),Yd=require("path"),Dw=require("os"),Sw=require("crypto"),xo=require("net");Tw(fa(),pe);var Qd=class extends an.AbstractMessageReader{constructor(e){super();this.process=e;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),an.Disposable.create(()=>this.process.off("message",e))}};pe.IPCMessageReader=Qd;var Zd=class extends an.AbstractMessageWriter{constructor(e){super();this.process=e,this.errorCount=0;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,n=>{n?(this.errorCount++,this.handleError(n,e)):this.errorCount=0}),Promise.resolve()}catch(n){return this.handleError(n,e),Promise.reject(n)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){}};pe.IPCMessageWriter=Zd;var $r=class extends an.ReadableStreamMessageReader{constructor(e,n="utf-8"){super(Mr.default().stream.asReadableStream(e),n)}};pe.SocketMessageReader=$r;var jr=class extends an.WriteableStreamMessageWriter{constructor(e,n){super(Mr.default().stream.asWritableStream(e),n);this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};pe.SocketMessageWriter=jr;var pa=class extends an.ReadableStreamMessageReader{constructor(e,n){super(Mr.default().stream.asReadableStream(e),n)}};pe.StreamMessageReader=pa;var ha=class extends an.WriteableStreamMessageWriter{constructor(e,n){super(Mr.default().stream.asWritableStream(e),n)}};pe.StreamMessageWriter=ha;var ef=process.env.XDG_RUNTIME_DIR,_w=new Map([["linux",107],["darwin",103]]);function Pw(){let t=Sw.randomBytes(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${t}-sock`;let e;ef?e=Yd.join(ef,`vscode-ipc-${t}.sock`):e=Yd.join(Dw.tmpdir(),`vscode-${t}.sock`);let n=_w.get(process.platform);return n!==void 0&&e.length>=n&&Mr.default().console.warn(`WARNING: IPC handle "${e}" is longer than ${n} characters.`),e}pe.generateRandomPipeName=Pw;function Ew(t,e="utf-8"){let n,r=new Promise((i,o)=>{n=i});return new Promise((i,o)=>{let s=xo.createServer(c=>{s.close(),n([new $r(c,e),new jr(c,e)])});s.on("error",o),s.listen(t,()=>{s.removeListener("error",o),i({onConnected:()=>r})})})}pe.createClientPipeTransport=Ew;function xw(t,e="utf-8"){let n=xo.createConnection(t);return[new $r(n,e),new jr(n,e)]}pe.createServerPipeTransport=xw;function kw(t,e="utf-8"){let n,r=new Promise((i,o)=>{n=i});return new Promise((i,o)=>{let s=xo.createServer(c=>{s.close(),n([new $r(c,e),new jr(c,e)])});s.on("error",o),s.listen(t,"127.0.0.1",()=>{s.removeListener("error",o),i({onConnected:()=>r})})})}pe.createClientSocketTransport=kw;function qw(t,e="utf-8"){let n=xo.createConnection(t,"127.0.0.1");return[new $r(n,e),new jr(n,e)]}pe.createServerSocketTransport=qw;function Ow(t){let e=t;return e.read!==void 0&&e.addListener!==void 0}function Iw(t){let e=t;return e.write!==void 0&&e.addListener!==void 0}function Fw(t,e,n,r){n||(n=an.NullLogger);let i=Ow(t)?new pa(t):t,o=Iw(e)?new ha(e):e;return an.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),an.createMessageConnection(i,o,n,r)}pe.createMessageConnection=Fw});var ga=_((IP,tf)=>{"use strict";tf.exports=mr()});var rf=_((nf,ko)=>{(function(t){if(typeof ko=="object"&&typeof ko.exports=="object"){var e=t(require,nf);e!==void 0&&(ko.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],t)})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=e.EOL=e.SemanticTokens=e.SemanticTokenModifiers=e.SemanticTokenTypes=e.SelectionRange=e.DocumentLink=e.FormattingOptions=e.CodeLens=e.CodeAction=e.CodeActionContext=e.CodeActionKind=e.DocumentSymbol=e.SymbolInformation=e.SymbolTag=e.SymbolKind=e.DocumentHighlight=e.DocumentHighlightKind=e.SignatureInformation=e.ParameterInformation=e.Hover=e.MarkedString=e.CompletionList=e.CompletionItem=e.CompletionItemLabelDetails=e.InsertTextMode=e.InsertReplaceEdit=e.CompletionItemTag=e.InsertTextFormat=e.CompletionItemKind=e.MarkupContent=e.MarkupKind=e.TextDocumentItem=e.OptionalVersionedTextDocumentIdentifier=e.VersionedTextDocumentIdentifier=e.TextDocumentIdentifier=e.WorkspaceChange=e.WorkspaceEdit=e.DeleteFile=e.RenameFile=e.CreateFile=e.TextDocumentEdit=e.AnnotatedTextEdit=e.ChangeAnnotationIdentifier=e.ChangeAnnotation=e.TextEdit=e.Command=e.Diagnostic=e.CodeDescription=e.DiagnosticTag=e.DiagnosticSeverity=e.DiagnosticRelatedInformation=e.FoldingRange=e.FoldingRangeKind=e.ColorPresentation=e.ColorInformation=e.Color=e.LocationLink=e.Location=e.Range=e.Position=e.uinteger=e.integer=void 0;var n;(function(u){u.MIN_VALUE=-2147483648,u.MAX_VALUE=2147483647})(n=e.integer||(e.integer={}));var r;(function(u){u.MIN_VALUE=0,u.MAX_VALUE=2147483647})(r=e.uinteger||(e.uinteger={}));var i;(function(u){function w(g,f){return g===Number.MAX_VALUE&&(g=r.MAX_VALUE),f===Number.MAX_VALUE&&(f=r.MAX_VALUE),{line:g,character:f}}u.create=w;function b(g){var f=g;return l.objectLiteral(f)&&l.uinteger(f.line)&&l.uinteger(f.character)}u.is=b})(i=e.Position||(e.Position={}));var o;(function(u){function w(g,f,D,P){if(l.uinteger(g)&&l.uinteger(f)&&l.uinteger(D)&&l.uinteger(P))return{start:i.create(g,f),end:i.create(D,P)};if(i.is(g)&&i.is(f))return{start:g,end:f};throw new Error("Range#create called with invalid arguments["+g+", "+f+", "+D+", "+P+"]")}u.create=w;function b(g){var f=g;return l.objectLiteral(f)&&i.is(f.start)&&i.is(f.end)}u.is=b})(o=e.Range||(e.Range={}));var s;(function(u){function w(g,f){return{uri:g,range:f}}u.create=w;function b(g){var f=g;return l.defined(f)&&o.is(f.range)&&(l.string(f.uri)||l.undefined(f.uri))}u.is=b})(s=e.Location||(e.Location={}));var c;(function(u){function w(g,f,D,P){return{targetUri:g,targetRange:f,targetSelectionRange:D,originSelectionRange:P}}u.create=w;function b(g){var f=g;return l.defined(f)&&o.is(f.targetRange)&&l.string(f.targetUri)&&(o.is(f.targetSelectionRange)||l.undefined(f.targetSelectionRange))&&(o.is(f.originSelectionRange)||l.undefined(f.originSelectionRange))}u.is=b})(c=e.LocationLink||(e.LocationLink={}));var a;(function(u){function w(g,f,D,P){return{red:g,green:f,blue:D,alpha:P}}u.create=w;function b(g){var f=g;return l.numberRange(f.red,0,1)&&l.numberRange(f.green,0,1)&&l.numberRange(f.blue,0,1)&&l.numberRange(f.alpha,0,1)}u.is=b})(a=e.Color||(e.Color={}));var p;(function(u){function w(g,f){return{range:g,color:f}}u.create=w;function b(g){var f=g;return o.is(f.range)&&a.is(f.color)}u.is=b})(p=e.ColorInformation||(e.ColorInformation={}));var h;(function(u){function w(g,f,D){return{label:g,textEdit:f,additionalTextEdits:D}}u.create=w;function b(g){var f=g;return l.string(f.label)&&(l.undefined(f.textEdit)||E.is(f))&&(l.undefined(f.additionalTextEdits)||l.typedArray(f.additionalTextEdits,E.is))}u.is=b})(h=e.ColorPresentation||(e.ColorPresentation={}));var m;(function(u){u.Comment="comment",u.Imports="imports",u.Region="region"})(m=e.FoldingRangeKind||(e.FoldingRangeKind={}));var C;(function(u){function w(g,f,D,P,z){var ue={startLine:g,endLine:f};return l.defined(D)&&(ue.startCharacter=D),l.defined(P)&&(ue.endCharacter=P),l.defined(z)&&(ue.kind=z),ue}u.create=w;function b(g){var f=g;return l.uinteger(f.startLine)&&l.uinteger(f.startLine)&&(l.undefined(f.startCharacter)||l.uinteger(f.startCharacter))&&(l.undefined(f.endCharacter)||l.uinteger(f.endCharacter))&&(l.undefined(f.kind)||l.string(f.kind))}u.is=b})(C=e.FoldingRange||(e.FoldingRange={}));var v;(function(u){function w(g,f){return{location:g,message:f}}u.create=w;function b(g){var f=g;return l.defined(f)&&s.is(f.location)&&l.string(f.message)}u.is=b})(v=e.DiagnosticRelatedInformation||(e.DiagnosticRelatedInformation={}));var S;(function(u){u.Error=1,u.Warning=2,u.Information=3,u.Hint=4})(S=e.DiagnosticSeverity||(e.DiagnosticSeverity={}));var k;(function(u){u.Unnecessary=1,u.Deprecated=2})(k=e.DiagnosticTag||(e.DiagnosticTag={}));var N;(function(u){function w(b){var g=b;return g!=null&&l.string(g.href)}u.is=w})(N=e.CodeDescription||(e.CodeDescription={}));var F;(function(u){function w(g,f,D,P,z,ue){var le={range:g,message:f};return l.defined(D)&&(le.severity=D),l.defined(P)&&(le.code=P),l.defined(z)&&(le.source=z),l.defined(ue)&&(le.relatedInformation=ue),le}u.create=w;function b(g){var f,D=g;return l.defined(D)&&o.is(D.range)&&l.string(D.message)&&(l.number(D.severity)||l.undefined(D.severity))&&(l.integer(D.code)||l.string(D.code)||l.undefined(D.code))&&(l.undefined(D.codeDescription)||l.string((f=D.codeDescription)===null||f===void 0?void 0:f.href))&&(l.string(D.source)||l.undefined(D.source))&&(l.undefined(D.relatedInformation)||l.typedArray(D.relatedInformation,v.is))}u.is=b})(F=e.Diagnostic||(e.Diagnostic={}));var L;(function(u){function w(g,f){for(var D=[],P=2;P<arguments.length;P++)D[P-2]=arguments[P];var z={title:g,command:f};return l.defined(D)&&D.length>0&&(z.arguments=D),z}u.create=w;function b(g){var f=g;return l.defined(f)&&l.string(f.title)&&l.string(f.command)}u.is=b})(L=e.Command||(e.Command={}));var E;(function(u){function w(D,P){return{range:D,newText:P}}u.replace=w;function b(D,P){return{range:{start:D,end:D},newText:P}}u.insert=b;function g(D){return{range:D,newText:""}}u.del=g;function f(D){var P=D;return l.objectLiteral(P)&&l.string(P.newText)&&o.is(P.range)}u.is=f})(E=e.TextEdit||(e.TextEdit={}));var M;(function(u){function w(g,f,D){var P={label:g};return f!==void 0&&(P.needsConfirmation=f),D!==void 0&&(P.description=D),P}u.create=w;function b(g){var f=g;return f!==void 0&&l.objectLiteral(f)&&l.string(f.label)&&(l.boolean(f.needsConfirmation)||f.needsConfirmation===void 0)&&(l.string(f.description)||f.description===void 0)}u.is=b})(M=e.ChangeAnnotation||(e.ChangeAnnotation={}));var q;(function(u){function w(b){var g=b;return typeof g=="string"}u.is=w})(q=e.ChangeAnnotationIdentifier||(e.ChangeAnnotationIdentifier={}));var B;(function(u){function w(D,P,z){return{range:D,newText:P,annotationId:z}}u.replace=w;function b(D,P,z){return{range:{start:D,end:D},newText:P,annotationId:z}}u.insert=b;function g(D,P){return{range:D,newText:"",annotationId:P}}u.del=g;function f(D){var P=D;return E.is(P)&&(M.is(P.annotationId)||q.is(P.annotationId))}u.is=f})(B=e.AnnotatedTextEdit||(e.AnnotatedTextEdit={}));var X;(function(u){function w(g,f){return{textDocument:g,edits:f}}u.create=w;function b(g){var f=g;return l.defined(f)&&De.is(f.textDocument)&&Array.isArray(f.edits)}u.is=b})(X=e.TextDocumentEdit||(e.TextDocumentEdit={}));var Me;(function(u){function w(g,f,D){var P={kind:"create",uri:g};return f!==void 0&&(f.overwrite!==void 0||f.ignoreIfExists!==void 0)&&(P.options=f),D!==void 0&&(P.annotationId=D),P}u.create=w;function b(g){var f=g;return f&&f.kind==="create"&&l.string(f.uri)&&(f.options===void 0||(f.options.overwrite===void 0||l.boolean(f.options.overwrite))&&(f.options.ignoreIfExists===void 0||l.boolean(f.options.ignoreIfExists)))&&(f.annotationId===void 0||q.is(f.annotationId))}u.is=b})(Me=e.CreateFile||(e.CreateFile={}));var xe;(function(u){function w(g,f,D,P){var z={kind:"rename",oldUri:g,newUri:f};return D!==void 0&&(D.overwrite!==void 0||D.ignoreIfExists!==void 0)&&(z.options=D),P!==void 0&&(z.annotationId=P),z}u.create=w;function b(g){var f=g;return f&&f.kind==="rename"&&l.string(f.oldUri)&&l.string(f.newUri)&&(f.options===void 0||(f.options.overwrite===void 0||l.boolean(f.options.overwrite))&&(f.options.ignoreIfExists===void 0||l.boolean(f.options.ignoreIfExists)))&&(f.annotationId===void 0||q.is(f.annotationId))}u.is=b})(xe=e.RenameFile||(e.RenameFile={}));var Xe;(function(u){function w(g,f,D){var P={kind:"delete",uri:g};return f!==void 0&&(f.recursive!==void 0||f.ignoreIfNotExists!==void 0)&&(P.options=f),D!==void 0&&(P.annotationId=D),P}u.create=w;function b(g){var f=g;return f&&f.kind==="delete"&&l.string(f.uri)&&(f.options===void 0||(f.options.recursive===void 0||l.boolean(f.options.recursive))&&(f.options.ignoreIfNotExists===void 0||l.boolean(f.options.ignoreIfNotExists)))&&(f.annotationId===void 0||q.is(f.annotationId))}u.is=b})(Xe=e.DeleteFile||(e.DeleteFile={}));var ct;(function(u){function w(b){var g=b;return g&&(g.changes!==void 0||g.documentChanges!==void 0)&&(g.documentChanges===void 0||g.documentChanges.every(function(f){return l.string(f.kind)?Me.is(f)||xe.is(f)||Xe.is(f):X.is(f)}))}u.is=w})(ct=e.WorkspaceEdit||(e.WorkspaceEdit={}));var $e=function(){function u(w,b){this.edits=w,this.changeAnnotations=b}return u.prototype.insert=function(w,b,g){var f,D;if(g===void 0?f=E.insert(w,b):q.is(g)?(D=g,f=B.insert(w,b,g)):(this.assertChangeAnnotations(this.changeAnnotations),D=this.changeAnnotations.manage(g),f=B.insert(w,b,D)),this.edits.push(f),D!==void 0)return D},u.prototype.replace=function(w,b,g){var f,D;if(g===void 0?f=E.replace(w,b):q.is(g)?(D=g,f=B.replace(w,b,g)):(this.assertChangeAnnotations(this.changeAnnotations),D=this.changeAnnotations.manage(g),f=B.replace(w,b,D)),this.edits.push(f),D!==void 0)return D},u.prototype.delete=function(w,b){var g,f;if(b===void 0?g=E.del(w):q.is(b)?(f=b,g=B.del(w,b)):(this.assertChangeAnnotations(this.changeAnnotations),f=this.changeAnnotations.manage(b),g=B.del(w,f)),this.edits.push(g),f!==void 0)return f},u.prototype.add=function(w){this.edits.push(w)},u.prototype.all=function(){return this.edits},u.prototype.clear=function(){this.edits.splice(0,this.edits.length)},u.prototype.assertChangeAnnotations=function(w){if(w===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},u}(),ut=function(){function u(w){this._annotations=w===void 0?Object.create(null):w,this._counter=0,this._size=0}return u.prototype.all=function(){return this._annotations},Object.defineProperty(u.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),u.prototype.manage=function(w,b){var g;if(q.is(w)?g=w:(g=this.nextId(),b=w),this._annotations[g]!==void 0)throw new Error("Id "+g+" is already in use.");if(b===void 0)throw new Error("No annotation provided for id "+g);return this._annotations[g]=b,this._size++,g},u.prototype.nextId=function(){return this._counter++,this._counter.toString()},u}(),yt=function(){function u(w){var b=this;this._textEditChanges=Object.create(null),w!==void 0?(this._workspaceEdit=w,w.documentChanges?(this._changeAnnotations=new ut(w.changeAnnotations),w.changeAnnotations=this._changeAnnotations.all(),w.documentChanges.forEach(function(g){if(X.is(g)){var f=new $e(g.edits,b._changeAnnotations);b._textEditChanges[g.textDocument.uri]=f}})):w.changes&&Object.keys(w.changes).forEach(function(g){var f=new $e(w.changes[g]);b._textEditChanges[g]=f})):this._workspaceEdit={}}return Object.defineProperty(u.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),u.prototype.getTextEditChange=function(w){if(De.is(w)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var b={uri:w.uri,version:w.version},g=this._textEditChanges[b.uri];if(!g){var f=[],D={textDocument:b,edits:f};this._workspaceEdit.documentChanges.push(D),g=new $e(f,this._changeAnnotations),this._textEditChanges[b.uri]=g}return g}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var g=this._textEditChanges[w];if(!g){var f=[];this._workspaceEdit.changes[w]=f,g=new $e(f),this._textEditChanges[w]=g}return g}},u.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new ut,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},u.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},u.prototype.createFile=function(w,b,g){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var f;M.is(b)||q.is(b)?f=b:g=b;var D,P;if(f===void 0?D=Me.create(w,g):(P=q.is(f)?f:this._changeAnnotations.manage(f),D=Me.create(w,g,P)),this._workspaceEdit.documentChanges.push(D),P!==void 0)return P},u.prototype.renameFile=function(w,b,g,f){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var D;M.is(g)||q.is(g)?D=g:f=g;var P,z;if(D===void 0?P=xe.create(w,b,f):(z=q.is(D)?D:this._changeAnnotations.manage(D),P=xe.create(w,b,f,z)),this._workspaceEdit.documentChanges.push(P),z!==void 0)return z},u.prototype.deleteFile=function(w,b,g){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var f;M.is(b)||q.is(b)?f=b:g=b;var D,P;if(f===void 0?D=Xe.create(w,g):(P=q.is(f)?f:this._changeAnnotations.manage(f),D=Xe.create(w,g,P)),this._workspaceEdit.documentChanges.push(D),P!==void 0)return P},u}();e.WorkspaceChange=yt;var lt;(function(u){function w(g){return{uri:g}}u.create=w;function b(g){var f=g;return l.defined(f)&&l.string(f.uri)}u.is=b})(lt=e.TextDocumentIdentifier||(e.TextDocumentIdentifier={}));var Kt;(function(u){function w(g,f){return{uri:g,version:f}}u.create=w;function b(g){var f=g;return l.defined(f)&&l.string(f.uri)&&l.integer(f.version)}u.is=b})(Kt=e.VersionedTextDocumentIdentifier||(e.VersionedTextDocumentIdentifier={}));var De;(function(u){function w(g,f){return{uri:g,version:f}}u.create=w;function b(g){var f=g;return l.defined(f)&&l.string(f.uri)&&(f.version===null||l.integer(f.version))}u.is=b})(De=e.OptionalVersionedTextDocumentIdentifier||(e.OptionalVersionedTextDocumentIdentifier={}));var dt;(function(u){function w(g,f,D,P){return{uri:g,languageId:f,version:D,text:P}}u.create=w;function b(g){var f=g;return l.defined(f)&&l.string(f.uri)&&l.string(f.languageId)&&l.integer(f.version)&&l.string(f.text)}u.is=b})(dt=e.TextDocumentItem||(e.TextDocumentItem={}));var ft;(function(u){u.PlainText="plaintext",u.Markdown="markdown"})(ft=e.MarkupKind||(e.MarkupKind={})),function(u){function w(b){var g=b;return g===u.PlainText||g===u.Markdown}u.is=w}(ft=e.MarkupKind||(e.MarkupKind={}));var et;(function(u){function w(b){var g=b;return l.objectLiteral(b)&&ft.is(g.kind)&&l.string(g.value)}u.is=w})(et=e.MarkupContent||(e.MarkupContent={}));var Tt;(function(u){u.Text=1,u.Method=2,u.Function=3,u.Constructor=4,u.Field=5,u.Variable=6,u.Class=7,u.Interface=8,u.Module=9,u.Property=10,u.Unit=11,u.Value=12,u.Enum=13,u.Keyword=14,u.Snippet=15,u.Color=16,u.File=17,u.Reference=18,u.Folder=19,u.EnumMember=20,u.Constant=21,u.Struct=22,u.Event=23,u.Operator=24,u.TypeParameter=25})(Tt=e.CompletionItemKind||(e.CompletionItemKind={}));var qt;(function(u){u.PlainText=1,u.Snippet=2})(qt=e.InsertTextFormat||(e.InsertTextFormat={}));var tr;(function(u){u.Deprecated=1})(tr=e.CompletionItemTag||(e.CompletionItemTag={}));var $n;(function(u){function w(g,f,D){return{newText:g,insert:f,replace:D}}u.create=w;function b(g){var f=g;return f&&l.string(f.newText)&&o.is(f.insert)&&o.is(f.replace)}u.is=b})($n=e.InsertReplaceEdit||(e.InsertReplaceEdit={}));var vn;(function(u){u.asIs=1,u.adjustIndentation=2})(vn=e.InsertTextMode||(e.InsertTextMode={}));var rn;(function(u){function w(b){var g=b;return g&&(l.string(g.detail)||g.detail===void 0)&&(l.string(g.description)||g.description===void 0)}u.is=w})(rn=e.CompletionItemLabelDetails||(e.CompletionItemLabelDetails={}));var nr;(function(u){function w(b){return{label:b}}u.create=w})(nr=e.CompletionItem||(e.CompletionItem={}));var on;(function(u){function w(b,g){return{items:b||[],isIncomplete:!!g}}u.create=w})(on=e.CompletionList||(e.CompletionList={}));var sn;(function(u){function w(g){return g.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}u.fromPlainText=w;function b(g){var f=g;return l.string(f)||l.objectLiteral(f)&&l.string(f.language)&&l.string(f.value)}u.is=b})(sn=e.MarkedString||(e.MarkedString={}));var yn;(function(u){function w(b){var g=b;return!!g&&l.objectLiteral(g)&&(et.is(g.contents)||sn.is(g.contents)||l.typedArray(g.contents,sn.is))&&(b.range===void 0||o.is(b.range))}u.is=w})(yn=e.Hover||(e.Hover={}));var jn;(function(u){function w(b,g){return g?{label:b,documentation:g}:{label:b}}u.create=w})(jn=e.ParameterInformation||(e.ParameterInformation={}));var rr;(function(u){function w(b,g){for(var f=[],D=2;D<arguments.length;D++)f[D-2]=arguments[D];var P={label:b};return l.defined(g)&&(P.documentation=g),l.defined(f)?P.parameters=f:P.parameters=[],P}u.create=w})(rr=e.SignatureInformation||(e.SignatureInformation={}));var Ot;(function(u){u.Text=1,u.Read=2,u.Write=3})(Ot=e.DocumentHighlightKind||(e.DocumentHighlightKind={}));var Cn;(function(u){function w(b,g){var f={range:b};return l.number(g)&&(f.kind=g),f}u.create=w})(Cn=e.DocumentHighlight||(e.DocumentHighlight={}));var Dt;(function(u){u.File=1,u.Module=2,u.Namespace=3,u.Package=4,u.Class=5,u.Method=6,u.Property=7,u.Field=8,u.Constructor=9,u.Enum=10,u.Interface=11,u.Function=12,u.Variable=13,u.Constant=14,u.String=15,u.Number=16,u.Boolean=17,u.Array=18,u.Object=19,u.Key=20,u.Null=21,u.EnumMember=22,u.Struct=23,u.Event=24,u.Operator=25,u.TypeParameter=26})(Dt=e.SymbolKind||(e.SymbolKind={}));var Hn;(function(u){u.Deprecated=1})(Hn=e.SymbolTag||(e.SymbolTag={}));var ke;(function(u){function w(b,g,f,D,P){var z={name:b,kind:g,location:{uri:D,range:f}};return P&&(z.containerName=P),z}u.create=w})(ke=e.SymbolInformation||(e.SymbolInformation={}));var Ct;(function(u){function w(g,f,D,P,z,ue){var le={name:g,detail:f,kind:D,range:P,selectionRange:z};return ue!==void 0&&(le.children=ue),le}u.create=w;function b(g){var f=g;return f&&l.string(f.name)&&l.number(f.kind)&&o.is(f.range)&&o.is(f.selectionRange)&&(f.detail===void 0||l.string(f.detail))&&(f.deprecated===void 0||l.boolean(f.deprecated))&&(f.children===void 0||Array.isArray(f.children))&&(f.tags===void 0||Array.isArray(f.tags))}u.is=b})(Ct=e.DocumentSymbol||(e.DocumentSymbol={}));var ir;(function(u){u.Empty="",u.QuickFix="quickfix",u.Refactor="refactor",u.RefactorExtract="refactor.extract",u.RefactorInline="refactor.inline",u.RefactorRewrite="refactor.rewrite",u.Source="source",u.SourceOrganizeImports="source.organizeImports",u.SourceFixAll="source.fixAll"})(ir=e.CodeActionKind||(e.CodeActionKind={}));var or;(function(u){function w(g,f){var D={diagnostics:g};return f!=null&&(D.only=f),D}u.create=w;function b(g){var f=g;return l.defined(f)&&l.typedArray(f.diagnostics,F.is)&&(f.only===void 0||l.typedArray(f.only,l.string))}u.is=b})(or=e.CodeActionContext||(e.CodeActionContext={}));var It;(function(u){function w(g,f,D){var P={title:g},z=!0;return typeof f=="string"?(z=!1,P.kind=f):L.is(f)?P.command=f:P.edit=f,z&&D!==void 0&&(P.kind=D),P}u.create=w;function b(g){var f=g;return f&&l.string(f.title)&&(f.diagnostics===void 0||l.typedArray(f.diagnostics,F.is))&&(f.kind===void 0||l.string(f.kind))&&(f.edit!==void 0||f.command!==void 0)&&(f.command===void 0||L.is(f.command))&&(f.isPreferred===void 0||l.boolean(f.isPreferred))&&(f.edit===void 0||ct.is(f.edit))}u.is=b})(It=e.CodeAction||(e.CodeAction={}));var Wn;(function(u){function w(g,f){var D={range:g};return l.defined(f)&&(D.data=f),D}u.create=w;function b(g){var f=g;return l.defined(f)&&o.is(f.range)&&(l.undefined(f.command)||L.is(f.command))}u.is=b})(Wn=e.CodeLens||(e.CodeLens={}));var Ft;(function(u){function w(g,f){return{tabSize:g,insertSpaces:f}}u.create=w;function b(g){var f=g;return l.defined(f)&&l.uinteger(f.tabSize)&&l.boolean(f.insertSpaces)}u.is=b})(Ft=e.FormattingOptions||(e.FormattingOptions={}));var wn;(function(u){function w(g,f,D){return{range:g,target:f,data:D}}u.create=w;function b(g){var f=g;return l.defined(f)&&o.is(f.range)&&(l.undefined(f.target)||l.string(f.target))}u.is=b})(wn=e.DocumentLink||(e.DocumentLink={}));var Rn;(function(u){function w(g,f){return{range:g,parent:f}}u.create=w;function b(g){var f=g;return f!==void 0&&o.is(f.range)&&(f.parent===void 0||u.is(f.parent))}u.is=b})(Rn=e.SelectionRange||(e.SelectionRange={}));var Nt;(function(u){u.namespace="namespace",u.type="type",u.class="class",u.enum="enum",u.interface="interface",u.struct="struct",u.typeParameter="typeParameter",u.parameter="parameter",u.variable="variable",u.property="property",u.enumMember="enumMember",u.event="event",u.function="function",u.method="method",u.macro="macro",u.keyword="keyword",u.modifier="modifier",u.comment="comment",u.string="string",u.number="number",u.regexp="regexp",u.operator="operator"})(Nt=e.SemanticTokenTypes||(e.SemanticTokenTypes={}));var T;(function(u){u.declaration="declaration",u.definition="definition",u.readonly="readonly",u.static="static",u.deprecated="deprecated",u.abstract="abstract",u.async="async",u.modification="modification",u.documentation="documentation",u.defaultLibrary="defaultLibrary"})(T=e.SemanticTokenModifiers||(e.SemanticTokenModifiers={}));var O;(function(u){function w(b){var g=b;return g!==void 0&&(g.resultId===void 0||typeof g.resultId=="string")&&Array.isArray(g.data)&&(g.data.length===0||typeof g.data[0]=="number")}u.is=w})(O=e.SemanticTokens||(e.SemanticTokens={})),e.EOL=[`
`,`\r
`,"\r"];var $;(function(u){function w(D,P,z,ue){return new G(D,P,z,ue)}u.create=w;function b(D){var P=D;return!!(l.defined(P)&&l.string(P.uri)&&(l.undefined(P.languageId)||l.string(P.languageId))&&l.uinteger(P.lineCount)&&l.func(P.getText)&&l.func(P.positionAt)&&l.func(P.offsetAt))}u.is=b;function g(D,P){for(var z=D.getText(),ue=f(P,function(zn,kr){var ao=zn.range.start.line-kr.range.start.line;return ao===0?zn.range.start.character-kr.range.start.character:ao}),le=z.length,St=ue.length-1;St>=0;St--){var _t=ue[St],At=D.offsetAt(_t.range.start),ae=D.offsetAt(_t.range.end);if(ae<=le)z=z.substring(0,At)+_t.newText+z.substring(ae,z.length);else throw new Error("Overlapping edit");le=At}return z}u.applyEdits=g;function f(D,P){if(D.length<=1)return D;var z=D.length/2|0,ue=D.slice(0,z),le=D.slice(z);f(ue,P),f(le,P);for(var St=0,_t=0,At=0;St<ue.length&&_t<le.length;){var ae=P(ue[St],le[_t]);ae<=0?D[At++]=ue[St++]:D[At++]=le[_t++]}for(;St<ue.length;)D[At++]=ue[St++];for(;_t<le.length;)D[At++]=le[_t++];return D}})($=e.TextDocument||(e.TextDocument={}));var G=function(){function u(w,b,g,f){this._uri=w,this._languageId=b,this._version=g,this._content=f,this._lineOffsets=void 0}return Object.defineProperty(u.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),u.prototype.getText=function(w){if(w){var b=this.offsetAt(w.start),g=this.offsetAt(w.end);return this._content.substring(b,g)}return this._content},u.prototype.update=function(w,b){this._content=w.text,this._version=b,this._lineOffsets=void 0},u.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var w=[],b=this._content,g=!0,f=0;f<b.length;f++){g&&(w.push(f),g=!1);var D=b.charAt(f);g=D==="\r"||D===`
`,D==="\r"&&f+1<b.length&&b.charAt(f+1)===`
`&&f++}g&&b.length>0&&w.push(b.length),this._lineOffsets=w}return this._lineOffsets},u.prototype.positionAt=function(w){w=Math.max(Math.min(w,this._content.length),0);var b=this.getLineOffsets(),g=0,f=b.length;if(f===0)return i.create(0,w);for(;g<f;){var D=Math.floor((g+f)/2);b[D]>w?f=D:g=D+1}var P=g-1;return i.create(P,w-b[P])},u.prototype.offsetAt=function(w){var b=this.getLineOffsets();if(w.line>=b.length)return this._content.length;if(w.line<0)return 0;var g=b[w.line],f=w.line+1<b.length?b[w.line+1]:this._content.length;return Math.max(Math.min(g+w.character,f),g)},Object.defineProperty(u.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),u}(),l;(function(u){var w=Object.prototype.toString;function b(ae){return typeof ae!="undefined"}u.defined=b;function g(ae){return typeof ae=="undefined"}u.undefined=g;function f(ae){return ae===!0||ae===!1}u.boolean=f;function D(ae){return w.call(ae)==="[object String]"}u.string=D;function P(ae){return w.call(ae)==="[object Number]"}u.number=P;function z(ae,zn,kr){return w.call(ae)==="[object Number]"&&zn<=ae&&ae<=kr}u.numberRange=z;function ue(ae){return w.call(ae)==="[object Number]"&&-2147483648<=ae&&ae<=2147483647}u.integer=ue;function le(ae){return w.call(ae)==="[object Number]"&&0<=ae&&ae<=2147483647}u.uinteger=le;function St(ae){return w.call(ae)==="[object Function]"}u.func=St;function _t(ae){return ae!==null&&typeof ae=="object"}u.objectLiteral=_t;function At(ae,zn){return Array.isArray(ae)&&ae.every(zn)}u.typedArray=At})(l||(l={}))})});var He=_(jt=>{"use strict";Object.defineProperty(jt,"__esModule",{value:!0});jt.ProtocolNotificationType=jt.ProtocolNotificationType0=jt.ProtocolRequestType=jt.ProtocolRequestType0=jt.RegistrationType=void 0;var Hr=mr(),of=class{constructor(e){this.method=e}};jt.RegistrationType=of;var sf=class extends Hr.RequestType0{constructor(e){super(e)}};jt.ProtocolRequestType0=sf;var af=class extends Hr.RequestType{constructor(e){super(e,Hr.ParameterStructures.byName)}};jt.ProtocolRequestType=af;var cf=class extends Hr.NotificationType0{constructor(e){super(e)}};jt.ProtocolNotificationType0=cf;var uf=class extends Hr.NotificationType{constructor(e){super(e,Hr.ParameterStructures.byName)}};jt.ProtocolNotificationType=uf});var ma=_(Ae=>{"use strict";Object.defineProperty(Ae,"__esModule",{value:!0});Ae.objectLiteral=Ae.typedArray=Ae.stringArray=Ae.array=Ae.func=Ae.error=Ae.number=Ae.string=Ae.boolean=void 0;function Nw(t){return t===!0||t===!1}Ae.boolean=Nw;function lf(t){return typeof t=="string"||t instanceof String}Ae.string=lf;function Aw(t){return typeof t=="number"||t instanceof Number}Ae.number=Aw;function Lw(t){return t instanceof Error}Ae.error=Lw;function Mw(t){return typeof t=="function"}Ae.func=Mw;function df(t){return Array.isArray(t)}Ae.array=df;function $w(t){return df(t)&&t.every(e=>lf(e))}Ae.stringArray=$w;function jw(t,e){return Array.isArray(t)&&t.every(e)}Ae.typedArray=jw;function Hw(t){return t!==null&&typeof t=="object"}Ae.objectLiteral=Hw});var ff=_(xi=>{"use strict";Object.defineProperty(xi,"__esModule",{value:!0});xi.ImplementationRequest=void 0;var Ww=He(),zw;(function(t){t.method="textDocument/implementation",t.type=new Ww.ProtocolRequestType(t.method)})(zw=xi.ImplementationRequest||(xi.ImplementationRequest={}))});var pf=_(ki=>{"use strict";Object.defineProperty(ki,"__esModule",{value:!0});ki.TypeDefinitionRequest=void 0;var Uw=He(),Kw;(function(t){t.method="textDocument/typeDefinition",t.type=new Uw.ProtocolRequestType(t.method)})(Kw=ki.TypeDefinitionRequest||(ki.TypeDefinitionRequest={}))});var gf=_(Kn=>{"use strict";Object.defineProperty(Kn,"__esModule",{value:!0});Kn.DidChangeWorkspaceFoldersNotification=Kn.WorkspaceFoldersRequest=void 0;var hf=He(),Bw;(function(t){t.type=new hf.ProtocolRequestType0("workspace/workspaceFolders")})(Bw=Kn.WorkspaceFoldersRequest||(Kn.WorkspaceFoldersRequest={}));var Gw;(function(t){t.type=new hf.ProtocolNotificationType("workspace/didChangeWorkspaceFolders")})(Gw=Kn.DidChangeWorkspaceFoldersNotification||(Kn.DidChangeWorkspaceFoldersNotification={}))});var mf=_(qi=>{"use strict";Object.defineProperty(qi,"__esModule",{value:!0});qi.ConfigurationRequest=void 0;var Vw=He(),Xw;(function(t){t.type=new Vw.ProtocolRequestType("workspace/configuration")})(Xw=qi.ConfigurationRequest||(qi.ConfigurationRequest={}))});var yf=_(Bn=>{"use strict";Object.defineProperty(Bn,"__esModule",{value:!0});Bn.ColorPresentationRequest=Bn.DocumentColorRequest=void 0;var vf=He(),Jw;(function(t){t.method="textDocument/documentColor",t.type=new vf.ProtocolRequestType(t.method)})(Jw=Bn.DocumentColorRequest||(Bn.DocumentColorRequest={}));var Yw;(function(t){t.type=new vf.ProtocolRequestType("textDocument/colorPresentation")})(Yw=Bn.ColorPresentationRequest||(Bn.ColorPresentationRequest={}))});var Cf=_(Gn=>{"use strict";Object.defineProperty(Gn,"__esModule",{value:!0});Gn.FoldingRangeRequest=Gn.FoldingRangeKind=void 0;var Qw=He(),Zw;(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(Zw=Gn.FoldingRangeKind||(Gn.FoldingRangeKind={}));var eR;(function(t){t.method="textDocument/foldingRange",t.type=new Qw.ProtocolRequestType(t.method)})(eR=Gn.FoldingRangeRequest||(Gn.FoldingRangeRequest={}))});var wf=_(Oi=>{"use strict";Object.defineProperty(Oi,"__esModule",{value:!0});Oi.DeclarationRequest=void 0;var tR=He(),nR;(function(t){t.method="textDocument/declaration",t.type=new tR.ProtocolRequestType(t.method)})(nR=Oi.DeclarationRequest||(Oi.DeclarationRequest={}))});var Rf=_(Ii=>{"use strict";Object.defineProperty(Ii,"__esModule",{value:!0});Ii.SelectionRangeRequest=void 0;var rR=He(),iR;(function(t){t.method="textDocument/selectionRange",t.type=new rR.ProtocolRequestType(t.method)})(iR=Ii.SelectionRangeRequest||(Ii.SelectionRangeRequest={}))});var Tf=_(Xt=>{"use strict";Object.defineProperty(Xt,"__esModule",{value:!0});Xt.WorkDoneProgressCancelNotification=Xt.WorkDoneProgressCreateRequest=Xt.WorkDoneProgress=void 0;var oR=mr(),bf=He(),sR;(function(t){t.type=new oR.ProgressType;function e(n){return n===t.type}t.is=e})(sR=Xt.WorkDoneProgress||(Xt.WorkDoneProgress={}));var aR;(function(t){t.type=new bf.ProtocolRequestType("window/workDoneProgress/create")})(aR=Xt.WorkDoneProgressCreateRequest||(Xt.WorkDoneProgressCreateRequest={}));var cR;(function(t){t.type=new bf.ProtocolNotificationType("window/workDoneProgress/cancel")})(cR=Xt.WorkDoneProgressCancelNotification||(Xt.WorkDoneProgressCancelNotification={}))});var Df=_(Jt=>{"use strict";Object.defineProperty(Jt,"__esModule",{value:!0});Jt.CallHierarchyOutgoingCallsRequest=Jt.CallHierarchyIncomingCallsRequest=Jt.CallHierarchyPrepareRequest=void 0;var va=He(),uR;(function(t){t.method="textDocument/prepareCallHierarchy",t.type=new va.ProtocolRequestType(t.method)})(uR=Jt.CallHierarchyPrepareRequest||(Jt.CallHierarchyPrepareRequest={}));var lR;(function(t){t.method="callHierarchy/incomingCalls",t.type=new va.ProtocolRequestType(t.method)})(lR=Jt.CallHierarchyIncomingCallsRequest||(Jt.CallHierarchyIncomingCallsRequest={}));var dR;(function(t){t.method="callHierarchy/outgoingCalls",t.type=new va.ProtocolRequestType(t.method)})(dR=Jt.CallHierarchyOutgoingCallsRequest||(Jt.CallHierarchyOutgoingCallsRequest={}))});var Sf=_(Le=>{"use strict";Object.defineProperty(Le,"__esModule",{value:!0});Le.SemanticTokensRefreshRequest=Le.SemanticTokensRangeRequest=Le.SemanticTokensDeltaRequest=Le.SemanticTokensRequest=Le.SemanticTokensRegistrationType=Le.TokenFormat=void 0;var Fi=He(),fR;(function(t){t.Relative="relative"})(fR=Le.TokenFormat||(Le.TokenFormat={}));var pR;(function(t){t.method="textDocument/semanticTokens",t.type=new Fi.RegistrationType(t.method)})(pR=Le.SemanticTokensRegistrationType||(Le.SemanticTokensRegistrationType={}));var hR;(function(t){t.method="textDocument/semanticTokens/full",t.type=new Fi.ProtocolRequestType(t.method)})(hR=Le.SemanticTokensRequest||(Le.SemanticTokensRequest={}));var gR;(function(t){t.method="textDocument/semanticTokens/full/delta",t.type=new Fi.ProtocolRequestType(t.method)})(gR=Le.SemanticTokensDeltaRequest||(Le.SemanticTokensDeltaRequest={}));var mR;(function(t){t.method="textDocument/semanticTokens/range",t.type=new Fi.ProtocolRequestType(t.method)})(mR=Le.SemanticTokensRangeRequest||(Le.SemanticTokensRangeRequest={}));var vR;(function(t){t.method="workspace/semanticTokens/refresh",t.type=new Fi.ProtocolRequestType0(t.method)})(vR=Le.SemanticTokensRefreshRequest||(Le.SemanticTokensRefreshRequest={}))});var _f=_(Ni=>{"use strict";Object.defineProperty(Ni,"__esModule",{value:!0});Ni.ShowDocumentRequest=void 0;var yR=He(),CR;(function(t){t.method="window/showDocument",t.type=new yR.ProtocolRequestType(t.method)})(CR=Ni.ShowDocumentRequest||(Ni.ShowDocumentRequest={}))});var Pf=_(Ai=>{"use strict";Object.defineProperty(Ai,"__esModule",{value:!0});Ai.LinkedEditingRangeRequest=void 0;var wR=He(),RR;(function(t){t.method="textDocument/linkedEditingRange",t.type=new wR.ProtocolRequestType(t.method)})(RR=Ai.LinkedEditingRangeRequest||(Ai.LinkedEditingRangeRequest={}))});var Ef=_(Se=>{"use strict";Object.defineProperty(Se,"__esModule",{value:!0});Se.WillDeleteFilesRequest=Se.DidDeleteFilesNotification=Se.DidRenameFilesNotification=Se.WillRenameFilesRequest=Se.DidCreateFilesNotification=Se.WillCreateFilesRequest=Se.FileOperationPatternKind=void 0;var Wr=He(),bR;(function(t){t.file="file",t.folder="folder"})(bR=Se.FileOperationPatternKind||(Se.FileOperationPatternKind={}));var TR;(function(t){t.method="workspace/willCreateFiles",t.type=new Wr.ProtocolRequestType(t.method)})(TR=Se.WillCreateFilesRequest||(Se.WillCreateFilesRequest={}));var DR;(function(t){t.method="workspace/didCreateFiles",t.type=new Wr.ProtocolNotificationType(t.method)})(DR=Se.DidCreateFilesNotification||(Se.DidCreateFilesNotification={}));var SR;(function(t){t.method="workspace/willRenameFiles",t.type=new Wr.ProtocolRequestType(t.method)})(SR=Se.WillRenameFilesRequest||(Se.WillRenameFilesRequest={}));var _R;(function(t){t.method="workspace/didRenameFiles",t.type=new Wr.ProtocolNotificationType(t.method)})(_R=Se.DidRenameFilesNotification||(Se.DidRenameFilesNotification={}));var PR;(function(t){t.method="workspace/didDeleteFiles",t.type=new Wr.ProtocolNotificationType(t.method)})(PR=Se.DidDeleteFilesNotification||(Se.DidDeleteFilesNotification={}));var ER;(function(t){t.method="workspace/willDeleteFiles",t.type=new Wr.ProtocolRequestType(t.method)})(ER=Se.WillDeleteFilesRequest||(Se.WillDeleteFilesRequest={}))});var xf=_(Yt=>{"use strict";Object.defineProperty(Yt,"__esModule",{value:!0});Yt.MonikerRequest=Yt.MonikerKind=Yt.UniquenessLevel=void 0;var xR=He(),kR;(function(t){t.document="document",t.project="project",t.group="group",t.scheme="scheme",t.global="global"})(kR=Yt.UniquenessLevel||(Yt.UniquenessLevel={}));var qR;(function(t){t.import="import",t.export="export",t.local="local"})(qR=Yt.MonikerKind||(Yt.MonikerKind={}));var OR;(function(t){t.method="textDocument/moniker",t.type=new xR.ProtocolRequestType(t.method)})(OR=Yt.MonikerRequest||(Yt.MonikerRequest={}))});var Ff=_(y=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0});y.DocumentLinkRequest=y.CodeLensRefreshRequest=y.CodeLensResolveRequest=y.CodeLensRequest=y.WorkspaceSymbolRequest=y.CodeActionResolveRequest=y.CodeActionRequest=y.DocumentSymbolRequest=y.DocumentHighlightRequest=y.ReferencesRequest=y.DefinitionRequest=y.SignatureHelpRequest=y.SignatureHelpTriggerKind=y.HoverRequest=y.CompletionResolveRequest=y.CompletionRequest=y.CompletionTriggerKind=y.PublishDiagnosticsNotification=y.WatchKind=y.FileChangeType=y.DidChangeWatchedFilesNotification=y.WillSaveTextDocumentWaitUntilRequest=y.WillSaveTextDocumentNotification=y.TextDocumentSaveReason=y.DidSaveTextDocumentNotification=y.DidCloseTextDocumentNotification=y.DidChangeTextDocumentNotification=y.TextDocumentContentChangeEvent=y.DidOpenTextDocumentNotification=y.TextDocumentSyncKind=y.TelemetryEventNotification=y.LogMessageNotification=y.ShowMessageRequest=y.ShowMessageNotification=y.MessageType=y.DidChangeConfigurationNotification=y.ExitNotification=y.ShutdownRequest=y.InitializedNotification=y.InitializeError=y.InitializeRequest=y.WorkDoneProgressOptions=y.TextDocumentRegistrationOptions=y.StaticRegistrationOptions=y.FailureHandlingKind=y.ResourceOperationKind=y.UnregistrationRequest=y.RegistrationRequest=y.DocumentSelector=y.DocumentFilter=void 0;y.MonikerRequest=y.MonikerKind=y.UniquenessLevel=y.WillDeleteFilesRequest=y.DidDeleteFilesNotification=y.WillRenameFilesRequest=y.DidRenameFilesNotification=y.WillCreateFilesRequest=y.DidCreateFilesNotification=y.FileOperationPatternKind=y.LinkedEditingRangeRequest=y.ShowDocumentRequest=y.SemanticTokensRegistrationType=y.SemanticTokensRefreshRequest=y.SemanticTokensRangeRequest=y.SemanticTokensDeltaRequest=y.SemanticTokensRequest=y.TokenFormat=y.CallHierarchyPrepareRequest=y.CallHierarchyOutgoingCallsRequest=y.CallHierarchyIncomingCallsRequest=y.WorkDoneProgressCancelNotification=y.WorkDoneProgressCreateRequest=y.WorkDoneProgress=y.SelectionRangeRequest=y.DeclarationRequest=y.FoldingRangeRequest=y.ColorPresentationRequest=y.DocumentColorRequest=y.ConfigurationRequest=y.DidChangeWorkspaceFoldersNotification=y.WorkspaceFoldersRequest=y.TypeDefinitionRequest=y.ImplementationRequest=y.ApplyWorkspaceEditRequest=y.ExecuteCommandRequest=y.PrepareRenameRequest=y.RenameRequest=y.PrepareSupportDefaultBehavior=y.DocumentOnTypeFormattingRequest=y.DocumentRangeFormattingRequest=y.DocumentFormattingRequest=y.DocumentLinkResolveRequest=void 0;var ee=He(),Vn=ma(),IR=ff();Object.defineProperty(y,"ImplementationRequest",{enumerable:!0,get:function(){return IR.ImplementationRequest}});var FR=pf();Object.defineProperty(y,"TypeDefinitionRequest",{enumerable:!0,get:function(){return FR.TypeDefinitionRequest}});var kf=gf();Object.defineProperty(y,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return kf.WorkspaceFoldersRequest}});Object.defineProperty(y,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return kf.DidChangeWorkspaceFoldersNotification}});var NR=mf();Object.defineProperty(y,"ConfigurationRequest",{enumerable:!0,get:function(){return NR.ConfigurationRequest}});var qf=yf();Object.defineProperty(y,"DocumentColorRequest",{enumerable:!0,get:function(){return qf.DocumentColorRequest}});Object.defineProperty(y,"ColorPresentationRequest",{enumerable:!0,get:function(){return qf.ColorPresentationRequest}});var AR=Cf();Object.defineProperty(y,"FoldingRangeRequest",{enumerable:!0,get:function(){return AR.FoldingRangeRequest}});var LR=wf();Object.defineProperty(y,"DeclarationRequest",{enumerable:!0,get:function(){return LR.DeclarationRequest}});var MR=Rf();Object.defineProperty(y,"SelectionRangeRequest",{enumerable:!0,get:function(){return MR.SelectionRangeRequest}});var ya=Tf();Object.defineProperty(y,"WorkDoneProgress",{enumerable:!0,get:function(){return ya.WorkDoneProgress}});Object.defineProperty(y,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return ya.WorkDoneProgressCreateRequest}});Object.defineProperty(y,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return ya.WorkDoneProgressCancelNotification}});var Ca=Df();Object.defineProperty(y,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return Ca.CallHierarchyIncomingCallsRequest}});Object.defineProperty(y,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return Ca.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(y,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return Ca.CallHierarchyPrepareRequest}});var zr=Sf();Object.defineProperty(y,"TokenFormat",{enumerable:!0,get:function(){return zr.TokenFormat}});Object.defineProperty(y,"SemanticTokensRequest",{enumerable:!0,get:function(){return zr.SemanticTokensRequest}});Object.defineProperty(y,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return zr.SemanticTokensDeltaRequest}});Object.defineProperty(y,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return zr.SemanticTokensRangeRequest}});Object.defineProperty(y,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return zr.SemanticTokensRefreshRequest}});Object.defineProperty(y,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return zr.SemanticTokensRegistrationType}});var $R=_f();Object.defineProperty(y,"ShowDocumentRequest",{enumerable:!0,get:function(){return $R.ShowDocumentRequest}});var jR=Pf();Object.defineProperty(y,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return jR.LinkedEditingRangeRequest}});var vr=Ef();Object.defineProperty(y,"FileOperationPatternKind",{enumerable:!0,get:function(){return vr.FileOperationPatternKind}});Object.defineProperty(y,"DidCreateFilesNotification",{enumerable:!0,get:function(){return vr.DidCreateFilesNotification}});Object.defineProperty(y,"WillCreateFilesRequest",{enumerable:!0,get:function(){return vr.WillCreateFilesRequest}});Object.defineProperty(y,"DidRenameFilesNotification",{enumerable:!0,get:function(){return vr.DidRenameFilesNotification}});Object.defineProperty(y,"WillRenameFilesRequest",{enumerable:!0,get:function(){return vr.WillRenameFilesRequest}});Object.defineProperty(y,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return vr.DidDeleteFilesNotification}});Object.defineProperty(y,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return vr.WillDeleteFilesRequest}});var wa=xf();Object.defineProperty(y,"UniquenessLevel",{enumerable:!0,get:function(){return wa.UniquenessLevel}});Object.defineProperty(y,"MonikerKind",{enumerable:!0,get:function(){return wa.MonikerKind}});Object.defineProperty(y,"MonikerRequest",{enumerable:!0,get:function(){return wa.MonikerRequest}});var Of;(function(t){function e(n){let r=n;return Vn.string(r.language)||Vn.string(r.scheme)||Vn.string(r.pattern)}t.is=e})(Of=y.DocumentFilter||(y.DocumentFilter={}));var If;(function(t){function e(n){if(!Array.isArray(n))return!1;for(let r of n)if(!Vn.string(r)&&!Of.is(r))return!1;return!0}t.is=e})(If=y.DocumentSelector||(y.DocumentSelector={}));var HR;(function(t){t.type=new ee.ProtocolRequestType("client/registerCapability")})(HR=y.RegistrationRequest||(y.RegistrationRequest={}));var WR;(function(t){t.type=new ee.ProtocolRequestType("client/unregisterCapability")})(WR=y.UnregistrationRequest||(y.UnregistrationRequest={}));var zR;(function(t){t.Create="create",t.Rename="rename",t.Delete="delete"})(zR=y.ResourceOperationKind||(y.ResourceOperationKind={}));var UR;(function(t){t.Abort="abort",t.Transactional="transactional",t.TextOnlyTransactional="textOnlyTransactional",t.Undo="undo"})(UR=y.FailureHandlingKind||(y.FailureHandlingKind={}));var KR;(function(t){function e(n){let r=n;return r&&Vn.string(r.id)&&r.id.length>0}t.hasId=e})(KR=y.StaticRegistrationOptions||(y.StaticRegistrationOptions={}));var BR;(function(t){function e(n){let r=n;return r&&(r.documentSelector===null||If.is(r.documentSelector))}t.is=e})(BR=y.TextDocumentRegistrationOptions||(y.TextDocumentRegistrationOptions={}));var GR;(function(t){function e(r){let i=r;return Vn.objectLiteral(i)&&(i.workDoneProgress===void 0||Vn.boolean(i.workDoneProgress))}t.is=e;function n(r){let i=r;return i&&Vn.boolean(i.workDoneProgress)}t.hasWorkDoneProgress=n})(GR=y.WorkDoneProgressOptions||(y.WorkDoneProgressOptions={}));var VR;(function(t){t.type=new ee.ProtocolRequestType("initialize")})(VR=y.InitializeRequest||(y.InitializeRequest={}));var XR;(function(t){t.unknownProtocolVersion=1})(XR=y.InitializeError||(y.InitializeError={}));var JR;(function(t){t.type=new ee.ProtocolNotificationType("initialized")})(JR=y.InitializedNotification||(y.InitializedNotification={}));var YR;(function(t){t.type=new ee.ProtocolRequestType0("shutdown")})(YR=y.ShutdownRequest||(y.ShutdownRequest={}));var QR;(function(t){t.type=new ee.ProtocolNotificationType0("exit")})(QR=y.ExitNotification||(y.ExitNotification={}));var ZR;(function(t){t.type=new ee.ProtocolNotificationType("workspace/didChangeConfiguration")})(ZR=y.DidChangeConfigurationNotification||(y.DidChangeConfigurationNotification={}));var eb;(function(t){t.Error=1,t.Warning=2,t.Info=3,t.Log=4})(eb=y.MessageType||(y.MessageType={}));var tb;(function(t){t.type=new ee.ProtocolNotificationType("window/showMessage")})(tb=y.ShowMessageNotification||(y.ShowMessageNotification={}));var nb;(function(t){t.type=new ee.ProtocolRequestType("window/showMessageRequest")})(nb=y.ShowMessageRequest||(y.ShowMessageRequest={}));var rb;(function(t){t.type=new ee.ProtocolNotificationType("window/logMessage")})(rb=y.LogMessageNotification||(y.LogMessageNotification={}));var ib;(function(t){t.type=new ee.ProtocolNotificationType("telemetry/event")})(ib=y.TelemetryEventNotification||(y.TelemetryEventNotification={}));var ob;(function(t){t.None=0,t.Full=1,t.Incremental=2})(ob=y.TextDocumentSyncKind||(y.TextDocumentSyncKind={}));var sb;(function(t){t.method="textDocument/didOpen",t.type=new ee.ProtocolNotificationType(t.method)})(sb=y.DidOpenTextDocumentNotification||(y.DidOpenTextDocumentNotification={}));var ab;(function(t){function e(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}t.isIncremental=e;function n(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}t.isFull=n})(ab=y.TextDocumentContentChangeEvent||(y.TextDocumentContentChangeEvent={}));var cb;(function(t){t.method="textDocument/didChange",t.type=new ee.ProtocolNotificationType(t.method)})(cb=y.DidChangeTextDocumentNotification||(y.DidChangeTextDocumentNotification={}));var ub;(function(t){t.method="textDocument/didClose",t.type=new ee.ProtocolNotificationType(t.method)})(ub=y.DidCloseTextDocumentNotification||(y.DidCloseTextDocumentNotification={}));var lb;(function(t){t.method="textDocument/didSave",t.type=new ee.ProtocolNotificationType(t.method)})(lb=y.DidSaveTextDocumentNotification||(y.DidSaveTextDocumentNotification={}));var db;(function(t){t.Manual=1,t.AfterDelay=2,t.FocusOut=3})(db=y.TextDocumentSaveReason||(y.TextDocumentSaveReason={}));var fb;(function(t){t.method="textDocument/willSave",t.type=new ee.ProtocolNotificationType(t.method)})(fb=y.WillSaveTextDocumentNotification||(y.WillSaveTextDocumentNotification={}));var pb;(function(t){t.method="textDocument/willSaveWaitUntil",t.type=new ee.ProtocolRequestType(t.method)})(pb=y.WillSaveTextDocumentWaitUntilRequest||(y.WillSaveTextDocumentWaitUntilRequest={}));var hb;(function(t){t.type=new ee.ProtocolNotificationType("workspace/didChangeWatchedFiles")})(hb=y.DidChangeWatchedFilesNotification||(y.DidChangeWatchedFilesNotification={}));var gb;(function(t){t.Created=1,t.Changed=2,t.Deleted=3})(gb=y.FileChangeType||(y.FileChangeType={}));var mb;(function(t){t.Create=1,t.Change=2,t.Delete=4})(mb=y.WatchKind||(y.WatchKind={}));var vb;(function(t){t.type=new ee.ProtocolNotificationType("textDocument/publishDiagnostics")})(vb=y.PublishDiagnosticsNotification||(y.PublishDiagnosticsNotification={}));var yb;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.TriggerForIncompleteCompletions=3})(yb=y.CompletionTriggerKind||(y.CompletionTriggerKind={}));var Cb;(function(t){t.method="textDocument/completion",t.type=new ee.ProtocolRequestType(t.method)})(Cb=y.CompletionRequest||(y.CompletionRequest={}));var wb;(function(t){t.method="completionItem/resolve",t.type=new ee.ProtocolRequestType(t.method)})(wb=y.CompletionResolveRequest||(y.CompletionResolveRequest={}));var Rb;(function(t){t.method="textDocument/hover",t.type=new ee.ProtocolRequestType(t.method)})(Rb=y.HoverRequest||(y.HoverRequest={}));var bb;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.ContentChange=3})(bb=y.SignatureHelpTriggerKind||(y.SignatureHelpTriggerKind={}));var Tb;(function(t){t.method="textDocument/signatureHelp",t.type=new ee.ProtocolRequestType(t.method)})(Tb=y.SignatureHelpRequest||(y.SignatureHelpRequest={}));var Db;(function(t){t.method="textDocument/definition",t.type=new ee.ProtocolRequestType(t.method)})(Db=y.DefinitionRequest||(y.DefinitionRequest={}));var Sb;(function(t){t.method="textDocument/references",t.type=new ee.ProtocolRequestType(t.method)})(Sb=y.ReferencesRequest||(y.ReferencesRequest={}));var _b;(function(t){t.method="textDocument/documentHighlight",t.type=new ee.ProtocolRequestType(t.method)})(_b=y.DocumentHighlightRequest||(y.DocumentHighlightRequest={}));var Pb;(function(t){t.method="textDocument/documentSymbol",t.type=new ee.ProtocolRequestType(t.method)})(Pb=y.DocumentSymbolRequest||(y.DocumentSymbolRequest={}));var Eb;(function(t){t.method="textDocument/codeAction",t.type=new ee.ProtocolRequestType(t.method)})(Eb=y.CodeActionRequest||(y.CodeActionRequest={}));var xb;(function(t){t.method="codeAction/resolve",t.type=new ee.ProtocolRequestType(t.method)})(xb=y.CodeActionResolveRequest||(y.CodeActionResolveRequest={}));var kb;(function(t){t.method="workspace/symbol",t.type=new ee.ProtocolRequestType(t.method)})(kb=y.WorkspaceSymbolRequest||(y.WorkspaceSymbolRequest={}));var qb;(function(t){t.method="textDocument/codeLens",t.type=new ee.ProtocolRequestType(t.method)})(qb=y.CodeLensRequest||(y.CodeLensRequest={}));var Ob;(function(t){t.method="codeLens/resolve",t.type=new ee.ProtocolRequestType(t.method)})(Ob=y.CodeLensResolveRequest||(y.CodeLensResolveRequest={}));var Ib;(function(t){t.method="workspace/codeLens/refresh",t.type=new ee.ProtocolRequestType0(t.method)})(Ib=y.CodeLensRefreshRequest||(y.CodeLensRefreshRequest={}));var Fb;(function(t){t.method="textDocument/documentLink",t.type=new ee.ProtocolRequestType(t.method)})(Fb=y.DocumentLinkRequest||(y.DocumentLinkRequest={}));var Nb;(function(t){t.method="documentLink/resolve",t.type=new ee.ProtocolRequestType(t.method)})(Nb=y.DocumentLinkResolveRequest||(y.DocumentLinkResolveRequest={}));var Ab;(function(t){t.method="textDocument/formatting",t.type=new ee.ProtocolRequestType(t.method)})(Ab=y.DocumentFormattingRequest||(y.DocumentFormattingRequest={}));var Lb;(function(t){t.method="textDocument/rangeFormatting",t.type=new ee.ProtocolRequestType(t.method)})(Lb=y.DocumentRangeFormattingRequest||(y.DocumentRangeFormattingRequest={}));var Mb;(function(t){t.method="textDocument/onTypeFormatting",t.type=new ee.ProtocolRequestType(t.method)})(Mb=y.DocumentOnTypeFormattingRequest||(y.DocumentOnTypeFormattingRequest={}));var $b;(function(t){t.Identifier=1})($b=y.PrepareSupportDefaultBehavior||(y.PrepareSupportDefaultBehavior={}));var jb;(function(t){t.method="textDocument/rename",t.type=new ee.ProtocolRequestType(t.method)})(jb=y.RenameRequest||(y.RenameRequest={}));var Hb;(function(t){t.method="textDocument/prepareRename",t.type=new ee.ProtocolRequestType(t.method)})(Hb=y.PrepareRenameRequest||(y.PrepareRenameRequest={}));var Wb;(function(t){t.type=new ee.ProtocolRequestType("workspace/executeCommand")})(Wb=y.ExecuteCommandRequest||(y.ExecuteCommandRequest={}));var zb;(function(t){t.type=new ee.ProtocolRequestType("workspace/applyEdit")})(zb=y.ApplyWorkspaceEditRequest||(y.ApplyWorkspaceEditRequest={}))});var Af=_(qo=>{"use strict";Object.defineProperty(qo,"__esModule",{value:!0});qo.createProtocolConnection=void 0;var Nf=mr();function Ub(t,e,n,r){return Nf.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),Nf.createMessageConnection(t,e,n,r)}qo.createProtocolConnection=Ub});var Mf=_(Qe=>{"use strict";Object.defineProperty(Qe,"__esModule",{value:!0});Qe.DiagnosticRefreshRequest=Qe.WorkspaceDiagnosticRequest=Qe.DocumentDiagnosticRequest=Qe.DocumentDiagnosticReportKind=Qe.DiagnosticServerCancellationData=void 0;var Lf=mr(),Kb=ma(),Ra=He(),Bb;(function(t){function e(n){let r=n;return r&&Kb.boolean(r.retriggerRequest)}t.is=e})(Bb=Qe.DiagnosticServerCancellationData||(Qe.DiagnosticServerCancellationData={}));var Gb;(function(t){t.full="full",t.unChanged="unChanged"})(Gb=Qe.DocumentDiagnosticReportKind||(Qe.DocumentDiagnosticReportKind={}));var Vb;(function(t){t.method="textDocument/diagnostic",t.type=new Ra.ProtocolRequestType(t.method),t.partialResult=new Lf.ProgressType})(Vb=Qe.DocumentDiagnosticRequest||(Qe.DocumentDiagnosticRequest={}));var Xb;(function(t){t.method="workspace/diagnostic",t.type=new Ra.ProtocolRequestType(t.method),t.partialResult=new Lf.ProgressType})(Xb=Qe.WorkspaceDiagnosticRequest||(Qe.WorkspaceDiagnosticRequest={}));var Jb;(function(t){t.method="workspace/diagnostic/refresh",t.type=new Ra.ProtocolRequestType0(t.method)})(Jb=Qe.DiagnosticRefreshRequest||(Qe.DiagnosticRefreshRequest={}))});var $f=_(Ue=>{"use strict";var Yb=Ue&&Ue.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Oo=Ue&&Ue.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Yb(e,t,n)};Object.defineProperty(Ue,"__esModule",{value:!0});Ue.Proposed=Ue.LSPErrorCodes=Ue.createProtocolConnection=void 0;Oo(mr(),Ue);Oo(rf(),Ue);Oo(He(),Ue);Oo(Ff(),Ue);var Qb=Af();Object.defineProperty(Ue,"createProtocolConnection",{enumerable:!0,get:function(){return Qb.createProtocolConnection}});var Zb;(function(t){t.lspReservedErrorRangeStart=-32899,t.ServerCancelled=-32802,t.ContentModified=-32801,t.RequestCancelled=-32800,t.lspReservedErrorRangeEnd=-32800})(Zb=Ue.LSPErrorCodes||(Ue.LSPErrorCodes={}));var Li=Mf(),eT;(function(t){t.DiagnosticServerCancellationData=Li.DiagnosticServerCancellationData,t.DocumentDiagnosticReportKind=Li.DocumentDiagnosticReportKind,t.DocumentDiagnosticRequest=Li.DocumentDiagnosticRequest,t.WorkspaceDiagnosticRequest=Li.WorkspaceDiagnosticRequest,t.DiagnosticRefreshRequest=Li.DiagnosticRefreshRequest})(eT=Ue.Proposed||(Ue.Proposed={}))});var we=_(cn=>{"use strict";var tT=cn&&cn.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),jf=cn&&cn.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&tT(e,t,n)};Object.defineProperty(cn,"__esModule",{value:!0});cn.createProtocolConnection=void 0;var nT=ga();jf(ga(),cn);jf($f(),cn);function rT(t,e,n,r){return nT.createMessageConnection(t,e,n,r)}cn.createProtocolConnection=rT});var Ta=_(Kr=>{"use strict";Object.defineProperty(Kr,"__esModule",{value:!0});Kr.toJSONObject=Kr.ConfigurationFeature=void 0;var ba=require("vscode"),iT=we(),Hf=class{constructor(e){this._client=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.configuration=!0}initialize(){let e=this._client;e.onRequest(iT.ConfigurationRequest.type,(n,r)=>{let i=s=>{let c=[];for(let a of s.items){let p=a.scopeUri!==void 0&&a.scopeUri!==null?this._client.protocol2CodeConverter.asUri(a.scopeUri):void 0;c.push(this.getConfiguration(p,a.section!==null?a.section:void 0))}return c},o=e.clientOptions.middleware.workspace;return o&&o.configuration?o.configuration(n,r,i):i(n,r)})}getConfiguration(e,n){let r=null;if(n){let i=n.lastIndexOf(".");if(i===-1)r=Ur(ba.workspace.getConfiguration(void 0,e).get(n));else{let o=ba.workspace.getConfiguration(n.substr(0,i),e);o&&(r=Ur(o.get(n.substr(i+1))))}}else{let i=ba.workspace.getConfiguration(void 0,e);r={};for(let o of Object.keys(i))i.has(o)&&(r[o]=Ur(i.get(o)))}return r===void 0&&(r=null),r}dispose(){}};Kr.ConfigurationFeature=Hf;function Ur(t){if(t){if(Array.isArray(t))return t.map(Ur);if(typeof t=="object"){let e=Object.create(null);for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=Ur(t[n]));return e}}return t}Kr.toJSONObject=Ur});var Sa=_(Da=>{"use strict";Object.defineProperty(Da,"__esModule",{value:!0});var oT=require("vscode"),Wf=class extends oT.CompletionItem{constructor(e){super(e)}};Da.default=Wf});var Pa=_(_a=>{"use strict";Object.defineProperty(_a,"__esModule",{value:!0});var sT=require("vscode"),zf=class extends sT.CodeLens{constructor(e){super(e)}};_a.default=zf});var xa=_(Ea=>{"use strict";Object.defineProperty(Ea,"__esModule",{value:!0});var aT=require("vscode"),Uf=class extends aT.DocumentLink{constructor(e,n){super(e,n)}};Ea.default=Uf});var qa=_(ka=>{"use strict";Object.defineProperty(ka,"__esModule",{value:!0});var cT=require("vscode"),Kf=class extends cT.CodeAction{constructor(e,n){super(e);this.data=n}};ka.default=Kf});var Ia=_(yr=>{"use strict";Object.defineProperty(yr,"__esModule",{value:!0});yr.ProtocolDiagnostic=yr.DiagnosticCode=void 0;var uT=require("vscode"),Oa=Sn(),lT;(function(t){function e(n){let r=n;return r!=null&&(Oa.number(r.value)||Oa.string(r.value))&&Oa.string(r.target)}t.is=e})(lT=yr.DiagnosticCode||(yr.DiagnosticCode={}));var Bf=class extends uT.Diagnostic{constructor(e,n,r,i){super(e,n,r);this.data=i,this.hasDiagnosticCode=!1}};yr.ProtocolDiagnostic=Bf});var Na=_(Fa=>{"use strict";Object.defineProperty(Fa,"__esModule",{value:!0});var dT=require("vscode"),Gf=class extends dT.CallHierarchyItem{constructor(e,n,r,i,o,s,c){super(e,n,r,i,o,s);c!==void 0&&(this.data=c)}};Fa.default=Gf});var Xf=_(Io=>{"use strict";Object.defineProperty(Io,"__esModule",{value:!0});Io.createConverter=void 0;var Ke=require("vscode"),he=we(),Br=Sn(),fT=Sa(),pT=Pa(),hT=xa(),gT=qa(),Vf=Ia(),mT=Na(),Mi=we(),Aa;(function(t){function e(n){let r=n;return r&&!!r.inserting&&!!r.replacing}t.is=e})(Aa||(Aa={}));function vT(t){let n=t||(l=>l.toString());function r(l){return n(l)}function i(l){return{uri:n(l.uri)}}function o(l){return{uri:n(l.uri),version:l.version}}function s(l){return{textDocument:{uri:n(l.uri),languageId:l.languageId,version:l.version,text:l.getText()}}}function c(l){let u=l;return!!u.document&&!!u.contentChanges}function a(l){let u=l;return!!u.uri&&!!u.version}function p(l){if(a(l))return{textDocument:{uri:n(l.uri),version:l.version},contentChanges:[{text:l.getText()}]};if(c(l)){let u=l.document;return{textDocument:{uri:n(u.uri),version:u.version},contentChanges:l.contentChanges.map(b=>{let g=b.range;return{range:{start:{line:g.start.line,character:g.start.character},end:{line:g.end.line,character:g.end.character}},rangeLength:b.rangeLength,text:b.text}})}}else throw Error("Unsupported text document change parameter")}function h(l){return{textDocument:i(l)}}function m(l,u=!1){let w={textDocument:i(l)};return u&&(w.text=l.getText()),w}function C(l){switch(l){case Ke.TextDocumentSaveReason.Manual:return he.TextDocumentSaveReason.Manual;case Ke.TextDocumentSaveReason.AfterDelay:return he.TextDocumentSaveReason.AfterDelay;case Ke.TextDocumentSaveReason.FocusOut:return he.TextDocumentSaveReason.FocusOut}return he.TextDocumentSaveReason.Manual}function v(l){return{textDocument:i(l.document),reason:C(l.reason)}}function S(l){return{files:l.files.map(u=>({uri:n(u)}))}}function k(l){return{files:l.files.map(u=>({oldUri:n(u.oldUri),newUri:n(u.newUri)}))}}function N(l){return{files:l.files.map(u=>({uri:n(u)}))}}function F(l){return{files:l.files.map(u=>({uri:n(u)}))}}function L(l){return{files:l.files.map(u=>({oldUri:n(u.oldUri),newUri:n(u.newUri)}))}}function E(l){return{files:l.files.map(u=>({uri:n(u)}))}}function M(l,u){return{textDocument:i(l),position:yt(u)}}function q(l){switch(l){case Ke.CompletionTriggerKind.TriggerCharacter:return he.CompletionTriggerKind.TriggerCharacter;case Ke.CompletionTriggerKind.TriggerForIncompleteCompletions:return he.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return he.CompletionTriggerKind.Invoked}}function B(l,u,w){return{textDocument:i(l),position:yt(u),context:{triggerKind:q(w.triggerKind),triggerCharacter:w.triggerCharacter}}}function X(l){switch(l){case Ke.SignatureHelpTriggerKind.Invoke:return he.SignatureHelpTriggerKind.Invoked;case Ke.SignatureHelpTriggerKind.TriggerCharacter:return he.SignatureHelpTriggerKind.TriggerCharacter;case Ke.SignatureHelpTriggerKind.ContentChange:return he.SignatureHelpTriggerKind.ContentChange}}function Me(l){return{label:l.label}}function xe(l){return l.map(Me)}function Xe(l){return{label:l.label,parameters:xe(l.parameters)}}function ct(l){return l.map(Xe)}function $e(l){return l===void 0?l:{signatures:ct(l.signatures),activeSignature:l.activeSignature,activeParameter:l.activeParameter}}function ut(l,u,w){return{textDocument:i(l),position:yt(u),context:{isRetrigger:w.isRetrigger,triggerCharacter:w.triggerCharacter,triggerKind:X(w.triggerKind),activeSignatureHelp:$e(w.activeSignatureHelp)}}}function yt(l){return{line:l.line,character:l.character}}function lt(l){return l==null?l:{line:l.line>Mi.uinteger.MAX_VALUE?Mi.uinteger.MAX_VALUE:l.line,character:l.character>Mi.uinteger.MAX_VALUE?Mi.uinteger.MAX_VALUE:l.character}}function Kt(l){let u=[];for(let w of l)u.push(lt(w));return u}function De(l){return l==null?l:{start:lt(l.start),end:lt(l.end)}}function dt(l){return l==null?l:he.Location.create(r(l.uri),De(l.range))}function ft(l){switch(l){case Ke.DiagnosticSeverity.Error:return he.DiagnosticSeverity.Error;case Ke.DiagnosticSeverity.Warning:return he.DiagnosticSeverity.Warning;case Ke.DiagnosticSeverity.Information:return he.DiagnosticSeverity.Information;case Ke.DiagnosticSeverity.Hint:return he.DiagnosticSeverity.Hint}}function et(l){if(!l)return;let u=[];for(let w of l){let b=Tt(w);b!==void 0&&u.push(b)}return u.length>0?u:void 0}function Tt(l){switch(l){case Ke.DiagnosticTag.Unnecessary:return he.DiagnosticTag.Unnecessary;case Ke.DiagnosticTag.Deprecated:return he.DiagnosticTag.Deprecated;default:return}}function qt(l){return{message:l.message,location:dt(l.location)}}function tr(l){return l.map(qt)}function $n(l){if(l!=null)return Br.number(l)||Br.string(l)?l:{value:l.value,target:r(l.target)}}function vn(l){let u=he.Diagnostic.create(De(l.range),l.message),w=l instanceof Vf.ProtocolDiagnostic?l:void 0;w!==void 0&&w.data!==void 0&&(u.data=w.data);let b=$n(l.code);return Vf.DiagnosticCode.is(b)?w!==void 0&&w.hasDiagnosticCode?u.code=b:(u.code=b.value,u.codeDescription={href:b.target}):u.code=b,Br.number(l.severity)&&(u.severity=ft(l.severity)),Array.isArray(l.tags)&&(u.tags=et(l.tags)),l.relatedInformation&&(u.relatedInformation=tr(l.relatedInformation)),l.source&&(u.source=l.source),u}function rn(l){return l==null?l:l.map(vn)}function nr(l,u){switch(l){case"$string":return u;case he.MarkupKind.PlainText:return{kind:l,value:u};case he.MarkupKind.Markdown:return{kind:l,value:u.value};default:return`Unsupported Markup content received. Kind is: ${l}`}}function on(l){switch(l){case Ke.CompletionItemTag.Deprecated:return he.CompletionItemTag.Deprecated}}function sn(l){if(l===void 0)return l;let u=[];for(let w of l){let b=on(w);b!==void 0&&u.push(b)}return u}function yn(l,u){return u!==void 0?u:l+1}function jn(l,u=!1){let w,b;Br.string(l.label)?w=l.label:(w=l.label.label,u&&(l.label.detail!==void 0||l.label.description!==void 0)&&(b={detail:l.label.detail,description:l.label.description}));let g={label:w};b!==void 0&&(g.labelDetails=b);let f=l instanceof fT.default?l:void 0;l.detail&&(g.detail=l.detail),l.documentation&&(!f||f.documentationFormat==="$string"?g.documentation=l.documentation:g.documentation=nr(f.documentationFormat,l.documentation)),l.filterText&&(g.filterText=l.filterText),rr(g,l),Br.number(l.kind)&&(g.kind=yn(l.kind,f&&f.originalItemKind)),l.sortText&&(g.sortText=l.sortText),l.additionalTextEdits&&(g.additionalTextEdits=Dt(l.additionalTextEdits)),l.commitCharacters&&(g.commitCharacters=l.commitCharacters.slice()),l.command&&(g.command=Ft(l.command)),(l.preselect===!0||l.preselect===!1)&&(g.preselect=l.preselect);let D=sn(l.tags);if(f){if(f.data!==void 0&&(g.data=f.data),f.deprecated===!0||f.deprecated===!1){if(f.deprecated===!0&&D!==void 0&&D.length>0){let P=D.indexOf(Ke.CompletionItemTag.Deprecated);P!==-1&&D.splice(P,1)}g.deprecated=f.deprecated}f.insertTextMode!==void 0&&(g.insertTextMode=f.insertTextMode)}return D!==void 0&&D.length>0&&(g.tags=D),g.insertTextMode===void 0&&l.keepWhitespace===!0&&(g.insertTextMode=Mi.InsertTextMode.adjustIndentation),g}function rr(l,u){let w=he.InsertTextFormat.PlainText,b,g;u.textEdit?(b=u.textEdit.newText,g=u.textEdit.range):u.insertText instanceof Ke.SnippetString?(w=he.InsertTextFormat.Snippet,b=u.insertText.value):b=u.insertText,u.range&&(g=u.range),l.insertTextFormat=w,u.fromEdit&&b!==void 0&&g!==void 0?l.textEdit=Ot(b,g):l.insertText=b}function Ot(l,u){return Aa.is(u)?he.InsertReplaceEdit.create(l,De(u.inserting),De(u.replacing)):{newText:l,range:De(u)}}function Cn(l){return{range:De(l.range),newText:l.newText}}function Dt(l){return l==null?l:l.map(Cn)}function Hn(l){return l<=Ke.SymbolKind.TypeParameter?l+1:he.SymbolKind.Property}function ke(l){return l}function Ct(l){return l.map(ke)}function ir(l,u,w){return{textDocument:i(l),position:yt(u),context:{includeDeclaration:w.includeDeclaration}}}function or(l){let u=he.CodeAction.create(l.title);if(l instanceof gT.default&&l.data!==void 0&&(u.data=l.data),l.kind!==void 0&&(u.kind=Wn(l.kind)),l.diagnostics!==void 0&&(u.diagnostics=rn(l.diagnostics)),l.edit!==void 0)throw new Error("VS Code code actions can only be converted to a protocol code action without an edit.");return l.command!==void 0&&(u.command=Ft(l.command)),l.isPreferred!==void 0&&(u.isPreferred=l.isPreferred),l.disabled!==void 0&&(u.disabled={reason:l.disabled.reason}),u}function It(l){if(l==null)return l;let u;return l.only&&Br.string(l.only.value)&&(u=[l.only.value]),he.CodeActionContext.create(rn(l.diagnostics),u)}function Wn(l){if(l!=null)return l.value}function Ft(l){let u=he.Command.create(l.title,l.command);return l.arguments&&(u.arguments=l.arguments),u}function wn(l){let u=he.CodeLens.create(De(l.range));return l.command&&(u.command=Ft(l.command)),l instanceof pT.default&&l.data&&(u.data=l.data),u}function Rn(l,u){let w={tabSize:l.tabSize,insertSpaces:l.insertSpaces};return u.trimTrailingWhitespace&&(w.trimTrailingWhitespace=!0),u.trimFinalNewlines&&(w.trimFinalNewlines=!0),u.insertFinalNewline&&(w.insertFinalNewline=!0),w}function Nt(l){return{textDocument:i(l)}}function T(l){return{textDocument:i(l)}}function O(l){let u=he.DocumentLink.create(De(l.range));l.target&&(u.target=r(l.target)),l.tooltip!==void 0&&(u.tooltip=l.tooltip);let w=l instanceof hT.default?l:void 0;return w&&w.data&&(u.data=w.data),u}function $(l){return{textDocument:i(l)}}function G(l){let u={name:l.name,kind:Hn(l.kind),uri:r(l.uri),range:De(l.range),selectionRange:De(l.selectionRange)};return l.detail!==void 0&&l.detail.length>0&&(u.detail=l.detail),l.tags!==void 0&&(u.tags=Ct(l.tags)),l instanceof mT.default&&l.data!==void 0&&(u.data=l.data),u}return{asUri:r,asTextDocumentIdentifier:i,asVersionedTextDocumentIdentifier:o,asOpenTextDocumentParams:s,asChangeTextDocumentParams:p,asCloseTextDocumentParams:h,asSaveTextDocumentParams:m,asWillSaveTextDocumentParams:v,asDidCreateFilesParams:S,asDidRenameFilesParams:k,asDidDeleteFilesParams:N,asWillCreateFilesParams:F,asWillRenameFilesParams:L,asWillDeleteFilesParams:E,asTextDocumentPositionParams:M,asCompletionParams:B,asSignatureHelpParams:ut,asWorkerPosition:yt,asRange:De,asPosition:lt,asPositions:Kt,asLocation:dt,asDiagnosticSeverity:ft,asDiagnosticTag:Tt,asDiagnostic:vn,asDiagnostics:rn,asCompletionItem:jn,asTextEdit:Cn,asSymbolKind:Hn,asSymbolTag:ke,asSymbolTags:Ct,asReferenceParams:ir,asCodeAction:or,asCodeActionContext:It,asCommand:Ft,asCodeLens:wn,asFormattingOptions:Rn,asDocumentSymbolParams:Nt,asCodeLensParams:T,asDocumentLink:O,asDocumentLinkParams:$,asCallHierarchyItem:G}}Io.createConverter=vT});var Yf=_(No=>{"use strict";Object.defineProperty(No,"__esModule",{value:!0});No.createConverter=void 0;var K=require("vscode"),oe=we(),Qt=Sn(),yT=Sa(),CT=Pa(),wT=xa(),RT=qa(),Jf=Ia(),bT=Na(),La=we(),Fo;(function(t){function e(n){let r=n;return r&&Qt.string(r.language)&&Qt.string(r.value)}t.is=e})(Fo||(Fo={}));function TT(t,e){let r=t||(d=>K.Uri.parse(d));function i(d){return r(d)}function o(d){return d.map(s)}function s(d){let x=new Jf.ProtocolDiagnostic(C(d.range),d.message,S(d.severity),d.data);return d.code!==void 0&&(oe.CodeDescription.is(d.codeDescription)?x.code={value:d.code,target:i(d.codeDescription.href)}:Jf.DiagnosticCode.is(d.code)?(x.hasDiagnosticCode=!0,x.code={value:d.code.value,target:i(d.code.target)}):x.code=d.code),d.source&&(x.source=d.source),d.relatedInformation&&(x.relatedInformation=c(d.relatedInformation)),Array.isArray(d.tags)&&(x.tags=p(d.tags)),x}function c(d){return d.map(a)}function a(d){return new K.DiagnosticRelatedInformation(dt(d.location),d.message)}function p(d){if(!d)return;let x=[];for(let ce of d){let J=h(ce);J!==void 0&&x.push(J)}return x.length>0?x:void 0}function h(d){switch(d){case oe.DiagnosticTag.Unnecessary:return K.DiagnosticTag.Unnecessary;case oe.DiagnosticTag.Deprecated:return K.DiagnosticTag.Deprecated;default:return}}function m(d){if(!!d)return new K.Position(d.line,d.character)}function C(d){if(!!d)return new K.Range(m(d.start),m(d.end))}function v(d){return d.map(x=>C(x))}function S(d){if(d==null)return K.DiagnosticSeverity.Error;switch(d){case oe.DiagnosticSeverity.Error:return K.DiagnosticSeverity.Error;case oe.DiagnosticSeverity.Warning:return K.DiagnosticSeverity.Warning;case oe.DiagnosticSeverity.Information:return K.DiagnosticSeverity.Information;case oe.DiagnosticSeverity.Hint:return K.DiagnosticSeverity.Hint}return K.DiagnosticSeverity.Error}function k(d){if(Qt.string(d))return F(d);if(Fo.is(d))return F().appendCodeblock(d.value,d.language);if(Array.isArray(d)){let x=[];for(let ce of d){let J=F();Fo.is(ce)?J.appendCodeblock(ce.value,ce.language):J.appendMarkdown(ce),x.push(J)}return x}else{let x;switch(d.kind){case oe.MarkupKind.Markdown:return F(d.value);case oe.MarkupKind.PlainText:return x=F(),x.appendText(d.value),x;default:return x=F(),x.appendText(`Unsupported Markup content received. Kind is: ${d.kind}`),x}}}function N(d){if(Qt.string(d))return d;switch(d.kind){case oe.MarkupKind.Markdown:return F(d.value);case oe.MarkupKind.PlainText:return d.value;default:return`Unsupported Markup content received. Kind is: ${d.kind}`}}function F(d){let x=new K.MarkdownString(d);return e===!0&&(x.isTrusted=e),x}function L(d){if(!!d)return new K.Hover(k(d.contents),C(d.range))}function E(d){if(!d)return;if(Array.isArray(d))return d.map(X);let x=d;return new K.CompletionList(x.items.map(X),x.isIncomplete)}function M(d){return oe.CompletionItemKind.Text<=d&&d<=oe.CompletionItemKind.TypeParameter?[d-1,void 0]:[K.CompletionItemKind.Text,d]}function q(d){switch(d){case oe.CompletionItemTag.Deprecated:return K.CompletionItemTag.Deprecated}}function B(d){if(d==null)return[];let x=[];for(let ce of d){let J=q(ce);J!==void 0&&x.push(J)}return x}function X(d){let x=B(d.tags),ce=Me(d),J=new yT.default(ce);d.detail&&(J.detail=d.detail),d.documentation&&(J.documentation=N(d.documentation),J.documentationFormat=Qt.string(d.documentation)?"$string":d.documentation.kind),d.filterText&&(J.filterText=d.filterText);let fe=xe(d);if(fe&&(J.insertText=fe.text,J.range=fe.range,J.fromEdit=fe.fromEdit),Qt.number(d.kind)){let[qr,bn]=M(d.kind);J.kind=qr,bn&&(J.originalItemKind=bn)}return d.sortText&&(J.sortText=d.sortText),d.additionalTextEdits&&(J.additionalTextEdits=$e(d.additionalTextEdits)),Qt.stringArray(d.commitCharacters)&&(J.commitCharacters=d.commitCharacters.slice()),d.command&&(J.command=Dt(d.command)),(d.deprecated===!0||d.deprecated===!1)&&(J.deprecated=d.deprecated,d.deprecated===!0&&x.push(K.CompletionItemTag.Deprecated)),(d.preselect===!0||d.preselect===!1)&&(J.preselect=d.preselect),d.data!==void 0&&(J.data=d.data),x.length>0&&(J.tags=x),d.insertTextMode!==void 0&&(J.insertTextMode=d.insertTextMode,d.insertTextMode===La.InsertTextMode.asIs&&(J.keepWhitespace=!0)),J}function Me(d){return La.CompletionItemLabelDetails.is(d.labelDetails)?{label:d.label,detail:d.labelDetails.detail,description:d.labelDetails.description}:d.label}function xe(d){return d.textEdit?d.insertTextFormat===oe.InsertTextFormat.Snippet?{text:new K.SnippetString(d.textEdit.newText),range:Xe(d.textEdit),fromEdit:!0}:{text:d.textEdit.newText,range:Xe(d.textEdit),fromEdit:!0}:d.insertText?d.insertTextFormat===oe.InsertTextFormat.Snippet?{text:new K.SnippetString(d.insertText),fromEdit:!1}:{text:d.insertText,fromEdit:!1}:void 0}function Xe(d){return oe.InsertReplaceEdit.is(d)?{inserting:C(d.insert),replacing:C(d.replace)}:C(d.range)}function ct(d){if(!!d)return new K.TextEdit(C(d.range),d.newText)}function $e(d){if(!!d)return d.map(ct)}function ut(d){if(!d)return;let x=new K.SignatureHelp;return Qt.number(d.activeSignature)?x.activeSignature=d.activeSignature:x.activeSignature=0,Qt.number(d.activeParameter)?x.activeParameter=d.activeParameter:x.activeParameter=0,d.signatures&&(x.signatures=yt(d.signatures)),x}function yt(d){return d.map(lt)}function lt(d){let x=new K.SignatureInformation(d.label);return d.documentation!==void 0&&(x.documentation=N(d.documentation)),d.parameters!==void 0&&(x.parameters=Kt(d.parameters)),d.activeParameter!==void 0&&(x.activeParameter=d.activeParameter),x}function Kt(d){return d.map(De)}function De(d){let x=new K.ParameterInformation(d.label);return d.documentation&&(x.documentation=N(d.documentation)),x}function dt(d){if(!!d)return new K.Location(r(d.uri),C(d.range))}function ft(d){if(!!d)return qt(d)}function et(d){if(!!d)return qt(d)}function Tt(d){if(!d)return;let x={targetUri:r(d.targetUri),targetRange:C(d.targetRange),originSelectionRange:C(d.originSelectionRange),targetSelectionRange:C(d.targetSelectionRange)};if(!x.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return x}function qt(d){if(!!d)return Qt.array(d)?d.length===0?[]:oe.LocationLink.is(d[0])?d.map(ce=>Tt(ce)):d.map(ce=>dt(ce)):oe.LocationLink.is(d)?[Tt(d)]:dt(d)}function tr(d){if(!!d)return d.map(x=>dt(x))}function $n(d){if(!!d)return d.map(vn)}function vn(d){let x=new K.DocumentHighlight(C(d.range));return Qt.number(d.kind)&&(x.kind=rn(d.kind)),x}function rn(d){switch(d){case oe.DocumentHighlightKind.Text:return K.DocumentHighlightKind.Text;case oe.DocumentHighlightKind.Read:return K.DocumentHighlightKind.Read;case oe.DocumentHighlightKind.Write:return K.DocumentHighlightKind.Write}return K.DocumentHighlightKind.Text}function nr(d,x){if(!!d)return d.map(ce=>jn(ce,x))}function on(d){return d<=oe.SymbolKind.TypeParameter?d-1:K.SymbolKind.Property}function sn(d){switch(d){case oe.SymbolTag.Deprecated:return K.SymbolTag.Deprecated;default:return}}function yn(d){if(d==null)return;let x=[];for(let ce of d){let J=sn(ce);J!==void 0&&x.push(J)}return x.length===0?void 0:x}function jn(d,x){let ce=new K.SymbolInformation(d.name,on(d.kind),C(d.location.range),d.location.uri?r(d.location.uri):x);return Cn(ce,d),d.containerName&&(ce.containerName=d.containerName),ce}function rr(d){if(d!=null)return d.map(Ot)}function Ot(d){let x=new K.DocumentSymbol(d.name,d.detail||"",on(d.kind),C(d.range),C(d.selectionRange));if(Cn(x,d),d.children!==void 0&&d.children.length>0){let ce=[];for(let J of d.children)ce.push(Ot(J));x.children=ce}return x}function Cn(d,x){d.tags=yn(x.tags),x.deprecated&&(d.tags?d.tags.includes(K.SymbolTag.Deprecated)||(d.tags=d.tags.concat(K.SymbolTag.Deprecated)):d.tags=[K.SymbolTag.Deprecated])}function Dt(d){let x={title:d.title,command:d.command};return d.arguments&&(x.arguments=d.arguments),x}function Hn(d){if(!!d)return d.map(Dt)}let ke=new Map;ke.set(oe.CodeActionKind.Empty,K.CodeActionKind.Empty),ke.set(oe.CodeActionKind.QuickFix,K.CodeActionKind.QuickFix),ke.set(oe.CodeActionKind.Refactor,K.CodeActionKind.Refactor),ke.set(oe.CodeActionKind.RefactorExtract,K.CodeActionKind.RefactorExtract),ke.set(oe.CodeActionKind.RefactorInline,K.CodeActionKind.RefactorInline),ke.set(oe.CodeActionKind.RefactorRewrite,K.CodeActionKind.RefactorRewrite),ke.set(oe.CodeActionKind.Source,K.CodeActionKind.Source),ke.set(oe.CodeActionKind.SourceOrganizeImports,K.CodeActionKind.SourceOrganizeImports);function Ct(d){if(d==null)return;let x=ke.get(d);if(x)return x;let ce=d.split(".");x=K.CodeActionKind.Empty;for(let J of ce)x=x.append(J);return x}function ir(d){if(d!=null)return d.map(x=>Ct(x))}function or(d){if(d==null)return;let x=new RT.default(d.title,d.data);return d.kind!==void 0&&(x.kind=Ct(d.kind)),d.diagnostics!==void 0&&(x.diagnostics=o(d.diagnostics)),d.edit!==void 0&&(x.edit=Ft(d.edit)),d.command!==void 0&&(x.command=Dt(d.command)),d.isPreferred!==void 0&&(x.isPreferred=d.isPreferred),d.disabled!==void 0&&(x.disabled={reason:d.disabled.reason}),x}function It(d){if(!d)return;let x=new CT.default(C(d.range));return d.command&&(x.command=Dt(d.command)),d.data!==void 0&&d.data!==null&&(x.data=d.data),x}function Wn(d){if(!!d)return d.map(x=>It(x))}function Ft(d){if(!d)return;let x=new Map;if(d.changeAnnotations!==void 0)for(let fe of Object.keys(d.changeAnnotations)){let qr=wn(d.changeAnnotations[fe]);x.set(fe,qr)}let ce=fe=>{if(fe!==void 0)return x.get(fe)},J=new K.WorkspaceEdit;if(d.documentChanges)for(let fe of d.documentChanges)if(oe.CreateFile.is(fe))J.createFile(r(fe.uri),fe.options,ce(fe.annotationId));else if(oe.RenameFile.is(fe))J.renameFile(r(fe.oldUri),r(fe.newUri),fe.options,ce(fe.annotationId));else if(oe.DeleteFile.is(fe))J.deleteFile(r(fe.uri),fe.options,ce(fe.annotationId));else if(oe.TextDocumentEdit.is(fe)){let qr=r(fe.textDocument.uri);for(let bn of fe.edits)La.AnnotatedTextEdit.is(bn)?J.replace(qr,C(bn.range),bn.newText,ce(bn.annotationId)):J.replace(qr,C(bn.range),bn.newText)}else throw new Error(`Unknown workspace edit change received:
${JSON.stringify(fe,void 0,4)}`);else d.changes&&Object.keys(d.changes).forEach(fe=>{J.set(r(fe),$e(d.changes[fe]))});return J}function wn(d){if(d!==void 0)return{label:d.label,needsConfirmation:!!d.needsConfirmation,description:d.description}}function Rn(d){let x=C(d.range),ce=d.target?i(d.target):void 0,J=new wT.default(x,ce);return d.tooltip!==void 0&&(J.tooltip=d.tooltip),d.data!==void 0&&d.data!==null&&(J.data=d.data),J}function Nt(d){if(!!d)return d.map(Rn)}function T(d){return new K.Color(d.red,d.green,d.blue,d.alpha)}function O(d){return new K.ColorInformation(C(d.range),T(d.color))}function $(d){if(Array.isArray(d))return d.map(O)}function G(d){let x=new K.ColorPresentation(d.label);return x.additionalTextEdits=$e(d.additionalTextEdits),d.textEdit&&(x.textEdit=ct(d.textEdit)),x}function l(d){if(Array.isArray(d))return d.map(G)}function u(d){if(d)switch(d){case oe.FoldingRangeKind.Comment:return K.FoldingRangeKind.Comment;case oe.FoldingRangeKind.Imports:return K.FoldingRangeKind.Imports;case oe.FoldingRangeKind.Region:return K.FoldingRangeKind.Region}}function w(d){return new K.FoldingRange(d.startLine,d.endLine,u(d.kind))}function b(d){if(Array.isArray(d))return d.map(w)}function g(d){return new K.SelectionRange(C(d.range),d.parent?g(d.parent):void 0)}function f(d){if(!Array.isArray(d))return[];let x=[];for(let ce of d)x.push(g(ce));return x}function D(d){if(d===null)return;let x=new bT.default(on(d.kind),d.name,d.detail||"",i(d.uri),C(d.range),C(d.selectionRange),d.data);return d.tags!==void 0&&(x.tags=yn(d.tags)),x}function P(d){if(d!==null)return d.map(x=>D(x))}function z(d){return new K.CallHierarchyIncomingCall(D(d.from),v(d.fromRanges))}function ue(d){if(d!==null)return d.map(x=>z(x))}function le(d){return new K.CallHierarchyOutgoingCall(D(d.to),v(d.fromRanges))}function St(d){if(d!==null)return d.map(x=>le(x))}function _t(d){if(d!=null)return new K.SemanticTokens(new Uint32Array(d.data),d.resultId)}function At(d){return new K.SemanticTokensEdit(d.start,d.deleteCount,d.data!==void 0?new Uint32Array(d.data):void 0)}function ae(d){if(d!=null)return new K.SemanticTokensEdits(d.edits.map(At),d.resultId)}function zn(d){return d}function kr(d){if(d!=null)return new K.LinkedEditingRanges(v(d.ranges),ao(d.wordPattern))}function ao(d){if(d!=null)return new RegExp(d)}return{asUri:i,asDiagnostics:o,asDiagnostic:s,asRange:C,asRanges:v,asPosition:m,asDiagnosticSeverity:S,asDiagnosticTag:h,asHover:L,asCompletionResult:E,asCompletionItem:X,asTextEdit:ct,asTextEdits:$e,asSignatureHelp:ut,asSignatureInformations:yt,asSignatureInformation:lt,asParameterInformations:Kt,asParameterInformation:De,asDeclarationResult:ft,asDefinitionResult:et,asLocation:dt,asReferences:tr,asDocumentHighlights:$n,asDocumentHighlight:vn,asDocumentHighlightKind:rn,asSymbolKind:on,asSymbolTag:sn,asSymbolTags:yn,asSymbolInformations:nr,asSymbolInformation:jn,asDocumentSymbols:rr,asDocumentSymbol:Ot,asCommand:Dt,asCommands:Hn,asCodeAction:or,asCodeActionKind:Ct,asCodeActionKinds:ir,asCodeLens:It,asCodeLenses:Wn,asWorkspaceEdit:Ft,asDocumentLink:Rn,asDocumentLinks:Nt,asFoldingRangeKind:u,asFoldingRange:w,asFoldingRanges:b,asColor:T,asColorInformation:O,asColorInformations:$,asColorPresentation:G,asColorPresentations:l,asSelectionRange:g,asSelectionRanges:f,asSemanticTokensLegend:zn,asSemanticTokens:_t,asSemanticTokensEdit:At,asSemanticTokensEdits:ae,asCallHierarchyItem:D,asCallHierarchyItems:P,asCallHierarchyIncomingCall:z,asCallHierarchyIncomingCalls:ue,asCallHierarchyOutgoingCall:le,asCallHierarchyOutgoingCalls:St,asLinkedEditingRanges:kr}}No.createConverter=TT});var Zf=_(Ao=>{"use strict";Object.defineProperty(Ao,"__esModule",{value:!0});Ao.Delayer=void 0;var DT=we(),Qf=class{constructor(e){this.defaultDelay=e,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(e,n=this.defaultDelay){return this.task=e,n>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(r=>{this.onSuccess=r}).then(()=>{this.completionPromise=void 0,this.onSuccess=void 0;var r=this.task();return this.task=void 0,r})),(n>=0||this.timeout===void 0)&&(this.timeout=DT.RAL().timer.setTimeout(()=>{this.timeout=void 0,this.onSuccess(void 0)},n>=0?n:this.defaultDelay)),this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let e=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,e}isTriggered(){return this.timeout!==void 0}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){this.timeout!==void 0&&(this.timeout.dispose(),this.timeout=void 0)}};Ao.Delayer=Qf});var $i=_(Ht=>{"use strict";Object.defineProperty(Ht,"__esModule",{value:!0});Ht.generateUuid=Ht.parse=Ht.isUUID=Ht.v4=Ht.empty=void 0;var Lo=class{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},se=class extends Lo{constructor(){super([se._randomHex(),se._randomHex(),se._randomHex(),se._randomHex(),se._randomHex(),se._randomHex(),se._randomHex(),se._randomHex(),"-",se._randomHex(),se._randomHex(),se._randomHex(),se._randomHex(),"-","4",se._randomHex(),se._randomHex(),se._randomHex(),"-",se._oneOf(se._timeHighBits),se._randomHex(),se._randomHex(),se._randomHex(),"-",se._randomHex(),se._randomHex(),se._randomHex(),se._randomHex(),se._randomHex(),se._randomHex(),se._randomHex(),se._randomHex(),se._randomHex(),se._randomHex(),se._randomHex(),se._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return se._oneOf(se._chars)}};se._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];se._timeHighBits=["8","9","a","b"];Ht.empty=new Lo("00000000-0000-0000-0000-000000000000");function ep(){return new se}Ht.v4=ep;var ST=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function tp(t){return ST.test(t)}Ht.isUUID=tp;function _T(t){if(!tp(t))throw new Error("invalid uuid");return new Lo(t)}Ht.parse=_T;function PT(){return ep().asHex()}Ht.generateUuid=PT});var Ma=_(Mo=>{"use strict";Object.defineProperty(Mo,"__esModule",{value:!0});Mo.ProgressPart=void 0;var np=require("vscode"),rp=we(),ip=Sn(),op=class{constructor(e,n,r){this._client=e,this._token=n,this._reported=0,this._disposable=this._client.onProgress(rp.WorkDoneProgress.type,this._token,i=>{switch(i.kind){case"begin":this.begin(i);break;case"report":this.report(i);break;case"end":this.done(),r&&r(this);break}})}begin(e){np.window.withProgress({location:np.ProgressLocation.Window,cancellable:e.cancellable,title:e.title},async(n,r)=>(this._progress=n,this._infinite=e.percentage===void 0,this._cancellationToken=r,this._cancellationToken.onCancellationRequested(()=>{this._client.sendNotification(rp.WorkDoneProgressCancelNotification.type,{token:this._token})}),this.report(e),new Promise((i,o)=>{this._resolve=i,this._reject=o})))}report(e){if(this._infinite&&ip.string(e.message))this._progress.report({message:e.message});else if(ip.number(e.percentage)){let n=Math.max(0,Math.min(e.percentage,100)),r=Math.max(0,n-this._reported);this._progress.report({message:e.message,increment:r}),this._reported+=r}}cancel(){this._disposable&&(this._disposable.dispose(),this._disposable=void 0),this._reject&&(this._reject(),this._resolve=void 0,this._reject=void 0)}done(){this._disposable&&(this._disposable.dispose(),this._disposable=void 0),this._resolve&&(this._resolve(),this._resolve=void 0,this._reject=void 0)}};Mo.ProgressPart=op});var Rt=_(ve=>{"use strict";Object.defineProperty(ve,"__esModule",{value:!0});ve.BaseLanguageClient=ve.LSPCancellationError=ve.MessageTransports=ve.TextDocumentFeature=ve.State=ve.RevealOutputChannelOn=ve.DiagnosticPullMode=ve.CloseAction=ve.ErrorAction=void 0;var j=require("vscode"),R=we(),ET=Ta(),xT=Xf(),kT=Yf(),ge=Sn(),sp=Zf(),me=$i(),qT=Ma(),ap=class{error(e){R.RAL().console.error(e)}warn(e){R.RAL().console.warn(e)}info(e){R.RAL().console.info(e)}log(e){R.RAL().console.log(e)}};function OT(t,e,n,r,i){let o=new ap,s=R.createProtocolConnection(t,e,o,i);return s.onError(a=>{n(a[0],a[1],a[2])}),s.onClose(r),{listen:()=>s.listen(),sendRequest:(a,...p)=>s.sendRequest(a,...p),onRequest:(a,p)=>s.onRequest(a,p),sendNotification:(a,p)=>s.sendNotification(a,p),onNotification:(a,p)=>s.onNotification(a,p),onProgress:s.onProgress,sendProgress:s.sendProgress,trace:(a,p,h)=>{let m={sendNotification:!1,traceFormat:R.TraceFormat.Text};h===void 0?s.trace(a,p,m):(ge.boolean(h),s.trace(a,p,h))},initialize:a=>s.sendRequest(R.InitializeRequest.type,a),shutdown:()=>s.sendRequest(R.ShutdownRequest.type,void 0),exit:()=>s.sendNotification(R.ExitNotification.type),onLogMessage:a=>s.onNotification(R.LogMessageNotification.type,a),onShowMessage:a=>s.onNotification(R.ShowMessageNotification.type,a),onTelemetry:a=>s.onNotification(R.TelemetryEventNotification.type,a),didChangeConfiguration:a=>s.sendNotification(R.DidChangeConfigurationNotification.type,a),didChangeWatchedFiles:a=>s.sendNotification(R.DidChangeWatchedFilesNotification.type,a),didOpenTextDocument:a=>s.sendNotification(R.DidOpenTextDocumentNotification.type,a),didChangeTextDocument:a=>s.sendNotification(R.DidChangeTextDocumentNotification.type,a),didCloseTextDocument:a=>s.sendNotification(R.DidCloseTextDocumentNotification.type,a),didSaveTextDocument:a=>s.sendNotification(R.DidSaveTextDocumentNotification.type,a),onDiagnostics:a=>s.onNotification(R.PublishDiagnosticsNotification.type,a),end:()=>s.end(),dispose:()=>s.dispose()}}var $o;(function(t){t[t.Continue=1]="Continue",t[t.Shutdown=2]="Shutdown"})($o=ve.ErrorAction||(ve.ErrorAction={}));var Cr;(function(t){t[t.DoNotRestart=1]="DoNotRestart",t[t.Restart=2]="Restart"})(Cr=ve.CloseAction||(ve.CloseAction={}));var cp=class{constructor(e,n){this.name=e,this.maxRestartCount=n,this.restarts=[]}error(e,n,r){return r&&r<=3?$o.Continue:$o.Shutdown}closed(){return this.restarts.push(Date.now()),this.restarts.length<=this.maxRestartCount?Cr.Restart:this.restarts[this.restarts.length-1]-this.restarts[0]<=3*60*1e3?(j.window.showErrorMessage(`The ${this.name} server crashed ${this.maxRestartCount+1} times in the last 3 minutes. The server will not be restarted.`),Cr.DoNotRestart):(this.restarts.shift(),Cr.Restart)}},IT;(function(t){t.onType="onType",t.onSave="onSave"})(IT=ve.DiagnosticPullMode||(ve.DiagnosticPullMode={}));var ji;(function(t){t[t.Info=1]="Info",t[t.Warn=2]="Warn",t[t.Error=3]="Error",t[t.Never=4]="Never"})(ji=ve.RevealOutputChannelOn||(ve.RevealOutputChannelOn={}));var jo;(function(t){t[t.Stopped=1]="Stopped",t[t.Starting=3]="Starting",t[t.Running=2]="Running"})(jo=ve.State||(ve.State={}));var Re;(function(t){t[t.Initial=0]="Initial",t[t.Starting=1]="Starting",t[t.StartFailed=2]="StartFailed",t[t.Running=3]="Running",t[t.Stopping=4]="Stopping",t[t.Stopped=5]="Stopped"})(Re||(Re={}));var up=[R.SymbolKind.File,R.SymbolKind.Module,R.SymbolKind.Namespace,R.SymbolKind.Package,R.SymbolKind.Class,R.SymbolKind.Method,R.SymbolKind.Property,R.SymbolKind.Field,R.SymbolKind.Constructor,R.SymbolKind.Enum,R.SymbolKind.Interface,R.SymbolKind.Function,R.SymbolKind.Variable,R.SymbolKind.Constant,R.SymbolKind.String,R.SymbolKind.Number,R.SymbolKind.Boolean,R.SymbolKind.Array,R.SymbolKind.Object,R.SymbolKind.Key,R.SymbolKind.Null,R.SymbolKind.EnumMember,R.SymbolKind.Struct,R.SymbolKind.Event,R.SymbolKind.Operator,R.SymbolKind.TypeParameter],FT=[R.CompletionItemKind.Text,R.CompletionItemKind.Method,R.CompletionItemKind.Function,R.CompletionItemKind.Constructor,R.CompletionItemKind.Field,R.CompletionItemKind.Variable,R.CompletionItemKind.Class,R.CompletionItemKind.Interface,R.CompletionItemKind.Module,R.CompletionItemKind.Property,R.CompletionItemKind.Unit,R.CompletionItemKind.Value,R.CompletionItemKind.Enum,R.CompletionItemKind.Keyword,R.CompletionItemKind.Snippet,R.CompletionItemKind.Color,R.CompletionItemKind.File,R.CompletionItemKind.Reference,R.CompletionItemKind.Folder,R.CompletionItemKind.EnumMember,R.CompletionItemKind.Constant,R.CompletionItemKind.Struct,R.CompletionItemKind.Event,R.CompletionItemKind.Operator,R.CompletionItemKind.TypeParameter],lp=[R.SymbolTag.Deprecated];function V(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var Hi;(function(t){function e(n){let r=j.workspace.getConfiguration("files",n);return{trimTrailingWhitespace:r.get("trimTrailingWhitespace"),trimFinalNewlines:r.get("trimFinalNewlines"),insertFinalNewline:r.get("insertFinalNewline")}}t.fromConfiguration=e})(Hi||(Hi={}));var $a;(function(t){function e(n){let r=n;return r&&ge.func(r.register)&&ge.func(r.unregister)&&ge.func(r.dispose)&&r.registrationType!==void 0}t.is=e})($a||($a={}));var un=class{constructor(e,n,r,i,o,s){this._client=e,this._event=n,this._type=r,this._middleware=i,this._createParams=o,this._selectorFilter=s,this._selectors=new Map,this._onNotificationSent=new j.EventEmitter}static textDocumentFilter(e,n){for(let r of e)if(j.languages.match(r,n))return!0;return!1}register(e){!e.registerOptions.documentSelector||(this._listener||(this._listener=this._event(this.callback,this)),this._selectors.set(e.id,e.registerOptions.documentSelector))}callback(e){let n=r=>{let i=this._createParams(r);this._client.sendNotification(this._type,i).catch(o=>{this._client.error(`Sending document notification ${this._type.method} failed.`,o)}),this.notificationSent(r,this._type,i)};(!this._selectorFilter||this._selectorFilter(this._selectors.values(),e))&&(this._middleware?this._middleware(e,r=>n(r)):n(e))}get onNotificationSent(){return this._onNotificationSent.event}notificationSent(e,n,r){this._onNotificationSent.fire({original:e,type:n,params:r})}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._onNotificationSent.dispose(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getProvider(e){for(let n of this._selectors.values())if(j.languages.match(n,e))return{send:r=>{this.callback(r)}}}},dp=class extends un{constructor(e,n){super(e,j.workspace.onDidOpenTextDocument,R.DidOpenTextDocumentNotification.type,e.clientOptions.middleware.didOpen,r=>e.code2ProtocolConverter.asOpenTextDocumentParams(r),un.textDocumentFilter);this._syncedDocuments=n}get openDocuments(){return this._syncedDocuments.values()}fillClientCapabilities(e){V(V(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,n){let r=e.resolvedTextDocumentSync;n&&r&&r.openClose&&this.register({id:me.generateUuid(),registerOptions:{documentSelector:n}})}get registrationType(){return R.DidOpenTextDocumentNotification.type}register(e){if(super.register(e),!e.registerOptions.documentSelector)return;let n=e.registerOptions.documentSelector;j.workspace.textDocuments.forEach(r=>{let i=r.uri.toString();if(!this._syncedDocuments.has(i)&&j.languages.match(n,r)){let o=this._client.clientOptions.middleware,s=c=>{this._client.sendNotification(this._type,this._createParams(c)).catch(a=>{this._client.error(`Sending document notification ${this._type.method} failed`,a)})};o.didOpen?o.didOpen(r,s):s(r),this._syncedDocuments.set(i,r)}})}notificationSent(e,n,r){super.notificationSent(e,n,r),this._syncedDocuments.set(e.uri.toString(),e)}},fp=class extends un{constructor(e,n){super(e,j.workspace.onDidCloseTextDocument,R.DidCloseTextDocumentNotification.type,e.clientOptions.middleware.didClose,r=>e.code2ProtocolConverter.asCloseTextDocumentParams(r),un.textDocumentFilter);this._syncedDocuments=n}get registrationType(){return R.DidCloseTextDocumentNotification.type}fillClientCapabilities(e){V(V(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,n){let r=e.resolvedTextDocumentSync;n&&r&&r.openClose&&this.register({id:me.generateUuid(),registerOptions:{documentSelector:n}})}notificationSent(e,n,r){super.notificationSent(e,n,r),this._syncedDocuments.delete(e.uri.toString())}unregister(e){let n=this._selectors.get(e);super.unregister(e);let r=this._selectors.values();this._syncedDocuments.forEach(i=>{if(j.languages.match(n,i)&&!this._selectorFilter(r,i)){let o=this._client.clientOptions.middleware,s=c=>{this._client.sendNotification(this._type,this._createParams(c)).catch(a=>{this._client.error(`Sending document notification ${this._type.method} failed`,a)})};this._syncedDocuments.delete(i.uri.toString()),o.didClose?o.didClose(i,s):s(i)}})}},pp=class{constructor(e){this._client=e,this._changeData=new Map,this._forcingDelivery=!1,this._onNotificationSent=new j.EventEmitter}get registrationType(){return R.DidChangeTextDocumentNotification.type}fillClientCapabilities(e){V(V(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,n){let r=e.resolvedTextDocumentSync;n&&r&&r.change!==void 0&&r.change!==R.TextDocumentSyncKind.None&&this.register({id:me.generateUuid(),registerOptions:Object.assign({},{documentSelector:n},{syncKind:r.change})})}register(e){!e.registerOptions.documentSelector||(this._listener||(this._listener=j.workspace.onDidChangeTextDocument(this.callback,this)),this._changeData.set(e.id,{documentSelector:e.registerOptions.documentSelector,syncKind:e.registerOptions.syncKind}))}callback(e){if(e.contentChanges.length!==0){for(let n of this._changeData.values())if(j.languages.match(n.documentSelector,e.document)){let r=this._client.clientOptions.middleware;if(n.syncKind===R.TextDocumentSyncKind.Incremental){let i=o=>{let s=this._client.code2ProtocolConverter.asChangeTextDocumentParams(o);this._client.sendNotification(R.DidChangeTextDocumentNotification.type,s).catch(c=>{this._client.error(`Sending document notification ${R.DidChangeTextDocumentNotification.type.method} failed`,c)}),this.notificationSent(o,R.DidChangeTextDocumentNotification.type,s)};r.didChange?r.didChange(e,o=>i(o)):i(e)}else if(n.syncKind===R.TextDocumentSyncKind.Full){let i=o=>{let s=c=>{let a=this._client.code2ProtocolConverter.asChangeTextDocumentParams(c.document);this._client.sendNotification(R.DidChangeTextDocumentNotification.type,a).catch(p=>{this._client.error(`Sending document notification ${R.DidChangeTextDocumentNotification.type.method} failed`,p)}),this.notificationSent(c,R.DidChangeTextDocumentNotification.type,a)};this._changeDelayer?(this._changeDelayer.uri!==o.document.uri.toString()&&(this.forceDelivery(),this._changeDelayer.uri=o.document.uri.toString()),this._changeDelayer.delayer.trigger(()=>s(o))):(this._changeDelayer={uri:o.document.uri.toString(),delayer:new sp.Delayer(200)},this._changeDelayer.delayer.trigger(()=>s(o),-1))};r.didChange?r.didChange(e,o=>i(o)):i(e)}}}}get onNotificationSent(){return this._onNotificationSent.event}notificationSent(e,n,r){this._onNotificationSent.fire({original:e,type:n,params:r})}unregister(e){this._changeData.delete(e),this._changeData.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._changeDelayer=void 0,this._forcingDelivery=!1,this._changeData.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}forceDelivery(){if(!(this._forcingDelivery||!this._changeDelayer))try{this._forcingDelivery=!0,this._changeDelayer.delayer.forceDelivery()}finally{this._forcingDelivery=!1}}getProvider(e){for(let n of this._changeData.values())if(j.languages.match(n.documentSelector,e))return{send:r=>{this.callback(r)}}}},hp=class extends un{constructor(e){super(e,j.workspace.onWillSaveTextDocument,R.WillSaveTextDocumentNotification.type,e.clientOptions.middleware.willSave,n=>e.code2ProtocolConverter.asWillSaveTextDocumentParams(n),(n,r)=>un.textDocumentFilter(n,r.document))}get registrationType(){return R.WillSaveTextDocumentNotification.type}fillClientCapabilities(e){let n=V(V(e,"textDocument"),"synchronization");n.willSave=!0}initialize(e,n){let r=e.resolvedTextDocumentSync;n&&r&&r.willSave&&this.register({id:me.generateUuid(),registerOptions:{documentSelector:n}})}},gp=class{constructor(e){this._client=e,this._selectors=new Map}get registrationType(){return R.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(e){let n=V(V(e,"textDocument"),"synchronization");n.willSaveWaitUntil=!0}initialize(e,n){let r=e.resolvedTextDocumentSync;n&&r&&r.willSaveWaitUntil&&this.register({id:me.generateUuid(),registerOptions:{documentSelector:n}})}register(e){!e.registerOptions.documentSelector||(this._listener||(this._listener=j.workspace.onWillSaveTextDocument(this.callback,this)),this._selectors.set(e.id,e.registerOptions.documentSelector))}callback(e){if(un.textDocumentFilter(this._selectors.values(),e.document)){let n=this._client.clientOptions.middleware,r=i=>this._client.sendRequest(R.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(i)).then(o=>{let s=this._client.protocol2CodeConverter.asTextEdits(o);return s===void 0?[]:s});e.waitUntil(n.willSaveWaitUntil?n.willSaveWaitUntil(e,r):r(e))}}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}},mp=class extends un{constructor(e){super(e,j.workspace.onDidSaveTextDocument,R.DidSaveTextDocumentNotification.type,e.clientOptions.middleware.didSave,n=>e.code2ProtocolConverter.asSaveTextDocumentParams(n,this._includeText),un.textDocumentFilter);this._includeText=!1}get registrationType(){return R.DidSaveTextDocumentNotification.type}fillClientCapabilities(e){V(V(e,"textDocument"),"synchronization").didSave=!0}initialize(e,n){let r=e.resolvedTextDocumentSync;if(n&&r&&r.save){let i=typeof r.save=="boolean"?{includeText:!1}:{includeText:!!r.save.includeText};this.register({id:me.generateUuid(),registerOptions:Object.assign({},{documentSelector:n},i)})}}register(e){this._includeText=!!e.registerOptions.includeText,super.register(e)}},vp=class{constructor(e,n){this._client=e,this._notifyFileEvent=n,this._watchers=new Map}get registrationType(){return R.DidChangeWatchedFilesNotification.type}fillClientCapabilities(e){V(V(e,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0}initialize(e,n){}register(e){if(!Array.isArray(e.registerOptions.watchers))return;let n=[];for(let r of e.registerOptions.watchers){if(!ge.string(r.globPattern))continue;let i=!0,o=!0,s=!0;r.kind!==void 0&&r.kind!==null&&(i=(r.kind&R.WatchKind.Create)!=0,o=(r.kind&R.WatchKind.Change)!=0,s=(r.kind&R.WatchKind.Delete)!=0);let c=j.workspace.createFileSystemWatcher(r.globPattern,!i,!o,!s);this.hookListeners(c,i,o,s),n.push(c)}this._watchers.set(e.id,n)}registerRaw(e,n){let r=[];for(let i of n)this.hookListeners(i,!0,!0,!0,r);this._watchers.set(e,r)}hookListeners(e,n,r,i,o){n&&e.onDidCreate(s=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(s),type:R.FileChangeType.Created}),null,o),r&&e.onDidChange(s=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(s),type:R.FileChangeType.Changed}),null,o),i&&e.onDidDelete(s=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(s),type:R.FileChangeType.Deleted}),null,o)}unregister(e){let n=this._watchers.get(e);if(n)for(let r of n)r.dispose()}dispose(){this._watchers.forEach(e=>{for(let n of e)n.dispose()}),this._watchers.clear()}},it=class{constructor(e,n){this._client=e,this._registrationType=n,this._registrations=new Map}get registrationType(){return this._registrationType}register(e){if(!e.registerOptions.documentSelector)return;let n=this.registerLanguageProvider(e.registerOptions,e.id);this._registrations.set(e.id,{disposable:n[0],data:e,provider:n[1]})}unregister(e){let n=this._registrations.get(e);n!==void 0&&n.disposable.dispose()}dispose(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getRegistration(e,n){if(n){if(R.TextDocumentRegistrationOptions.is(n)){let r=R.StaticRegistrationOptions.hasId(n)?n.id:me.generateUuid(),i=n.documentSelector||e;if(i)return[r,Object.assign({},n,{documentSelector:i})]}else if(ge.boolean(n)&&n===!0||R.WorkDoneProgressOptions.is(n)){if(!e)return[void 0,void 0];let r=ge.boolean(n)&&n===!0?{documentSelector:e}:Object.assign({},n,{documentSelector:e});return[me.generateUuid(),r]}}else return[void 0,void 0];return[void 0,void 0]}getRegistrationOptions(e,n){if(!(!e||!n))return ge.boolean(n)&&n===!0?{documentSelector:e}:Object.assign({},n,{documentSelector:e})}getProvider(e){for(let n of this._registrations.values()){let r=n.data.registerOptions.documentSelector;if(r!==null&&j.languages.match(r,e))return n.provider}}getAllProviders(){let e=[];for(let n of this._registrations.values())e.push(n.provider);return e}};ve.TextDocumentFeature=it;var yp=class{constructor(e,n){this._client=e,this._registrationType=n,this._registrations=new Map}get registrationType(){return this._registrationType}register(e){let n=this.registerLanguageProvider(e.registerOptions);this._registrations.set(e.id,{disposable:n[0],provider:n[1]})}unregister(e){let n=this._registrations.get(e);n!==void 0&&n.disposable.dispose()}dispose(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getProviders(){let e=[];for(let n of this._registrations.values())e.push(n.provider);return e}},Cp=class extends it{constructor(e){super(e,R.CompletionRequest.type);this.labelDetailsSupport=new Map}fillClientCapabilities(e){let n=V(V(e,"textDocument"),"completion");n.dynamicRegistration=!0,n.contextSupport=!0,n.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[R.MarkupKind.Markdown,R.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0,tagSupport:{valueSet:[R.CompletionItemTag.Deprecated]},insertReplaceSupport:!0,resolveSupport:{properties:["documentation","detail","additionalTextEdits"]},insertTextModeSupport:{valueSet:[R.InsertTextMode.asIs,R.InsertTextMode.adjustIndentation]},labelDetailsSupport:!0},n.insertTextMode=R.InsertTextMode.adjustIndentation,n.completionItemKind={valueSet:FT}}initialize(e,n){let r=this.getRegistrationOptions(n,e.completionProvider);!r||this.register({id:me.generateUuid(),registerOptions:r})}registerLanguageProvider(e,n){var r;this.labelDetailsSupport.set(n,!!((r=e.completionItem)===null||r===void 0?void 0:r.labelDetailsSupport));let i=e.triggerCharacters||[],o={provideCompletionItems:(s,c,a,p)=>{let h=this._client,m=this._client.clientOptions.middleware,C=(v,S,k,N)=>h.sendRequest(R.CompletionRequest.type,h.code2ProtocolConverter.asCompletionParams(v,S,k),N).then(h.protocol2CodeConverter.asCompletionResult,F=>h.handleFailedRequest(R.CompletionRequest.type,N,F,null));return m.provideCompletionItem?m.provideCompletionItem(s,c,p,a,C):C(s,c,p,a)},resolveCompletionItem:e.resolveProvider?(s,c)=>{let a=this._client,p=this._client.clientOptions.middleware,h=(m,C)=>a.sendRequest(R.CompletionResolveRequest.type,a.code2ProtocolConverter.asCompletionItem(m,!!this.labelDetailsSupport.get(n)),C).then(a.protocol2CodeConverter.asCompletionItem,v=>a.handleFailedRequest(R.CompletionResolveRequest.type,C,v,m));return p.resolveCompletionItem?p.resolveCompletionItem(s,c,h):h(s,c)}:void 0};return[j.languages.registerCompletionItemProvider(e.documentSelector,o,...i),o]}},wp=class extends it{constructor(e){super(e,R.HoverRequest.type)}fillClientCapabilities(e){let n=V(V(e,"textDocument"),"hover");n.dynamicRegistration=!0,n.contentFormat=[R.MarkupKind.Markdown,R.MarkupKind.PlainText]}initialize(e,n){let r=this.getRegistrationOptions(n,e.hoverProvider);!r||this.register({id:me.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n={provideHover:(r,i,o)=>{let s=this._client,c=(p,h,m)=>s.sendRequest(R.HoverRequest.type,s.code2ProtocolConverter.asTextDocumentPositionParams(p,h),m).then(s.protocol2CodeConverter.asHover,C=>s.handleFailedRequest(R.HoverRequest.type,m,C,null)),a=s.clientOptions.middleware;return a.provideHover?a.provideHover(r,i,o,c):c(r,i,o)}};return[j.languages.registerHoverProvider(e.documentSelector,n),n]}},Rp=class extends it{constructor(e){super(e,R.SignatureHelpRequest.type)}fillClientCapabilities(e){let n=V(V(e,"textDocument"),"signatureHelp");n.dynamicRegistration=!0,n.signatureInformation={documentationFormat:[R.MarkupKind.Markdown,R.MarkupKind.PlainText]},n.signatureInformation.parameterInformation={labelOffsetSupport:!0},n.signatureInformation.activeParameterSupport=!0,n.contextSupport=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.signatureHelpProvider);!r||this.register({id:me.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n={provideSignatureHelp:(i,o,s,c)=>{let a=this._client,p=(m,C,v,S)=>a.sendRequest(R.SignatureHelpRequest.type,a.code2ProtocolConverter.asSignatureHelpParams(m,C,v),S).then(a.protocol2CodeConverter.asSignatureHelp,k=>a.handleFailedRequest(R.SignatureHelpRequest.type,S,k,null)),h=a.clientOptions.middleware;return h.provideSignatureHelp?h.provideSignatureHelp(i,o,c,s,p):p(i,o,c,s)}},r;if(e.retriggerCharacters===void 0){let i=e.triggerCharacters||[];r=j.languages.registerSignatureHelpProvider(e.documentSelector,n,...i)}else{let i={triggerCharacters:e.triggerCharacters||[],retriggerCharacters:e.retriggerCharacters||[]};r=j.languages.registerSignatureHelpProvider(e.documentSelector,n,i)}return[r,n]}},bp=class extends it{constructor(e){super(e,R.DefinitionRequest.type)}fillClientCapabilities(e){let n=V(V(e,"textDocument"),"definition");n.dynamicRegistration=!0,n.linkSupport=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.definitionProvider);!r||this.register({id:me.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n={provideDefinition:(r,i,o)=>{let s=this._client,c=(p,h,m)=>s.sendRequest(R.DefinitionRequest.type,s.code2ProtocolConverter.asTextDocumentPositionParams(p,h),m).then(s.protocol2CodeConverter.asDefinitionResult,C=>s.handleFailedRequest(R.DefinitionRequest.type,m,C,null)),a=s.clientOptions.middleware;return a.provideDefinition?a.provideDefinition(r,i,o,c):c(r,i,o)}};return[j.languages.registerDefinitionProvider(e.documentSelector,n),n]}},Tp=class extends it{constructor(e){super(e,R.ReferencesRequest.type)}fillClientCapabilities(e){V(V(e,"textDocument"),"references").dynamicRegistration=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.referencesProvider);!r||this.register({id:me.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n={provideReferences:(r,i,o,s)=>{let c=this._client,a=(h,m,C,v)=>c.sendRequest(R.ReferencesRequest.type,c.code2ProtocolConverter.asReferenceParams(h,m,C),v).then(c.protocol2CodeConverter.asReferences,S=>c.handleFailedRequest(R.ReferencesRequest.type,v,S,null)),p=c.clientOptions.middleware;return p.provideReferences?p.provideReferences(r,i,o,s,a):a(r,i,o,s)}};return[j.languages.registerReferenceProvider(e.documentSelector,n),n]}},Dp=class extends it{constructor(e){super(e,R.DocumentHighlightRequest.type)}fillClientCapabilities(e){V(V(e,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.documentHighlightProvider);!r||this.register({id:me.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n={provideDocumentHighlights:(r,i,o)=>{let s=this._client,c=(p,h,m)=>s.sendRequest(R.DocumentHighlightRequest.type,s.code2ProtocolConverter.asTextDocumentPositionParams(p,h),m).then(s.protocol2CodeConverter.asDocumentHighlights,C=>s.handleFailedRequest(R.DocumentHighlightRequest.type,m,C,null)),a=s.clientOptions.middleware;return a.provideDocumentHighlights?a.provideDocumentHighlights(r,i,o,c):c(r,i,o)}};return[j.languages.registerDocumentHighlightProvider(e.documentSelector,n),n]}},Sp=class extends it{constructor(e){super(e,R.DocumentSymbolRequest.type)}fillClientCapabilities(e){let n=V(V(e,"textDocument"),"documentSymbol");n.dynamicRegistration=!0,n.symbolKind={valueSet:up},n.hierarchicalDocumentSymbolSupport=!0,n.tagSupport={valueSet:lp},n.labelSupport=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.documentSymbolProvider);!r||this.register({id:me.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n={provideDocumentSymbols:(i,o)=>{let s=this._client,c=(p,h)=>s.sendRequest(R.DocumentSymbolRequest.type,s.code2ProtocolConverter.asDocumentSymbolParams(p),h).then(m=>{if(m!==null){if(m.length===0)return[];{let C=m[0];return R.DocumentSymbol.is(C)?s.protocol2CodeConverter.asDocumentSymbols(m):s.protocol2CodeConverter.asSymbolInformations(m)}}},m=>s.handleFailedRequest(R.DocumentSymbolRequest.type,h,m,null)),a=s.clientOptions.middleware;return a.provideDocumentSymbols?a.provideDocumentSymbols(i,o,c):c(i,o)}},r=e.label!==void 0?{label:e.label}:void 0;return[j.languages.registerDocumentSymbolProvider(e.documentSelector,n,r),n]}},_p=class extends yp{constructor(e){super(e,R.WorkspaceSymbolRequest.type)}fillClientCapabilities(e){let n=V(V(e,"workspace"),"symbol");n.dynamicRegistration=!0,n.symbolKind={valueSet:up},n.tagSupport={valueSet:lp}}initialize(e){!e.workspaceSymbolProvider||this.register({id:me.generateUuid(),registerOptions:e.workspaceSymbolProvider===!0?{workDoneProgress:!1}:e.workspaceSymbolProvider})}registerLanguageProvider(e){let n={provideWorkspaceSymbols:(r,i)=>{let o=this._client,s=(a,p)=>o.sendRequest(R.WorkspaceSymbolRequest.type,{query:a},p).then(o.protocol2CodeConverter.asSymbolInformations,h=>o.handleFailedRequest(R.WorkspaceSymbolRequest.type,p,h,null)),c=o.clientOptions.middleware;return c.provideWorkspaceSymbols?c.provideWorkspaceSymbols(r,i,s):s(r,i)}};return[j.languages.registerWorkspaceSymbolProvider(n),n]}},Pp=class extends it{constructor(e){super(e,R.CodeActionRequest.type)}fillClientCapabilities(e){let n=V(V(e,"textDocument"),"codeAction");n.dynamicRegistration=!0,n.isPreferredSupport=!0,n.disabledSupport=!0,n.dataSupport=!0,n.resolveSupport={properties:["edit"]},n.codeActionLiteralSupport={codeActionKind:{valueSet:[R.CodeActionKind.Empty,R.CodeActionKind.QuickFix,R.CodeActionKind.Refactor,R.CodeActionKind.RefactorExtract,R.CodeActionKind.RefactorInline,R.CodeActionKind.RefactorRewrite,R.CodeActionKind.Source,R.CodeActionKind.SourceOrganizeImports]}},n.honorsChangeAnnotations=!1}initialize(e,n){let r=this.getRegistrationOptions(n,e.codeActionProvider);!r||this.register({id:me.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n={provideCodeActions:(r,i,o,s)=>{let c=this._client,a=(h,m,C,v)=>{let S={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(h),range:c.code2ProtocolConverter.asRange(m),context:c.code2ProtocolConverter.asCodeActionContext(C)};return c.sendRequest(R.CodeActionRequest.type,S,v).then(k=>{if(k===null)return;let N=[];for(let F of k)R.Command.is(F)?N.push(c.protocol2CodeConverter.asCommand(F)):N.push(c.protocol2CodeConverter.asCodeAction(F));return N},k=>c.handleFailedRequest(R.CodeActionRequest.type,v,k,null))},p=c.clientOptions.middleware;return p.provideCodeActions?p.provideCodeActions(r,i,o,s,a):a(r,i,o,s)},resolveCodeAction:e.resolveProvider?(r,i)=>{let o=this._client,s=this._client.clientOptions.middleware,c=(a,p)=>o.sendRequest(R.CodeActionResolveRequest.type,o.code2ProtocolConverter.asCodeAction(a),p).then(o.protocol2CodeConverter.asCodeAction,h=>o.handleFailedRequest(R.CodeActionResolveRequest.type,p,h,a));return s.resolveCodeAction?s.resolveCodeAction(r,i,c):c(r,i)}:void 0};return[j.languages.registerCodeActionsProvider(e.documentSelector,n,e.codeActionKinds?{providedCodeActionKinds:this._client.protocol2CodeConverter.asCodeActionKinds(e.codeActionKinds)}:void 0),n]}},Ep=class extends it{constructor(e){super(e,R.CodeLensRequest.type)}fillClientCapabilities(e){V(V(e,"textDocument"),"codeLens").dynamicRegistration=!0,V(V(e,"workspace"),"codeLens").refreshSupport=!0}initialize(e,n){this._client.onRequest(R.CodeLensRefreshRequest.type,async()=>{for(let o of this.getAllProviders())o.onDidChangeCodeLensEmitter.fire()});let i=this.getRegistrationOptions(n,e.codeLensProvider);!i||this.register({id:me.generateUuid(),registerOptions:i})}registerLanguageProvider(e){let n=new j.EventEmitter,r={onDidChangeCodeLenses:n.event,provideCodeLenses:(i,o)=>{let s=this._client,c=(p,h)=>s.sendRequest(R.CodeLensRequest.type,s.code2ProtocolConverter.asCodeLensParams(p),h).then(s.protocol2CodeConverter.asCodeLenses,m=>s.handleFailedRequest(R.CodeLensRequest.type,h,m,null)),a=s.clientOptions.middleware;return a.provideCodeLenses?a.provideCodeLenses(i,o,c):c(i,o)},resolveCodeLens:e.resolveProvider?(i,o)=>{let s=this._client,c=(p,h)=>s.sendRequest(R.CodeLensResolveRequest.type,s.code2ProtocolConverter.asCodeLens(p),h).then(s.protocol2CodeConverter.asCodeLens,m=>s.handleFailedRequest(R.CodeLensResolveRequest.type,h,m,p)),a=s.clientOptions.middleware;return a.resolveCodeLens?a.resolveCodeLens(i,o,c):c(i,o)}:void 0};return[j.languages.registerCodeLensProvider(e.documentSelector,r),{provider:r,onDidChangeCodeLensEmitter:n}]}},xp=class extends it{constructor(e){super(e,R.DocumentFormattingRequest.type)}fillClientCapabilities(e){V(V(e,"textDocument"),"formatting").dynamicRegistration=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.documentFormattingProvider);!r||this.register({id:me.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n={provideDocumentFormattingEdits:(r,i,o)=>{let s=this._client,c=(p,h,m)=>{let C={textDocument:s.code2ProtocolConverter.asTextDocumentIdentifier(p),options:s.code2ProtocolConverter.asFormattingOptions(h,Hi.fromConfiguration(p))};return s.sendRequest(R.DocumentFormattingRequest.type,C,m).then(s.protocol2CodeConverter.asTextEdits,v=>s.handleFailedRequest(R.DocumentFormattingRequest.type,m,v,null))},a=s.clientOptions.middleware;return a.provideDocumentFormattingEdits?a.provideDocumentFormattingEdits(r,i,o,c):c(r,i,o)}};return[j.languages.registerDocumentFormattingEditProvider(e.documentSelector,n),n]}},kp=class extends it{constructor(e){super(e,R.DocumentRangeFormattingRequest.type)}fillClientCapabilities(e){V(V(e,"textDocument"),"rangeFormatting").dynamicRegistration=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.documentRangeFormattingProvider);!r||this.register({id:me.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n={provideDocumentRangeFormattingEdits:(r,i,o,s)=>{let c=this._client,a=(h,m,C,v)=>{let S={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(h),range:c.code2ProtocolConverter.asRange(m),options:c.code2ProtocolConverter.asFormattingOptions(C,Hi.fromConfiguration(h))};return c.sendRequest(R.DocumentRangeFormattingRequest.type,S,v).then(c.protocol2CodeConverter.asTextEdits,k=>c.handleFailedRequest(R.DocumentRangeFormattingRequest.type,v,k,null))},p=c.clientOptions.middleware;return p.provideDocumentRangeFormattingEdits?p.provideDocumentRangeFormattingEdits(r,i,o,s,a):a(r,i,o,s)}};return[j.languages.registerDocumentRangeFormattingEditProvider(e.documentSelector,n),n]}},qp=class extends it{constructor(e){super(e,R.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(e){V(V(e,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.documentOnTypeFormattingProvider);!r||this.register({id:me.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n={provideOnTypeFormattingEdits:(i,o,s,c,a)=>{let p=this._client,h=(C,v,S,k,N)=>{let F={textDocument:p.code2ProtocolConverter.asTextDocumentIdentifier(C),position:p.code2ProtocolConverter.asPosition(v),ch:S,options:p.code2ProtocolConverter.asFormattingOptions(k,Hi.fromConfiguration(C))};return p.sendRequest(R.DocumentOnTypeFormattingRequest.type,F,N).then(p.protocol2CodeConverter.asTextEdits,L=>p.handleFailedRequest(R.DocumentOnTypeFormattingRequest.type,N,L,null))},m=p.clientOptions.middleware;return m.provideOnTypeFormattingEdits?m.provideOnTypeFormattingEdits(i,o,s,c,a,h):h(i,o,s,c,a)}},r=e.moreTriggerCharacter||[];return[j.languages.registerOnTypeFormattingEditProvider(e.documentSelector,n,e.firstTriggerCharacter,...r),n]}},Op=class extends it{constructor(e){super(e,R.RenameRequest.type)}fillClientCapabilities(e){let n=V(V(e,"textDocument"),"rename");n.dynamicRegistration=!0,n.prepareSupport=!0,n.prepareSupportDefaultBehavior=R.PrepareSupportDefaultBehavior.Identifier,n.honorsChangeAnnotations=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.renameProvider);!r||(ge.boolean(e.renameProvider)&&(r.prepareProvider=!1),this.register({id:me.generateUuid(),registerOptions:r}))}registerLanguageProvider(e){let n={provideRenameEdits:(r,i,o,s)=>{let c=this._client,a=(h,m,C,v)=>{let S={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(h),position:c.code2ProtocolConverter.asPosition(m),newName:C};return c.sendRequest(R.RenameRequest.type,S,v).then(c.protocol2CodeConverter.asWorkspaceEdit,k=>c.handleFailedRequest(R.RenameRequest.type,v,k,null))},p=c.clientOptions.middleware;return p.provideRenameEdits?p.provideRenameEdits(r,i,o,s,a):a(r,i,o,s)},prepareRename:e.prepareProvider?(r,i,o)=>{let s=this._client,c=(p,h,m)=>{let C={textDocument:s.code2ProtocolConverter.asTextDocumentIdentifier(p),position:s.code2ProtocolConverter.asPosition(h)};return s.sendRequest(R.PrepareRenameRequest.type,C,m).then(v=>R.Range.is(v)?s.protocol2CodeConverter.asRange(v):this.isDefaultBehavior(v)?v.defaultBehavior===!0?null:Promise.reject(new Error("The element can't be renamed.")):v&&R.Range.is(v.range)?{range:s.protocol2CodeConverter.asRange(v.range),placeholder:v.placeholder}:Promise.reject(new Error("The element can't be renamed.")),v=>{throw typeof v.message=="string"?new Error(v.message):new Error("The element can't be renamed.")})},a=s.clientOptions.middleware;return a.prepareRename?a.prepareRename(r,i,o,c):c(r,i,o)}:void 0};return[j.languages.registerRenameProvider(e.documentSelector,n),n]}isDefaultBehavior(e){let n=e;return n&&ge.boolean(n.defaultBehavior)}},Ip=class extends it{constructor(e){super(e,R.DocumentLinkRequest.type)}fillClientCapabilities(e){let n=V(V(e,"textDocument"),"documentLink");n.dynamicRegistration=!0,n.tooltipSupport=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.documentLinkProvider);!r||this.register({id:me.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n={provideDocumentLinks:(r,i)=>{let o=this._client,s=(a,p)=>o.sendRequest(R.DocumentLinkRequest.type,o.code2ProtocolConverter.asDocumentLinkParams(a),p).then(o.protocol2CodeConverter.asDocumentLinks,h=>o.handleFailedRequest(R.DocumentLinkRequest.type,p,h,null)),c=o.clientOptions.middleware;return c.provideDocumentLinks?c.provideDocumentLinks(r,i,s):s(r,i)},resolveDocumentLink:e.resolveProvider?(r,i)=>{let o=this._client,s=(a,p)=>o.sendRequest(R.DocumentLinkResolveRequest.type,o.code2ProtocolConverter.asDocumentLink(a),p).then(o.protocol2CodeConverter.asDocumentLink,h=>o.handleFailedRequest(R.DocumentLinkResolveRequest.type,p,h,a)),c=o.clientOptions.middleware;return c.resolveDocumentLink?c.resolveDocumentLink(r,i,s):s(r,i)}:void 0};return[j.languages.registerDocumentLinkProvider(e.documentSelector,n),n]}},Fp=class{constructor(e){this._client=e,this._listeners=new Map}get registrationType(){return R.DidChangeConfigurationNotification.type}fillClientCapabilities(e){V(V(e,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){let e=this._client.clientOptions.synchronize.configurationSection;e!==void 0&&this.register({id:me.generateUuid(),registerOptions:{section:e}})}register(e){let n=j.workspace.onDidChangeConfiguration(r=>{this.onDidChangeConfiguration(e.registerOptions.section,r)});this._listeners.set(e.id,n),e.registerOptions.section!==void 0&&this.onDidChangeConfiguration(e.registerOptions.section,void 0)}unregister(e){let n=this._listeners.get(e);n&&(this._listeners.delete(e),n.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}onDidChangeConfiguration(e,n){let r;if(ge.string(e)?r=[e]:r=e,r!==void 0&&n!==void 0&&!r.some(c=>n.affectsConfiguration(c)))return;let i=s=>{if(s===void 0){this._client.sendNotification(R.DidChangeConfigurationNotification.type,{settings:null}).catch(c=>{this._client.error(`Sending notification ${R.DidChangeConfigurationNotification.type.method} failed`,c)});return}this._client.sendNotification(R.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(s)}).catch(c=>{this._client.error(`Sending notification ${R.DidChangeConfigurationNotification.type.method} failed`,c)})},o=this.getMiddleware();o?o(r,i):i(r)}extractSettingsInformation(e){function n(o,s){let c=o;for(let a=0;a<s.length-1;a++){let p=c[s[a]];p||(p=Object.create(null),c[s[a]]=p),c=p}return c}let r=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,i=Object.create(null);for(let o=0;o<e.length;o++){let s=e[o],c=s.indexOf("."),a=null;if(c>=0?a=j.workspace.getConfiguration(s.substr(0,c),r).get(s.substr(c+1)):a=j.workspace.getConfiguration(void 0,r).get(s),a){let p=e[o].split(".");n(i,p)[p[p.length-1]]=ET.toJSONObject(a)}}return i}getMiddleware(){let e=this._client.clientOptions.middleware;if(e.workspace&&e.workspace.didChangeConfiguration)return e.workspace.didChangeConfiguration}},Np=class{constructor(e){this._client=e,this._commands=new Map}get registrationType(){return R.ExecuteCommandRequest.type}fillClientCapabilities(e){V(V(e,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(e){!e.executeCommandProvider||this.register({id:me.generateUuid(),registerOptions:Object.assign({},e.executeCommandProvider)})}register(e){let n=this._client,r=n.clientOptions.middleware,i=(o,s)=>{let c={command:o,arguments:s};return n.sendRequest(R.ExecuteCommandRequest.type,c).then(void 0,a=>n.handleFailedRequest(R.ExecuteCommandRequest.type,void 0,a,void 0))};if(e.registerOptions.commands){let o=[];for(let s of e.registerOptions.commands)o.push(j.commands.registerCommand(s,(...c)=>r.executeCommand?r.executeCommand(s,c,i):i(s,c)));this._commands.set(e.id,o)}}unregister(e){let n=this._commands.get(e);n&&n.forEach(r=>r.dispose())}dispose(){this._commands.forEach(e=>{e.forEach(n=>n.dispose())}),this._commands.clear()}},NT;(function(t){function e(n){return n&&R.MessageReader.is(n.reader)&&R.MessageWriter.is(n.writer)}t.is=e})(NT=ve.MessageTransports||(ve.MessageTransports={}));var ja=class{constructor(e,n){this._resolve=e,this._reject=n,this._used=!1}get isUsed(){return this._used}resolve(){this._used=!0,this._resolve()}reject(e){this._used=!0,this._reject(e)}},Ha=class extends j.CancellationError{constructor(e){super();this.data=e}};ve.LSPCancellationError=Ha;var Gr=class{constructor(e,n,r){var i,o,s,c,a,p,h,m,C;this._traceFormat=R.TraceFormat.Text,this._features=[],this._dynamicFeatures=new Map,this._id=e,this._name=n,r=r||{};let v={isTrusted:!1};r.markdown!==void 0&&r.markdown.isTrusted===!0&&(v.isTrusted=!0),this._clientOptions={documentSelector:(i=r.documentSelector)!==null&&i!==void 0?i:[],synchronize:(o=r.synchronize)!==null&&o!==void 0?o:{},diagnosticCollectionName:r.diagnosticCollectionName,outputChannelName:(s=r.outputChannelName)!==null&&s!==void 0?s:this._name,revealOutputChannelOn:(c=r.revealOutputChannelOn)!==null&&c!==void 0?c:ji.Error,stdioEncoding:(a=r.stdioEncoding)!==null&&a!==void 0?a:"utf8",initializationOptions:r.initializationOptions,initializationFailedHandler:r.initializationFailedHandler,progressOnInitialization:!!r.progressOnInitialization,errorHandler:(p=r.errorHandler)!==null&&p!==void 0?p:this.createDefaultErrorHandler((h=r.connectionOptions)===null||h===void 0?void 0:h.maxRestartCount),middleware:(m=r.middleware)!==null&&m!==void 0?m:{},uriConverters:r.uriConverters,workspaceFolder:r.workspaceFolder,connectionOptions:r.connectionOptions,markdown:v,diagnosticPullOptions:(C=r.diagnosticPullOptions)!==null&&C!==void 0?C:{onChange:!0,onSave:!1}},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this._state=Re.Initial,this._connectionPromise=void 0,this._resolvedConnection=void 0,this._initializeResult=void 0,r.outputChannel?(this._outputChannel=r.outputChannel,this._disposeOutputChannel=!1):(this._outputChannel=void 0,this._disposeOutputChannel=!0),this._traceOutputChannel=r.traceOutputChannel,this._listeners=void 0,this._providers=void 0,this._diagnostics=void 0,this._fileEvents=[],this._fileEventDelayer=new sp.Delayer(250),this._onReady=new Promise((S,k)=>{this._onReadyCallbacks=new ja(S,k)}),this._onStop=void 0,this._telemetryEmitter=new R.Emitter,this._stateChangeEmitter=new R.Emitter,this._trace=R.Trace.Off,this._tracer={log:(S,k)=>{ge.string(S)?this.logTrace(S,k):this.logObjectTrace(S)}},this._c2p=xT.createConverter(r.uriConverters?r.uriConverters.code2Protocol:void 0),this._p2c=kT.createConverter(r.uriConverters?r.uriConverters.protocol2Code:void 0,this._clientOptions.markdown.isTrusted),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get state(){return this._state}set state(e){let n=this.getPublicState();this._state=e;let r=this.getPublicState();r!==n&&this._stateChangeEmitter.fire({oldState:n,newState:r})}getPublicState(){return this.state===Re.Running?jo.Running:this.state===Re.Starting?jo.Starting:jo.Stopped}get initializeResult(){return this._initializeResult}sendRequest(e,...n){if(!this.isConnectionActive())throw new Error(`Language client is not ready yet when handling ${ge.string(e)?e:e.method}`);this.forceDocumentSync();try{return this._resolvedConnection.sendRequest(e,...n)}catch(r){throw this.error(`Sending request ${ge.string(e)?e:e.method} failed.`,r),r}}onRequest(e,n){if(!this.isConnectionActive())throw new Error(`Language client is not ready yet when handling ${ge.string(e)?e:e.method}`);try{return this._resolvedConnection.onRequest(e,n)}catch(r){throw this.error(`Registering request handler ${ge.string(e)?e:e.method} failed.`,r),r}}sendNotification(e,n){if(!this.isConnectionActive())throw new Error(`Language client is not ready yet when handling ${ge.string(e)?e:e.method}`);this.forceDocumentSync();try{return this._resolvedConnection.sendNotification(e,n)}catch(r){throw this.error(`Sending notification ${ge.string(e)?e:e.method} failed.`,r),r}}onNotification(e,n){if(!this.isConnectionActive())throw new Error(`Language client is not ready yet when handling ${ge.string(e)?e:e.method}`);try{return this._resolvedConnection.onNotification(e,n)}catch(r){throw this.error(`Registering notification handler ${ge.string(e)?e:e.method} failed.`,r),r}}onProgress(e,n,r){if(!this.isConnectionActive())throw new Error("Language client is not ready yet when trying to send progress");try{if(R.WorkDoneProgress.is(e)){let i=this._clientOptions.middleware.handleWorkDoneProgress;if(i!==void 0)return this._resolvedConnection.onProgress(e,n,o=>{i(n,o,()=>r(o))})}return this._resolvedConnection.onProgress(e,n,r)}catch(i){throw this.error(`Registering progress handler for token ${n} failed.`,i),i}}sendProgress(e,n,r){if(!this.isConnectionActive())throw new Error("Language client is not ready yet when trying to send progress");this.forceDocumentSync();try{this._resolvedConnection.sendProgress(e,n,r)}catch(i){throw this.error(`Sending progress for token ${n} failed.`,i),i}}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){return this._outputChannel||(this._outputChannel=j.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)),this._outputChannel}get traceOutputChannel(){return this._traceOutputChannel?this._traceOutputChannel:this.outputChannel}get diagnostics(){return this._diagnostics}createDefaultErrorHandler(e){if(e!==void 0&&e<0)throw new Error(`Invalid maxRestartCount: ${e}`);return new cp(this._name,e!=null?e:4)}set trace(e){this._trace=e,this.onReady().then(()=>{this.resolveConnection().then(n=>{n.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})},()=>this.info("Setting trace value failed",void 0,!1))},()=>{})}data2String(e){if(e instanceof R.ResponseError){let n=e;return`  Message: ${n.message}
  Code: ${n.code} ${n.data?`
`+n.data.toString():""}`}return e instanceof Error?ge.string(e.stack)?e.stack:e.message:ge.string(e)?e:e.toString()}info(e,n,r=!0){this.outputChannel.appendLine(`[Info  - ${new Date().toLocaleTimeString()}] ${e}`),n!=null&&this.outputChannel.appendLine(this.data2String(n)),r&&this._clientOptions.revealOutputChannelOn<=ji.Info&&this.showNotificationMessage()}warn(e,n,r=!0){this.outputChannel.appendLine(`[Warn  - ${new Date().toLocaleTimeString()}] ${e}`),n!=null&&this.outputChannel.appendLine(this.data2String(n)),r&&this._clientOptions.revealOutputChannelOn<=ji.Warn&&this.showNotificationMessage()}error(e,n,r=!0){this.outputChannel.appendLine(`[Error - ${new Date().toLocaleTimeString()}] ${e}`),n!=null&&this.outputChannel.appendLine(this.data2String(n)),r&&this._clientOptions.revealOutputChannelOn<=ji.Error&&this.showNotificationMessage()}showNotificationMessage(){j.window.showInformationMessage("A request has failed. See the output for more information.","Go to output").then(e=>{e!==void 0&&this.outputChannel.show(!0)})}logTrace(e,n){this.traceOutputChannel.appendLine(`[Trace - ${new Date().toLocaleTimeString()}] ${e}`),n&&this.traceOutputChannel.appendLine(this.data2String(n))}logObjectTrace(e){e.isLSPMessage&&e.type?this.traceOutputChannel.append(`[LSP   - ${new Date().toLocaleTimeString()}] `):this.traceOutputChannel.append(`[Trace - ${new Date().toLocaleTimeString()}] `),e&&this.traceOutputChannel.appendLine(`${JSON.stringify(e)}`)}needsStart(){return this.state===Re.Initial||this.state===Re.Stopping||this.state===Re.Stopped}needsStop(){return this.state===Re.Starting||this.state===Re.Running}onReady(){return this._onReady}isConnectionActive(){return this.state===Re.Running&&!!this._resolvedConnection}start(){return this._onReadyCallbacks.isUsed&&(this._onReady=new Promise((e,n)=>{this._onReadyCallbacks=new ja(e,n)})),this._listeners=[],this._providers=[],this._diagnostics||(this._diagnostics=this._clientOptions.diagnosticCollectionName?j.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):j.languages.createDiagnosticCollection()),this.state=Re.Starting,this.resolveConnection().then(e=>(e.onLogMessage(n=>{switch(n.type){case R.MessageType.Error:this.error(n.message,void 0,!1);break;case R.MessageType.Warning:this.warn(n.message,void 0,!1);break;case R.MessageType.Info:this.info(n.message,void 0,!1);break;default:this.outputChannel.appendLine(n.message)}}),e.onShowMessage(n=>{switch(n.type){case R.MessageType.Error:j.window.showErrorMessage(n.message);break;case R.MessageType.Warning:j.window.showWarningMessage(n.message);break;case R.MessageType.Info:j.window.showInformationMessage(n.message);break;default:j.window.showInformationMessage(n.message)}}),e.onRequest(R.ShowMessageRequest.type,n=>{let r;switch(n.type){case R.MessageType.Error:r=j.window.showErrorMessage;break;case R.MessageType.Warning:r=j.window.showWarningMessage;break;case R.MessageType.Info:r=j.window.showInformationMessage;break;default:r=j.window.showInformationMessage}let i=n.actions||[];return r(n.message,...i)}),e.onTelemetry(n=>{this._telemetryEmitter.fire(n)}),e.onRequest(R.ShowDocumentRequest.type,async n=>{var r;let i=async s=>{let c=this.protocol2CodeConverter.asUri(s.uri);try{if(s.external===!0)return{success:await j.env.openExternal(c)};{let a={};return s.selection!==void 0&&(a.selection=this.protocol2CodeConverter.asRange(s.selection)),s.takeFocus===void 0||s.takeFocus===!1?a.preserveFocus=!0:s.takeFocus===!0&&(a.preserveFocus=!1),await j.window.showTextDocument(c,a),{success:!0}}}catch(a){return{success:!0}}},o=(r=this._clientOptions.middleware.window)===null||r===void 0?void 0:r.showDocument;return o!==void 0?o(n,i):i(n)}),e.listen(),this.initialize(e))).catch(e=>{this.state=Re.StartFailed,this._onReadyCallbacks.reject(e),this.error("Starting client failed",e),j.window.showErrorMessage(`Couldn't start client ${this._name}`)}),new j.Disposable(()=>{this.needsStop()&&this.stop().catch(e=>{this.error("Stopping server failed.",e,!1)})})}resolveConnection(){return this._connectionPromise||(this._connectionPromise=this.createConnection()),this._connectionPromise}initialize(e){this.refreshTrace(e,!1);let n=this._clientOptions.initializationOptions,r=this._clientOptions.workspaceFolder?this._clientOptions.workspaceFolder.uri.fsPath:this._clientGetRootPath(),i={processId:null,clientInfo:{name:j.env.appName,version:j.version},locale:this.getLocale(),rootPath:r||null,rootUri:r?this._c2p.asUri(j.Uri.file(r)):null,capabilities:this.computeClientCapabilities(),initializationOptions:ge.func(n)?n():n,trace:R.Trace.toString(this._trace),workspaceFolders:null};if(this.fillInitializeParams(i),this._clientOptions.progressOnInitialization){let o=me.generateUuid(),s=new qT.ProgressPart(e,o);return i.workDoneToken=o,this.doInitialize(e,i).then(c=>(s.done(),c),c=>{throw s.cancel(),c})}else return this.doInitialize(e,i)}doInitialize(e,n){return e.initialize(n).then(r=>{this._resolvedConnection=e,this._initializeResult=r,this.state=Re.Running;let i;return ge.number(r.capabilities.textDocumentSync)?r.capabilities.textDocumentSync===R.TextDocumentSyncKind.None?i={openClose:!1,change:R.TextDocumentSyncKind.None,save:void 0}:i={openClose:!0,change:r.capabilities.textDocumentSync,save:{includeText:!1}}:r.capabilities.textDocumentSync!==void 0&&r.capabilities.textDocumentSync!==null&&(i=r.capabilities.textDocumentSync),this._capabilities=Object.assign({},r.capabilities,{resolvedTextDocumentSync:i}),e.onDiagnostics(o=>this.handleDiagnostics(o)),e.onRequest(R.RegistrationRequest.type,o=>this.handleRegistrationRequest(o)),e.onRequest("client/registerFeature",o=>this.handleRegistrationRequest(o)),e.onRequest(R.UnregistrationRequest.type,o=>this.handleUnregistrationRequest(o)),e.onRequest("client/unregisterFeature",o=>this.handleUnregistrationRequest(o)),e.onRequest(R.ApplyWorkspaceEditRequest.type,o=>this.handleApplyWorkspaceEdit(o)),e.sendNotification(R.InitializedNotification.type,{}).then(()=>(this.hookFileEvents(e),this.hookConfigurationChanged(e),this.initializeFeatures(e),this._onReadyCallbacks.resolve(),r))}).then(void 0,r=>{throw this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(r)?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(r)):r instanceof R.ResponseError&&r.data&&r.data.retry?j.window.showErrorMessage(r.message,{title:"Retry",id:"retry"}).then(i=>{i&&i.id==="retry"?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(r))}):(r&&r.message&&j.window.showErrorMessage(r.message),this.error("Server initialization failed.",r),this.stop(),this._onReadyCallbacks.reject(r)),r})}_clientGetRootPath(){let e=j.workspace.workspaceFolders;if(!e||e.length===0)return;let n=e[0];if(n.uri.scheme==="file")return n.uri.fsPath}stop(){return this._initializeResult=void 0,this._connectionPromise?this.state===Re.Stopping&&this._onStop?this._onStop:(this.state=Re.Stopping,this.cleanUp(!1),this._onStop=this.resolveConnection().then(e=>e.shutdown().then(()=>e.exit().then(()=>{e.end(),e.dispose(),this.state=Re.Stopped,this.cleanUpChannel(),this._onStop=void 0,this._connectionPromise=void 0,this._resolvedConnection=void 0})))):(this.state=Re.Stopped,Promise.resolve())}cleanUp(e=!0,n=!0){this._listeners&&(this._listeners.forEach(r=>r.dispose()),this._listeners=void 0),this._providers&&(this._providers.forEach(r=>r.dispose()),this._providers=void 0),this._syncedDocuments&&this._syncedDocuments.clear();for(let r of this._features.values())r.dispose();e&&this.cleanUpChannel(),n&&this._diagnostics&&(this._diagnostics.dispose(),this._diagnostics=void 0)}cleanUpChannel(){this._outputChannel&&this._disposeOutputChannel&&(this._outputChannel.dispose(),this._outputChannel=void 0)}notifyFileEvent(e){var n;let r=this;function i(s){r._fileEvents.push(s),r._fileEventDelayer.trigger(()=>{r.onReady().then(()=>{r.resolveConnection().then(c=>{r.isConnectionActive()&&(r.forceDocumentSync(),c.didChangeWatchedFiles({changes:r._fileEvents})),r._fileEvents=[]})},c=>{r.error("Notify file events failed.",c)})})}let o=(n=this.clientOptions.middleware)===null||n===void 0?void 0:n.workspace;(o==null?void 0:o.didChangeWatchedFile)?o.didChangeWatchedFile(e,i):i(e)}forceDocumentSync(){this._didChangeTextDocumentFeature===void 0&&(this._didChangeTextDocumentFeature=this._dynamicFeatures.get(R.DidChangeTextDocumentNotification.type.method)),this._didChangeTextDocumentFeature.forceDelivery()}handleDiagnostics(e){if(!this._diagnostics)return;let n=this._p2c.asUri(e.uri),r=this._p2c.asDiagnostics(e.diagnostics),i=this.clientOptions.middleware;i.handleDiagnostics?i.handleDiagnostics(n,r,(o,s)=>this.setDiagnostics(o,s)):this.setDiagnostics(n,r)}setDiagnostics(e,n){!this._diagnostics||this._diagnostics.set(e,n)}createConnection(){let e=(r,i,o)=>{this.handleConnectionError(r,i,o)},n=()=>{this.handleConnectionClosed()};return this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8").then(r=>OT(r.reader,r.writer,e,n,this._clientOptions.connectionOptions))}handleConnectionClosed(){if(this.state===Re.Stopped)return;try{this._resolvedConnection&&this._resolvedConnection.dispose()}catch(n){}let e=Cr.DoNotRestart;if(this.state!==Re.Stopping)try{e=this._clientOptions.errorHandler.closed()}catch(n){}this._connectionPromise=void 0,this._resolvedConnection=void 0,e===Cr.DoNotRestart?(this.error("Connection to server got closed. Server will not be restarted."),this.state===Re.Starting?(this._onReadyCallbacks.reject(new Error("Connection to server got closed. Server will not be restarted.")),this.state=Re.StartFailed):this.state=Re.Stopped,this.cleanUp(!1,!0)):e===Cr.Restart&&(this.info("Connection to server got closed. Server will restart."),this.cleanUp(!1,!1),this.state=Re.Initial,this.start())}handleConnectionError(e,n,r){this._clientOptions.errorHandler.error(e,n,r)===$o.Shutdown&&(this.error("Connection to server is erroring. Shutting down server."),this.stop().catch(o=>{this.error("Stopping server failed",o,!1)}))}hookConfigurationChanged(e){j.workspace.onDidChangeConfiguration(()=>{this.refreshTrace(e,!0)})}refreshTrace(e,n=!1){let r=j.workspace.getConfiguration(this._id),i=R.Trace.Off,o=R.TraceFormat.Text;if(r){let s=r.get("trace.server","off");typeof s=="string"?i=R.Trace.fromString(s):(i=R.Trace.fromString(r.get("trace.server.verbosity","off")),o=R.TraceFormat.fromString(r.get("trace.server.format","text")))}this._trace=i,this._traceFormat=o,e.trace(this._trace,this._tracer,{sendNotification:n,traceFormat:this._traceFormat})}hookFileEvents(e){let n=this._clientOptions.synchronize.fileEvents;if(!n)return;let r;ge.array(n)?r=n:r=[n],!!r&&this._dynamicFeatures.get(R.DidChangeWatchedFilesNotification.type.method).registerRaw(me.generateUuid(),r)}registerFeatures(e){for(let n of e)this.registerFeature(n)}registerFeature(e){if(this._features.push(e),$a.is(e)){let n=e.registrationType;this._dynamicFeatures.set(n.method,e)}}getFeature(e){return this._dynamicFeatures.get(e)}registerBuiltinFeatures(){this.registerFeature(new Fp(this)),this.registerFeature(new dp(this,this._syncedDocuments)),this.registerFeature(new pp(this)),this.registerFeature(new hp(this)),this.registerFeature(new gp(this)),this.registerFeature(new mp(this)),this.registerFeature(new fp(this,this._syncedDocuments)),this.registerFeature(new vp(this,e=>this.notifyFileEvent(e))),this.registerFeature(new Cp(this)),this.registerFeature(new wp(this)),this.registerFeature(new Rp(this)),this.registerFeature(new bp(this)),this.registerFeature(new Tp(this)),this.registerFeature(new Dp(this)),this.registerFeature(new Sp(this)),this.registerFeature(new _p(this)),this.registerFeature(new Pp(this)),this.registerFeature(new Ep(this)),this.registerFeature(new xp(this)),this.registerFeature(new kp(this)),this.registerFeature(new qp(this)),this.registerFeature(new Op(this)),this.registerFeature(new Ip(this)),this.registerFeature(new Np(this))}fillInitializeParams(e){for(let n of this._features)ge.func(n.fillInitializeParams)&&n.fillInitializeParams(e)}computeClientCapabilities(){let e={};V(e,"workspace").applyEdit=!0;let n=V(V(e,"workspace"),"workspaceEdit");n.documentChanges=!0,n.resourceOperations=[R.ResourceOperationKind.Create,R.ResourceOperationKind.Rename,R.ResourceOperationKind.Delete],n.failureHandling=R.FailureHandlingKind.TextOnlyTransactional,n.normalizesLineEndings=!0,n.changeAnnotationSupport={groupsOnLabel:!0};let r=V(V(e,"textDocument"),"publishDiagnostics");r.relatedInformation=!0,r.versionSupport=!1,r.tagSupport={valueSet:[R.DiagnosticTag.Unnecessary,R.DiagnosticTag.Deprecated]},r.codeDescriptionSupport=!0,r.dataSupport=!0;let i=V(e,"window"),o=V(i,"showMessage");o.messageActionItem={additionalPropertiesSupport:!0};let s=V(i,"showDocument");s.support=!0;let c=V(e,"general");c.staleRequestSupport={cancel:!0,retryOnContentModified:Array.from(Gr.RequestsToCancelOnContentModified)},c.regularExpressions={engine:"ECMAScript",version:"ES2020"},c.markdown={parser:"marked",version:"1.1.0"};for(let a of this._features)a.fillClientCapabilities(e);return e}initializeFeatures(e){let n=this._clientOptions.documentSelector;for(let r of this._features)r.initialize(this._capabilities,n)}handleRegistrationRequest(e){return new Promise((n,r)=>{for(let i of e.registrations){let o=this._dynamicFeatures.get(i.method);if(o===void 0){r(new Error(`No feature implementation for ${i.method} found. Registration failed.`));return}let s=i.registerOptions||{};s.documentSelector=s.documentSelector||this._clientOptions.documentSelector;let c={id:i.id,registerOptions:s};try{o.register(c)}catch(a){r(a);return}}n()})}handleUnregistrationRequest(e){return new Promise((n,r)=>{for(let i of e.unregisterations){let o=this._dynamicFeatures.get(i.method);if(!o){r(new Error(`No feature implementation for ${i.method} found. Unregistration failed.`));return}o.unregister(i.id)}n()})}handleApplyWorkspaceEdit(e){let n=e.edit,r=new Map;j.workspace.textDocuments.forEach(o=>r.set(o.uri.toString(),o));let i=!1;if(n.documentChanges){for(let o of n.documentChanges)if(R.TextDocumentEdit.is(o)&&o.textDocument.version&&o.textDocument.version>=0){let s=r.get(o.textDocument.uri);if(s&&s.version!==o.textDocument.version){i=!0;break}}}return i?Promise.resolve({applied:!1}):ge.asPromise(j.workspace.applyEdit(this._p2c.asWorkspaceEdit(e.edit)).then(o=>({applied:o})))}handleFailedRequest(e,n,r,i){if(r instanceof R.ResponseError){if(r.code===R.LSPErrorCodes.RequestCancelled||r.code===R.LSPErrorCodes.ServerCancelled){if(n!==void 0&&n.isCancellationRequested)return i;throw r.data!==void 0?new Ha(r.data):new j.CancellationError}else if(r.code===R.LSPErrorCodes.ContentModified){if(Gr.RequestsToCancelOnContentModified.has(e.method))throw new j.CancellationError;return i}}throw this.error(`Request ${e.method} failed.`,r),r}};ve.BaseLanguageClient=Gr;Gr.RequestsToCancelOnContentModified=new Set([R.SemanticTokensRequest.method,R.SemanticTokensRangeRequest.method,R.SemanticTokensDeltaRequest.method])});var Mp=_(Wo=>{"use strict";Object.defineProperty(Wo,"__esModule",{value:!0});Wo.ColorProviderFeature=void 0;var Ho=require("vscode"),Wi=we(),AT=Rt();function Ap(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var Lp=class extends AT.TextDocumentFeature{constructor(e){super(e,Wi.DocumentColorRequest.type)}fillClientCapabilities(e){Ap(Ap(e,"textDocument"),"colorProvider").dynamicRegistration=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.colorProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n={provideColorPresentations:(r,i,o)=>{let s=this._client,c=(p,h,m)=>{let C={color:p,textDocument:s.code2ProtocolConverter.asTextDocumentIdentifier(h.document),range:s.code2ProtocolConverter.asRange(h.range)};return s.sendRequest(Wi.ColorPresentationRequest.type,C,m).then(this.asColorPresentations.bind(this),v=>s.handleFailedRequest(Wi.ColorPresentationRequest.type,m,v,null))},a=s.clientOptions.middleware;return a.provideColorPresentations?a.provideColorPresentations(r,i,o,c):c(r,i,o)},provideDocumentColors:(r,i)=>{let o=this._client,s=(a,p)=>{let h={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(a)};return o.sendRequest(Wi.DocumentColorRequest.type,h,p).then(this.asColorInformations.bind(this),m=>o.handleFailedRequest(Wi.ColorPresentationRequest.type,p,m,null))},c=o.clientOptions.middleware;return c.provideDocumentColors?c.provideDocumentColors(r,i,s):s(r,i)}};return[Ho.languages.registerColorProvider(e.documentSelector,n),n]}asColor(e){return new Ho.Color(e.red,e.green,e.blue,e.alpha)}asColorInformations(e){return Array.isArray(e)?e.map(n=>new Ho.ColorInformation(this._client.protocol2CodeConverter.asRange(n.range),this.asColor(n.color))):[]}asColorPresentations(e){return Array.isArray(e)?e.map(n=>{let r=new Ho.ColorPresentation(n.label);return r.additionalTextEdits=this._client.protocol2CodeConverter.asTextEdits(n.additionalTextEdits),r.textEdit=this._client.protocol2CodeConverter.asTextEdit(n.textEdit),r}):[]}};Wo.ColorProviderFeature=Lp});var Hp=_(zo=>{"use strict";Object.defineProperty(zo,"__esModule",{value:!0});zo.ImplementationFeature=void 0;var LT=require("vscode"),Wa=we(),MT=Rt();function $p(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var jp=class extends MT.TextDocumentFeature{constructor(e){super(e,Wa.ImplementationRequest.type)}fillClientCapabilities(e){let n=$p($p(e,"textDocument"),"implementation");n.dynamicRegistration=!0,n.linkSupport=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.implementationProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n={provideImplementation:(r,i,o)=>{let s=this._client,c=(p,h,m)=>s.sendRequest(Wa.ImplementationRequest.type,s.code2ProtocolConverter.asTextDocumentPositionParams(p,h),m).then(s.protocol2CodeConverter.asDefinitionResult,C=>s.handleFailedRequest(Wa.ImplementationRequest.type,m,C,null)),a=s.clientOptions.middleware;return a.provideImplementation?a.provideImplementation(r,i,o,c):c(r,i,o)}};return[LT.languages.registerImplementationProvider(e.documentSelector,n),n]}};zo.ImplementationFeature=jp});var zp=_(Ko=>{"use strict";Object.defineProperty(Ko,"__esModule",{value:!0});Ko.TypeDefinitionFeature=void 0;var $T=require("vscode"),za=we(),jT=Rt();function Uo(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var Wp=class extends jT.TextDocumentFeature{constructor(e){super(e,za.TypeDefinitionRequest.type)}fillClientCapabilities(e){Uo(Uo(e,"textDocument"),"typeDefinition").dynamicRegistration=!0;let n=Uo(Uo(e,"textDocument"),"typeDefinition");n.dynamicRegistration=!0,n.linkSupport=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.typeDefinitionProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n={provideTypeDefinition:(r,i,o)=>{let s=this._client,c=(p,h,m)=>s.sendRequest(za.TypeDefinitionRequest.type,s.code2ProtocolConverter.asTextDocumentPositionParams(p,h),m).then(s.protocol2CodeConverter.asDefinitionResult,C=>s.handleFailedRequest(za.TypeDefinitionRequest.type,m,C,null)),a=s.clientOptions.middleware;return a.provideTypeDefinition?a.provideTypeDefinition(r,i,o,c):c(r,i,o)}};return[$T.languages.registerTypeDefinitionProvider(e.documentSelector,n),n]}};Ko.TypeDefinitionFeature=Wp});var Kp=_(Vr=>{"use strict";Object.defineProperty(Vr,"__esModule",{value:!0});Vr.WorkspaceFoldersFeature=Vr.arrayDiff=void 0;var HT=$i(),Bo=require("vscode"),Go=we();function Ua(t,e){if(t!==void 0)return t[e]}function Ka(t,e){return t.filter(n=>e.indexOf(n)<0)}Vr.arrayDiff=Ka;var Up=class{constructor(e){this._client=e,this._listeners=new Map}get registrationType(){return Go.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(e){let n=Bo.workspace.workspaceFolders;this.initializeWithFolders(n),n===void 0?e.workspaceFolders=null:e.workspaceFolders=n.map(r=>this.asProtocol(r))}initializeWithFolders(e){this._initialFolders=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.workspaceFolders=!0}initialize(e){let n=this._client;n.onRequest(Go.WorkspaceFoldersRequest.type,o=>{let s=()=>{let a=Bo.workspace.workspaceFolders;return a===void 0?null:a.map(h=>this.asProtocol(h))},c=n.clientOptions.middleware.workspace;return c&&c.workspaceFolders?c.workspaceFolders(o,s):s(o)});let r=Ua(Ua(Ua(e,"workspace"),"workspaceFolders"),"changeNotifications"),i;typeof r=="string"?i=r:r===!0&&(i=HT.generateUuid()),i&&this.register({id:i,registerOptions:void 0})}sendInitialEvent(e){if(this._initialFolders&&e){let n=Ka(this._initialFolders,e),r=Ka(e,this._initialFolders);(r.length>0||n.length>0)&&this.doSendEvent(r,n)}else this._initialFolders?this.doSendEvent([],this._initialFolders):e&&this.doSendEvent(e,[])}doSendEvent(e,n){let r={event:{added:e.map(i=>this.asProtocol(i)),removed:n.map(i=>this.asProtocol(i))}};this._client.sendNotification(Go.DidChangeWorkspaceFoldersNotification.type,r).catch(i=>{this._client.error(`Sending notification ${Go.DidChangeWorkspaceFoldersNotification.type.method} failed`,i)})}register(e){let n=e.id,r=this._client,i=Bo.workspace.onDidChangeWorkspaceFolders(o=>{let s=a=>{this.doSendEvent(a.added,a.removed)},c=r.clientOptions.middleware.workspace;c&&c.didChangeWorkspaceFolders?c.didChangeWorkspaceFolders(o,s):s(o)});this._listeners.set(n,i),this.sendInitialEvent(Bo.workspace.workspaceFolders)}unregister(e){let n=this._listeners.get(e);n!==void 0&&(this._listeners.delete(e),n.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}asProtocol(e){return e===void 0?null:{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}}};Vr.WorkspaceFoldersFeature=Up});var Gp=_(Vo=>{"use strict";Object.defineProperty(Vo,"__esModule",{value:!0});Vo.FoldingRangeFeature=void 0;var zi=require("vscode"),Xr=we(),WT=Rt();function Bp(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var Ui=class extends WT.TextDocumentFeature{constructor(e){super(e,Xr.FoldingRangeRequest.type)}fillClientCapabilities(e){let n=Bp(Bp(e,"textDocument"),"foldingRange");n.dynamicRegistration=!0,n.rangeLimit=5e3,n.lineFoldingOnly=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.foldingRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n={provideFoldingRanges:(r,i,o)=>{let s=this._client,c=(p,h,m)=>{let C={textDocument:s.code2ProtocolConverter.asTextDocumentIdentifier(p)};return s.sendRequest(Xr.FoldingRangeRequest.type,C,m).then(Ui.asFoldingRanges,v=>s.handleFailedRequest(Xr.FoldingRangeRequest.type,m,v,null))},a=s.clientOptions.middleware;return a.provideFoldingRanges?a.provideFoldingRanges(r,i,o,c):c(r,i,o)}};return[zi.languages.registerFoldingRangeProvider(e.documentSelector,n),n]}static asFoldingRangeKind(e){if(e)switch(e){case Xr.FoldingRangeKind.Comment:return zi.FoldingRangeKind.Comment;case Xr.FoldingRangeKind.Imports:return zi.FoldingRangeKind.Imports;case Xr.FoldingRangeKind.Region:return zi.FoldingRangeKind.Region}}static asFoldingRanges(e){return Array.isArray(e)?e.map(n=>new zi.FoldingRange(n.startLine,n.endLine,Ui.asFoldingRangeKind(n.kind))):[]}};Vo.FoldingRangeFeature=Ui});var Jp=_(Xo=>{"use strict";Object.defineProperty(Xo,"__esModule",{value:!0});Xo.DeclarationFeature=void 0;var zT=require("vscode"),Ba=we(),UT=Rt();function Vp(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var Xp=class extends UT.TextDocumentFeature{constructor(e){super(e,Ba.DeclarationRequest.type)}fillClientCapabilities(e){let n=Vp(Vp(e,"textDocument"),"declaration");n.dynamicRegistration=!0,n.linkSupport=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.declarationProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n={provideDeclaration:(r,i,o)=>{let s=this._client,c=(p,h,m)=>s.sendRequest(Ba.DeclarationRequest.type,s.code2ProtocolConverter.asTextDocumentPositionParams(p,h),m).then(s.protocol2CodeConverter.asDeclarationResult,C=>s.handleFailedRequest(Ba.DeclarationRequest.type,m,C,null)),a=s.clientOptions.middleware;return a.provideDeclaration?a.provideDeclaration(r,i,o,c):c(r,i,o)}};return[zT.languages.registerDeclarationProvider(e.documentSelector,n),n]}};Xo.DeclarationFeature=Xp});var Zp=_(Jo=>{"use strict";Object.defineProperty(Jo,"__esModule",{value:!0});Jo.SelectionRangeFeature=void 0;var KT=require("vscode"),Ga=we(),BT=Rt();function Yp(t,e){return t[e]===void 0&&(t[e]=Object.create(null)),t[e]}var Qp=class extends BT.TextDocumentFeature{constructor(e){super(e,Ga.SelectionRangeRequest.type)}fillClientCapabilities(e){let n=Yp(Yp(e,"textDocument"),"selectionRange");n.dynamicRegistration=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.selectionRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n={provideSelectionRanges:(r,i,o)=>{let s=this._client,c=(p,h,m)=>{let C={textDocument:s.code2ProtocolConverter.asTextDocumentIdentifier(p),positions:s.code2ProtocolConverter.asPositions(h)};return s.sendRequest(Ga.SelectionRangeRequest.type,C,m).then(v=>s.protocol2CodeConverter.asSelectionRanges(v),v=>s.handleFailedRequest(Ga.SelectionRangeRequest.type,m,v,null))},a=s.clientOptions.middleware;return a.provideSelectionRanges?a.provideSelectionRanges(r,i,o,c):c(r,i,o)}};return[KT.languages.registerSelectionRangeProvider(e.documentSelector,n),n]}};Jo.SelectionRangeFeature=Qp});var th=_(Yo=>{"use strict";Object.defineProperty(Yo,"__esModule",{value:!0});Yo.ProgressFeature=void 0;var GT=we(),VT=Ma();function XT(t,e){return t[e]===void 0&&(t[e]=Object.create(null)),t[e]}var eh=class{constructor(e){this._client=e,this.activeParts=new Set}fillClientCapabilities(e){XT(e,"window").workDoneProgress=!0}initialize(){let e=this._client,n=i=>{this.activeParts.delete(i)},r=i=>{this.activeParts.add(new VT.ProgressPart(this._client,i.token,n))};e.onRequest(GT.WorkDoneProgressCreateRequest.type,r)}dispose(){for(let e of this.activeParts)e.done();this.activeParts.clear()}};Yo.ProgressFeature=eh});var oh=_(Qo=>{"use strict";Object.defineProperty(Qo,"__esModule",{value:!0});Qo.CallHierarchyFeature=void 0;var JT=require("vscode"),wr=we(),YT=Rt();function nh(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var rh=class{constructor(e){this.client=e,this.middleware=e.clientOptions.middleware}prepareCallHierarchy(e,n,r){let i=this.client,o=this.middleware,s=(c,a,p)=>{let h=i.code2ProtocolConverter.asTextDocumentPositionParams(c,a);return i.sendRequest(wr.CallHierarchyPrepareRequest.type,h,p).then(m=>i.protocol2CodeConverter.asCallHierarchyItems(m),m=>i.handleFailedRequest(wr.CallHierarchyPrepareRequest.type,p,m,null))};return o.prepareCallHierarchy?o.prepareCallHierarchy(e,n,r,s):s(e,n,r)}provideCallHierarchyIncomingCalls(e,n){let r=this.client,i=this.middleware,o=(s,c)=>{let a={item:r.code2ProtocolConverter.asCallHierarchyItem(s)};return r.sendRequest(wr.CallHierarchyIncomingCallsRequest.type,a,c).then(p=>r.protocol2CodeConverter.asCallHierarchyIncomingCalls(p),p=>r.handleFailedRequest(wr.CallHierarchyIncomingCallsRequest.type,c,p,null))};return i.provideCallHierarchyIncomingCalls?i.provideCallHierarchyIncomingCalls(e,n,o):o(e,n)}provideCallHierarchyOutgoingCalls(e,n){let r=this.client,i=this.middleware,o=(s,c)=>{let a={item:r.code2ProtocolConverter.asCallHierarchyItem(s)};return r.sendRequest(wr.CallHierarchyOutgoingCallsRequest.type,a,c).then(p=>r.protocol2CodeConverter.asCallHierarchyOutgoingCalls(p),p=>r.handleFailedRequest(wr.CallHierarchyOutgoingCallsRequest.type,c,p,null))};return i.provideCallHierarchyOutgoingCalls?i.provideCallHierarchyOutgoingCalls(e,n,o):o(e,n)}},ih=class extends YT.TextDocumentFeature{constructor(e){super(e,wr.CallHierarchyPrepareRequest.type)}fillClientCapabilities(e){let r=nh(nh(e,"textDocument"),"callHierarchy");r.dynamicRegistration=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.callHierarchyProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=this._client,r=new rh(n);return[JT.languages.registerCallHierarchyProvider(e.documentSelector,r),r]}};Qo.CallHierarchyFeature=ih});var ah=_(ts=>{"use strict";Object.defineProperty(ts,"__esModule",{value:!0});ts.SemanticTokensFeature=void 0;var Zo=require("vscode"),QT=Rt(),te=we(),ZT=Sn();function es(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var sh=class extends QT.TextDocumentFeature{constructor(e){super(e,te.SemanticTokensRegistrationType.type)}fillClientCapabilities(e){let n=es(es(e,"textDocument"),"semanticTokens");n.dynamicRegistration=!0,n.tokenTypes=[te.SemanticTokenTypes.namespace,te.SemanticTokenTypes.type,te.SemanticTokenTypes.class,te.SemanticTokenTypes.enum,te.SemanticTokenTypes.interface,te.SemanticTokenTypes.struct,te.SemanticTokenTypes.typeParameter,te.SemanticTokenTypes.parameter,te.SemanticTokenTypes.variable,te.SemanticTokenTypes.property,te.SemanticTokenTypes.enumMember,te.SemanticTokenTypes.event,te.SemanticTokenTypes.function,te.SemanticTokenTypes.method,te.SemanticTokenTypes.macro,te.SemanticTokenTypes.keyword,te.SemanticTokenTypes.modifier,te.SemanticTokenTypes.comment,te.SemanticTokenTypes.string,te.SemanticTokenTypes.number,te.SemanticTokenTypes.regexp,te.SemanticTokenTypes.operator],n.tokenModifiers=[te.SemanticTokenModifiers.declaration,te.SemanticTokenModifiers.definition,te.SemanticTokenModifiers.readonly,te.SemanticTokenModifiers.static,te.SemanticTokenModifiers.deprecated,te.SemanticTokenModifiers.abstract,te.SemanticTokenModifiers.async,te.SemanticTokenModifiers.modification,te.SemanticTokenModifiers.documentation,te.SemanticTokenModifiers.defaultLibrary],n.formats=[te.TokenFormat.Relative],n.requests={range:!0,full:{delta:!0}},n.multilineTokenSupport=!1,n.overlappingTokenSupport=!1,es(es(e,"workspace"),"semanticTokens").refreshSupport=!0}initialize(e,n){this._client.onRequest(te.SemanticTokensRefreshRequest.type,async()=>{for(let s of this.getAllProviders())s.onDidChangeSemanticTokensEmitter.fire()});let[i,o]=this.getRegistration(n,e.semanticTokensProvider);!i||!o||this.register({id:i,registerOptions:o})}registerLanguageProvider(e){let n=ZT.boolean(e.full)?e.full:e.full!==void 0,r=e.full!==void 0&&typeof e.full!="boolean"&&e.full.delta===!0,i=new Zo.EventEmitter,o=n?{onDidChangeSemanticTokens:i.event,provideDocumentSemanticTokens:(m,C)=>{let v=this._client,S=v.clientOptions.middleware,k=(N,F)=>{let L={textDocument:v.code2ProtocolConverter.asTextDocumentIdentifier(N)};return v.sendRequest(te.SemanticTokensRequest.type,L,F).then(E=>v.protocol2CodeConverter.asSemanticTokens(E),E=>v.handleFailedRequest(te.SemanticTokensRequest.type,F,E,null))};return S.provideDocumentSemanticTokens?S.provideDocumentSemanticTokens(m,C,k):k(m,C)},provideDocumentSemanticTokensEdits:r?(m,C,v)=>{let S=this._client,k=S.clientOptions.middleware,N=(F,L,E)=>{let M={textDocument:S.code2ProtocolConverter.asTextDocumentIdentifier(F),previousResultId:L};return S.sendRequest(te.SemanticTokensDeltaRequest.type,M,E).then(q=>te.SemanticTokens.is(q)?S.protocol2CodeConverter.asSemanticTokens(q):S.protocol2CodeConverter.asSemanticTokensEdits(q),q=>S.handleFailedRequest(te.SemanticTokensDeltaRequest.type,E,q,null))};return k.provideDocumentSemanticTokensEdits?k.provideDocumentSemanticTokensEdits(m,C,v,N):N(m,C,v)}:void 0}:void 0,c=e.range===!0?{provideDocumentRangeSemanticTokens:(m,C,v)=>{let S=this._client,k=S.clientOptions.middleware,N=(F,L,E)=>{let M={textDocument:S.code2ProtocolConverter.asTextDocumentIdentifier(F),range:S.code2ProtocolConverter.asRange(L)};return S.sendRequest(te.SemanticTokensRangeRequest.type,M,E).then(q=>S.protocol2CodeConverter.asSemanticTokens(q),q=>S.handleFailedRequest(te.SemanticTokensRangeRequest.type,E,q,null))};return k.provideDocumentRangeSemanticTokens?k.provideDocumentRangeSemanticTokens(m,C,v,N):N(m,C,v)}}:void 0,a=[],h=this._client.protocol2CodeConverter.asSemanticTokensLegend(e.legend);return o!==void 0&&a.push(Zo.languages.registerDocumentSemanticTokensProvider(e.documentSelector,o,h)),c!==void 0&&a.push(Zo.languages.registerDocumentRangeSemanticTokensProvider(e.documentSelector,c,h)),[new Zo.Disposable(()=>a.forEach(m=>m.dispose())),{range:c,full:o,onDidChangeSemanticTokensEmitter:i}]}};ts.SemanticTokensFeature=sh});var uh=_((SE,ch)=>{ch.exports=function(t,e){for(var n=[],r=0;r<t.length;r++){var i=e(t[r],r);eD(i)?n.push.apply(n,i):n.push(i)}return n};var eD=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"}});var hh=_((_E,ph)=>{"use strict";ph.exports=lh;function lh(t,e,n){t instanceof RegExp&&(t=dh(t,n)),e instanceof RegExp&&(e=dh(e,n));var r=fh(t,e,n);return r&&{start:r[0],end:r[1],pre:n.slice(0,r[0]),body:n.slice(r[0]+t.length,r[1]),post:n.slice(r[1]+e.length)}}function dh(t,e){var n=e.match(t);return n?n[0]:null}lh.range=fh;function fh(t,e,n){var r,i,o,s,c,a=n.indexOf(t),p=n.indexOf(e,a+1),h=a;if(a>=0&&p>0){if(t===e)return[a,p];for(r=[],o=n.length;h>=0&&!c;)h==a?(r.push(h),a=n.indexOf(t,h+1)):r.length==1?c=[r.pop(),p]:(i=r.pop(),i<o&&(o=i,s=p),p=n.indexOf(e,h+1)),h=a<p&&a>=0?a:p;r.length&&(c=[o,s])}return c}});var bh=_((PE,Rh)=>{var tD=uh(),gh=hh();Rh.exports=iD;var mh="\0SLASH"+Math.random()+"\0",vh="\0OPEN"+Math.random()+"\0",Va="\0CLOSE"+Math.random()+"\0",yh="\0COMMA"+Math.random()+"\0",Ch="\0PERIOD"+Math.random()+"\0";function Xa(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function nD(t){return t.split("\\\\").join(mh).split("\\{").join(vh).split("\\}").join(Va).split("\\,").join(yh).split("\\.").join(Ch)}function rD(t){return t.split(mh).join("\\").split(vh).join("{").split(Va).join("}").split(yh).join(",").split(Ch).join(".")}function wh(t){if(!t)return[""];var e=[],n=gh("{","}",t);if(!n)return t.split(",");var r=n.pre,i=n.body,o=n.post,s=r.split(",");s[s.length-1]+="{"+i+"}";var c=wh(o);return o.length&&(s[s.length-1]+=c.shift(),s.push.apply(s,c)),e.push.apply(e,s),e}function iD(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),Jr(nD(t),!0).map(rD)):[]}function oD(t){return"{"+t+"}"}function sD(t){return/^-?0\d/.test(t)}function aD(t,e){return t<=e}function cD(t,e){return t>=e}function Jr(t,e){var n=[],r=gh("{","}",t);if(!r||/\$$/.test(r.pre))return[t];var i=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(r.body),o=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(r.body),s=i||o,c=r.body.indexOf(",")>=0;if(!s&&!c)return r.post.match(/,.*\}/)?(t=r.pre+"{"+r.body+Va+r.post,Jr(t)):[t];var a;if(s)a=r.body.split(/\.\./);else if(a=wh(r.body),a.length===1&&(a=Jr(a[0],!1).map(oD),a.length===1)){var h=r.post.length?Jr(r.post,!1):[""];return h.map(function(ct){return r.pre+a[0]+ct})}var p=r.pre,h=r.post.length?Jr(r.post,!1):[""],m;if(s){var C=Xa(a[0]),v=Xa(a[1]),S=Math.max(a[0].length,a[1].length),k=a.length==3?Math.abs(Xa(a[2])):1,N=aD,F=v<C;F&&(k*=-1,N=cD);var L=a.some(sD);m=[];for(var E=C;N(E,v);E+=k){var M;if(o)M=String.fromCharCode(E),M==="\\"&&(M="");else if(M=String(E),L){var q=S-M.length;if(q>0){var B=new Array(q+1).join("0");E<0?M="-"+B+M.slice(1):M=B+M}}m.push(M)}}else m=tD(a,function(Xe){return Jr(Xe,!1)});for(var X=0;X<m.length;X++)for(var Me=0;Me<h.length;Me++){var xe=p+m[X]+h[Me];(!e||s||xe)&&n.push(xe)}return n}});var xh=_((EE,Eh)=>{Eh.exports=Wt;Wt.Minimatch=Be;var Ki={sep:"/"};try{Ki=require("path")}catch(t){}var Ja=Wt.GLOBSTAR=Be.GLOBSTAR={},uD=bh(),Th={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},Ya="[^/]",Qa=Ya+"*?",lD="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",dD="(?:(?!(?:\\/|^)\\.).)*?",Dh=fD("().*{}+?[]^$\\!");function fD(t){return t.split("").reduce(function(e,n){return e[n]=!0,e},{})}var Sh=/\/+/;Wt.filter=pD;function pD(t,e){return e=e||{},function(n,r,i){return Wt(n,t,e)}}function _h(t,e){t=t||{},e=e||{};var n={};return Object.keys(e).forEach(function(r){n[r]=e[r]}),Object.keys(t).forEach(function(r){n[r]=t[r]}),n}Wt.defaults=function(t){if(!t||!Object.keys(t).length)return Wt;var e=Wt,n=function(i,o,s){return e.minimatch(i,o,_h(t,s))};return n.Minimatch=function(i,o){return new e.Minimatch(i,_h(t,o))},n};Be.defaults=function(t){return!t||!Object.keys(t).length?Be:Wt.defaults(t).Minimatch};function Wt(t,e,n){if(typeof e!="string")throw new TypeError("glob pattern string required");return n||(n={}),!n.nocomment&&e.charAt(0)==="#"?!1:e.trim()===""?t==="":new Be(e,n).match(t)}function Be(t,e){if(!(this instanceof Be))return new Be(t,e);if(typeof t!="string")throw new TypeError("glob pattern string required");e||(e={}),t=t.trim(),Ki.sep!=="/"&&(t=t.split(Ki.sep).join("/")),this.options=e,this.set=[],this.pattern=t,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make()}Be.prototype.debug=function(){};Be.prototype.make=hD;function hD(){if(!this._made){var t=this.pattern,e=this.options;if(!e.nocomment&&t.charAt(0)==="#"){this.comment=!0;return}if(!t){this.empty=!0;return}this.parseNegate();var n=this.globSet=this.braceExpand();e.debug&&(this.debug=console.error),this.debug(this.pattern,n),n=this.globParts=n.map(function(r){return r.split(Sh)}),this.debug(this.pattern,n),n=n.map(function(r,i,o){return r.map(this.parse,this)},this),this.debug(this.pattern,n),n=n.filter(function(r){return r.indexOf(!1)===-1}),this.debug(this.pattern,n),this.set=n}}Be.prototype.parseNegate=gD;function gD(){var t=this.pattern,e=!1,n=this.options,r=0;if(!n.nonegate){for(var i=0,o=t.length;i<o&&t.charAt(i)==="!";i++)e=!e,r++;r&&(this.pattern=t.substr(r)),this.negate=e}}Wt.braceExpand=function(t,e){return Ph(t,e)};Be.prototype.braceExpand=Ph;function Ph(t,e){if(e||(this instanceof Be?e=this.options:e={}),t=typeof t=="undefined"?this.pattern:t,typeof t=="undefined")throw new TypeError("undefined pattern");return e.nobrace||!t.match(/\{.*\}/)?[t]:uD(t)}Be.prototype.parse=mD;var ns={};function mD(t,e){if(t.length>1024*64)throw new TypeError("pattern is too long");var n=this.options;if(!n.noglobstar&&t==="**")return Ja;if(t==="")return"";var r="",i=!!n.nocase,o=!1,s=[],c=[],a,p=!1,h=-1,m=-1,C=t.charAt(0)==="."?"":n.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",v=this;function S(){if(a){switch(a){case"*":r+=Qa,i=!0;break;case"?":r+=Ya,i=!0;break;default:r+="\\"+a;break}v.debug("clearStateChar %j %j",a,r),a=!1}}for(var k=0,N=t.length,F;k<N&&(F=t.charAt(k));k++){if(this.debug("%s	%s %s %j",t,k,r,F),o&&Dh[F]){r+="\\"+F,o=!1;continue}switch(F){case"/":return!1;case"\\":S(),o=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",t,k,r,F),p){this.debug("  in class"),F==="!"&&k===m+1&&(F="^"),r+=F;continue}v.debug("call clearStateChar %j",a),S(),a=F,n.noext&&S();continue;case"(":if(p){r+="(";continue}if(!a){r+="\\(";continue}s.push({type:a,start:k-1,reStart:r.length,open:Th[a].open,close:Th[a].close}),r+=a==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",a,r),a=!1;continue;case")":if(p||!s.length){r+="\\)";continue}S(),i=!0;var L=s.pop();r+=L.close,L.type==="!"&&c.push(L),L.reEnd=r.length;continue;case"|":if(p||!s.length||o){r+="\\|",o=!1;continue}S(),r+="|";continue;case"[":if(S(),p){r+="\\"+F;continue}p=!0,m=k,h=r.length,r+=F;continue;case"]":if(k===m+1||!p){r+="\\"+F,o=!1;continue}if(p){var E=t.substring(m+1,k);try{RegExp("["+E+"]")}catch(et){var M=this.parse(E,ns);r=r.substr(0,h)+"\\["+M[0]+"\\]",i=i||M[1],p=!1;continue}}i=!0,p=!1,r+=F;continue;default:S(),o?o=!1:Dh[F]&&!(F==="^"&&p)&&(r+="\\"),r+=F}}for(p&&(E=t.substr(m+1),M=this.parse(E,ns),r=r.substr(0,h)+"\\["+M[0],i=i||M[1]),L=s.pop();L;L=s.pop()){var q=r.slice(L.reStart+L.open.length);this.debug("setting tail",r,L),q=q.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(et,Tt,qt){return qt||(qt="\\"),Tt+Tt+qt+"|"}),this.debug(`tail=%j
   %s`,q,q,L,r);var B=L.type==="*"?Qa:L.type==="?"?Ya:"\\"+L.type;i=!0,r=r.slice(0,L.reStart)+B+"\\("+q}S(),o&&(r+="\\\\");var X=!1;switch(r.charAt(0)){case".":case"[":case"(":X=!0}for(var Me=c.length-1;Me>-1;Me--){var xe=c[Me],Xe=r.slice(0,xe.reStart),ct=r.slice(xe.reStart,xe.reEnd-8),$e=r.slice(xe.reEnd-8,xe.reEnd),ut=r.slice(xe.reEnd);$e+=ut;var yt=Xe.split("(").length-1,lt=ut;for(k=0;k<yt;k++)lt=lt.replace(/\)[+*?]?/,"");ut=lt;var Kt="";ut===""&&e!==ns&&(Kt="$");var De=Xe+ct+ut+Kt+$e;r=De}if(r!==""&&i&&(r="(?=.)"+r),X&&(r=C+r),e===ns)return[r,i];if(!i)return CD(t);var dt=n.nocase?"i":"";try{var ft=new RegExp("^"+r+"$",dt)}catch(et){return new RegExp("$.")}return ft._glob=t,ft._src=r,ft}Wt.makeRe=function(t,e){return new Be(t,e||{}).makeRe()};Be.prototype.makeRe=vD;function vD(){if(this.regexp||this.regexp===!1)return this.regexp;var t=this.set;if(!t.length)return this.regexp=!1,this.regexp;var e=this.options,n=e.noglobstar?Qa:e.dot?lD:dD,r=e.nocase?"i":"",i=t.map(function(o){return o.map(function(s){return s===Ja?n:typeof s=="string"?wD(s):s._src}).join("\\/")}).join("|");i="^(?:"+i+")$",this.negate&&(i="^(?!"+i+").*$");try{this.regexp=new RegExp(i,r)}catch(o){this.regexp=!1}return this.regexp}Wt.match=function(t,e,n){n=n||{};var r=new Be(e,n);return t=t.filter(function(i){return r.match(i)}),r.options.nonull&&!t.length&&t.push(e),t};Be.prototype.match=yD;function yD(t,e){if(this.debug("match",t,this.pattern),this.comment)return!1;if(this.empty)return t==="";if(t==="/"&&e)return!0;var n=this.options;Ki.sep!=="/"&&(t=t.split(Ki.sep).join("/")),t=t.split(Sh),this.debug(this.pattern,"split",t);var r=this.set;this.debug(this.pattern,"set",r);var i,o;for(o=t.length-1;o>=0&&(i=t[o],!i);o--);for(o=0;o<r.length;o++){var s=r[o],c=t;n.matchBase&&s.length===1&&(c=[i]);var a=this.matchOne(c,s,e);if(a)return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}Be.prototype.matchOne=function(t,e,n){var r=this.options;this.debug("matchOne",{this:this,file:t,pattern:e}),this.debug("matchOne",t.length,e.length);for(var i=0,o=0,s=t.length,c=e.length;i<s&&o<c;i++,o++){this.debug("matchOne loop");var a=e[o],p=t[i];if(this.debug(e,a,p),a===!1)return!1;if(a===Ja){this.debug("GLOBSTAR",[e,a,p]);var h=i,m=o+1;if(m===c){for(this.debug("** at the end");i<s;i++)if(t[i]==="."||t[i]===".."||!r.dot&&t[i].charAt(0)===".")return!1;return!0}for(;h<s;){var C=t[h];if(this.debug(`
globstar while`,t,h,e,m,C),this.matchOne(t.slice(h),e.slice(m),n))return this.debug("globstar found match!",h,s,C),!0;if(C==="."||C===".."||!r.dot&&C.charAt(0)==="."){this.debug("dot detected!",t,h,e,m);break}this.debug("globstar swallow a segment, and continue"),h++}return!!(n&&(this.debug(`
>>> no match, partial?`,t,h,e,m),h===s))}var v;if(typeof a=="string"?(r.nocase?v=p.toLowerCase()===a.toLowerCase():v=p===a,this.debug("string match",a,p,v)):(v=p.match(a),this.debug("pattern match",a,p,v)),!v)return!1}if(i===s&&o===c)return!0;if(i===s)return n;if(o===c){var S=i===s-1&&t[i]==="";return S}throw new Error("wtf?")};function CD(t){return t.replace(/\\(.)/g,"$1")}function wD(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}});var Mh=_(bt=>{"use strict";Object.defineProperty(bt,"__esModule",{value:!0});bt.WillDeleteFilesFeature=bt.WillRenameFilesFeature=bt.WillCreateFilesFeature=bt.DidDeleteFilesFeature=bt.DidRenameFilesFeature=bt.DidCreateFilesFeature=void 0;var ln=require("vscode"),RD=xh(),kn=we(),bD=$i();function kh(t,e){return t[e]===void 0&&(t[e]={}),t[e]}function TD(t,e){return t[e]}function qh(t,e,n){t[e]=n}var Rr=class{constructor(e,n,r,i,o){this._filters=new Map,this._client=e,this._event=n,this._registrationType=r,this._clientCapability=i,this._serverCapability=o}get registrationType(){return this._registrationType}fillClientCapabilities(e){let n=kh(kh(e,"workspace"),"fileOperations");qh(n,"dynamicRegistration",!0),qh(n,this._clientCapability,!0)}initialize(e){var n;let r=(n=e.workspace)===null||n===void 0?void 0:n.fileOperations,i=r!==void 0?TD(r,this._serverCapability):void 0;if((i==null?void 0:i.filters)!==void 0)try{this.register({id:bD.generateUuid(),registerOptions:{filters:i.filters}})}catch(o){this._client.warn(`Ignoring invalid glob pattern for ${this._serverCapability} registration: ${o}`)}}register(e){this._listener||(this._listener=this._event(this.send,this));let n=e.registerOptions.filters.map(r=>{let i=new RD.Minimatch(r.pattern.glob,Rr.asMinimatchOptions(r.pattern.options));if(!i.makeRe())throw new Error(`Invalid pattern ${r.pattern.glob}!`);return{scheme:r.scheme,matcher:i,kind:r.pattern.matches}});this._filters.set(e.id,n)}unregister(e){this._filters.delete(e),this._filters.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._filters.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}async filter(e,n){let r=await Promise.all(e.files.map(async o=>{let s=n(o),c=s.fsPath.replace(/\\/g,"/");for(let a of this._filters.values())for(let p of a)if(!(p.scheme!==void 0&&p.scheme!==s.scheme)){if(p.matcher.match(c)){if(p.kind===void 0)return!0;let h=await Rr.getFileType(s);if(h===void 0)return this._client.error(`Failed to determine file type for ${s.toString()}.`),!0;if(h===ln.FileType.File&&p.kind===kn.FileOperationPatternKind.file||h===ln.FileType.Directory&&p.kind===kn.FileOperationPatternKind.folder)return!0}else if(p.kind===kn.FileOperationPatternKind.folder&&await Rr.getFileType(s)===ln.FileType.Directory&&p.matcher.match(`${c}/`))return!0}return!1})),i=e.files.filter((o,s)=>r[s]);return Object.assign(Object.assign({},e),{files:i})}static async getFileType(e){try{return(await ln.workspace.fs.stat(e)).type}catch(n){return}}static asMinimatchOptions(e){if(e!==void 0&&e.ignoreCase===!0)return{nocase:!0}}},rs=class extends Rr{constructor(e,n,r,i,o,s,c){super(e,n,r,i,o);this._notificationType=r,this._accessUri=s,this._createParams=c}async send(e){let n=await this.filter(e,this._accessUri);if(n.files.length){let r=async i=>this._client.sendNotification(this._notificationType,this._createParams(i));this.doSend(n,r)}}},Oh=class extends rs{constructor(e){super(e,ln.workspace.onDidCreateFiles,kn.DidCreateFilesNotification.type,"didCreate","didCreate",n=>n,e.code2ProtocolConverter.asDidCreateFilesParams)}doSend(e,n){var r;let i=(r=this._client.clientOptions.middleware)===null||r===void 0?void 0:r.workspace;return(i==null?void 0:i.didCreateFiles)?i.didCreateFiles(e,n):n(e)}};bt.DidCreateFilesFeature=Oh;var Ih=class extends rs{constructor(e){super(e,ln.workspace.onDidRenameFiles,kn.DidRenameFilesNotification.type,"didRename","didRename",n=>n.oldUri,e.code2ProtocolConverter.asDidRenameFilesParams)}doSend(e,n){var r;let i=(r=this._client.clientOptions.middleware)===null||r===void 0?void 0:r.workspace;return(i==null?void 0:i.didRenameFiles)?i.didRenameFiles(e,n):n(e)}};bt.DidRenameFilesFeature=Ih;var Fh=class extends rs{constructor(e){super(e,ln.workspace.onDidDeleteFiles,kn.DidDeleteFilesNotification.type,"didDelete","didDelete",n=>n,e.code2ProtocolConverter.asDidDeleteFilesParams)}doSend(e,n){var r;let i=(r=this._client.clientOptions.middleware)===null||r===void 0?void 0:r.workspace;return(i==null?void 0:i.didDeleteFiles)?i.didDeleteFiles(e,n):n(e)}};bt.DidDeleteFilesFeature=Fh;var is=class extends Rr{constructor(e,n,r,i,o,s,c){super(e,n,r,i,o);this._requestType=r,this._accessUri=s,this._createParams=c}async send(e){let n=this.waitUntil(e);e.waitUntil(n)}async waitUntil(e){let n=await this.filter(e,this._accessUri);if(n.files.length){let r=i=>this._client.sendRequest(this._requestType,this._createParams(i)).then(this._client.protocol2CodeConverter.asWorkspaceEdit);return this.doSend(n,r)}else return}},Nh=class extends is{constructor(e){super(e,ln.workspace.onWillCreateFiles,kn.WillCreateFilesRequest.type,"willCreate","willCreate",n=>n,e.code2ProtocolConverter.asWillCreateFilesParams)}doSend(e,n){var r;let i=(r=this._client.clientOptions.middleware)===null||r===void 0?void 0:r.workspace;return(i==null?void 0:i.willCreateFiles)?i.willCreateFiles(e,n):n(e)}};bt.WillCreateFilesFeature=Nh;var Ah=class extends is{constructor(e){super(e,ln.workspace.onWillRenameFiles,kn.WillRenameFilesRequest.type,"willRename","willRename",n=>n.oldUri,e.code2ProtocolConverter.asWillRenameFilesParams)}doSend(e,n){var r;let i=(r=this._client.clientOptions.middleware)===null||r===void 0?void 0:r.workspace;return(i==null?void 0:i.willRenameFiles)?i.willRenameFiles(e,n):n(e)}};bt.WillRenameFilesFeature=Ah;var Lh=class extends is{constructor(e){super(e,ln.workspace.onWillDeleteFiles,kn.WillDeleteFilesRequest.type,"willDelete","willDelete",n=>n,e.code2ProtocolConverter.asWillDeleteFilesParams)}doSend(e,n){var r;let i=(r=this._client.clientOptions.middleware)===null||r===void 0?void 0:r.workspace;return(i==null?void 0:i.willDeleteFiles)?i.willDeleteFiles(e,n):n(e)}};bt.WillDeleteFilesFeature=Lh});var Hh=_(os=>{"use strict";Object.defineProperty(os,"__esModule",{value:!0});os.LinkedEditingFeature=void 0;var DD=require("vscode"),Za=we(),SD=Rt();function $h(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var jh=class extends SD.TextDocumentFeature{constructor(e){super(e,Za.LinkedEditingRangeRequest.type)}fillClientCapabilities(e){let n=$h($h(e,"textDocument"),"linkedEditingRange");n.dynamicRegistration=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.linkedEditingRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n={provideLinkedEditingRanges:(r,i,o)=>{let s=this._client,c=(p,h,m)=>s.sendRequest(Za.LinkedEditingRangeRequest.type,s.code2ProtocolConverter.asTextDocumentPositionParams(p,h),m).then(s.protocol2CodeConverter.asLinkedEditingRanges,C=>s.handleFailedRequest(Za.LinkedEditingRangeRequest.type,m,C,null)),a=s.clientOptions.middleware;return a.provideLinkedEditingRange?a.provideLinkedEditingRange(r,i,o,c):c(r,i,o)}};return[DD.languages.registerLinkedEditingRangeProvider(e.documentSelector,n),n]}};os.LinkedEditingFeature=jh});var Xh=_(br=>{"use strict";Object.defineProperty(br,"__esModule",{value:!0});br.DiagnosticFeature=br.vsdiag=void 0;var gt=require("vscode"),Oe=we(),_D=$i(),Bi=Rt();function Wh(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var dn;(function(t){let e;(function(n){n.full="full",n.unChanged="unChanged"})(e=t.DocumentDiagnosticReportKind||(t.DocumentDiagnosticReportKind={}))})(dn=br.vsdiag||(br.vsdiag={}));var ot;(function(t){t.active="open",t.reschedule="reschedule",t.outDated="drop"})(ot||(ot={}));var zh=class{constructor(){this.open=new Set;let e=()=>{this.open.clear();for(let n of gt.window.openEditors)this.open.add(n.resource.toString())};e(),this.disposable=gt.window.onDidChangeOpenEditors(e)}dispose(){this.disposable.dispose()}isActive(e){var n;return((n=gt.window.activeTextEditor)===null||n===void 0?void 0:n.document)===e}isVisible(e){return this.open.has(e.uri.toString())}},Pt;(function(t){t[t.document=1]="document",t[t.workspace=2]="workspace"})(Pt||(Pt={}));var Uh=class{constructor(){this.documentPullStates=new Map,this.workspacePullStates=new Map}track(e,n,r,i){let o=e===Pt.document?this.documentPullStates:this.workspacePullStates,[s,c,a,p]=typeof n=="string"?[n,gt.Uri.parse(n),r,i]:[n.uri.toString(),n.uri,n.version,r],h=o.get(s);return h===void 0?(h={document:c,pulledVersion:a,resultId:p},o.set(s,h)):(h.pulledVersion=a,h.resultId=p),h}unTrack(e,n){(e===Pt.document?this.documentPullStates:this.workspacePullStates).delete(n.uri.toString())}tracks(e,n){let r=typeof n=="string"?n:n.uri.toString();return(e===Pt.document?this.documentPullStates:this.workspacePullStates).has(r)}getResultId(e,n){var r;return(r=(e===Pt.document?this.documentPullStates:this.workspacePullStates).get(n.uri.toString()))===null||r===void 0?void 0:r.resultId}getAllResultIds(){let e=[];for(let[n,r]of this.workspacePullStates)this.documentPullStates.has(n)&&(r=this.documentPullStates.get(n)),r.resultId!==void 0&&e.push({uri:n,value:r.resultId});return e}},Kh=class{constructor(e,n,r){this.client=e,this.editorTracker=n,this.options=r,this.isDisposed=!1,this.onDidChangeDiagnosticsEmitter=new gt.EventEmitter,this.provider=this.createProvider(),this.diagnostics=gt.languages.createDiagnosticCollection(r.identifier),this.openRequests=new Map,this.documentStates=new Uh,this.workspaceErrorCounter=0}knows(e,n){return this.documentStates.tracks(e,n)}pull(e,n){this.pullAsync(e).then(()=>{n&&n()},r=>{this.client.error(`Document pull failed for text document ${e.uri.toString()}`,r,!1)})}async pullAsync(e){var n;let r=e.uri.toString(),i=this.openRequests.get(r),o=this.documentStates.track(Pt.document,e);if(i===void 0){let s=new gt.CancellationTokenSource;this.openRequests.set(r,{state:ot.active,version:e.version,textDocument:e,tokenSource:s});let c,a;try{c=(n=await this.provider.provideDiagnostics(e,this.documentStates.getResultId(Pt.document,e),s.token))!==null&&n!==void 0?n:{kind:dn.DocumentDiagnosticReportKind.full,items:[]}}catch(p){if(p instanceof Bi.LSPCancellationError&&Oe.Proposed.DiagnosticServerCancellationData.is(p.data)&&p.data.retriggerRequest===!1&&(a={state:ot.outDated,textDocument:e}),a===void 0&&p instanceof gt.CancellationError)a={state:ot.reschedule,textDocument:e};else throw p}if(a=a!=null?a:this.openRequests.get(r),a===void 0){this.client.error(`Lost request state in diagnostic pull model. Clearing diagnostics for ${r}`),this.diagnostics.delete(e.uri);return}if(this.openRequests.delete(r),!this.editorTracker.isVisible(e)){this.documentStates.unTrack(Pt.document,e);return}if(a.state===ot.outDated)return;c!==void 0&&(c.kind===dn.DocumentDiagnosticReportKind.full&&this.diagnostics.set(e.uri,c.items),o.resultId=c.resultId),a.state===ot.reschedule&&this.pull(e)}else i.state===ot.active?(i.tokenSource.cancel(),this.openRequests.set(r,{state:ot.reschedule,textDocument:i.textDocument})):i.state===ot.outDated&&this.openRequests.set(r,{state:ot.reschedule,textDocument:i.textDocument})}cleanupPull(e){let n=e.uri.toString(),r=this.openRequests.get(n);this.options.workspaceDiagnostics||this.options.interFileDependencies?r!==void 0?this.openRequests.set(n,{state:ot.reschedule,textDocument:e}):this.pull(e):(r!==void 0&&(r.state===ot.active&&r.tokenSource.cancel(),this.openRequests.set(n,{state:ot.outDated,textDocument:e})),this.diagnostics.delete(e.uri))}pullWorkspace(){this.pullWorkspaceAsync().then(()=>{this.workspaceTimeout=Oe.RAL().timer.setTimeout(()=>{this.pullWorkspace()},2e3)},e=>{!(e instanceof Bi.LSPCancellationError)&&!Oe.Proposed.DiagnosticServerCancellationData.is(e.data)&&(this.client.error("Workspace diagnostic pull failed.",e,!1),this.workspaceErrorCounter++),this.workspaceErrorCounter<=5&&(this.workspaceTimeout=Oe.RAL().timer.setTimeout(()=>{this.pullWorkspace()},2e3))})}async pullWorkspaceAsync(){if(!this.provider.provideWorkspaceDiagnostics)return;this.workspaceCancellation!==void 0&&(this.workspaceCancellation.cancel(),this.workspaceCancellation=void 0),this.workspaceCancellation=new gt.CancellationTokenSource;let e=this.documentStates.getAllResultIds().map(n=>({uri:this.client.protocol2CodeConverter.asUri(n.uri),value:n.value}));await this.provider.provideWorkspaceDiagnostics(e,this.workspaceCancellation.token,n=>{var r;if(!(!n||this.isDisposed))for(let i of n.items)i.kind===dn.DocumentDiagnosticReportKind.full&&(this.documentStates.tracks(Pt.document,i.uri.toString())||this.diagnostics.set(i.uri,i.items)),this.documentStates.track(Pt.workspace,i.uri.toString(),(r=i.version)!==null&&r!==void 0?r:void 0,i.resultId)})}createProvider(){let e={onDidChangeDiagnostics:this.onDidChangeDiagnosticsEmitter.event,provideDiagnostics:(n,r,i)=>{let o=(c,a,p)=>{let h={identifier:this.options.identifier,textDocument:{uri:this.client.code2ProtocolConverter.asUri(c.uri)},previousResultId:a};return this.client.sendRequest(Oe.Proposed.DocumentDiagnosticRequest.type,h,p).then(m=>m==null||this.isDisposed?{kind:dn.DocumentDiagnosticReportKind.full,items:[]}:m.kind===Oe.Proposed.DocumentDiagnosticReportKind.full?{kind:dn.DocumentDiagnosticReportKind.full,resultId:m.resultId,items:this.client.protocol2CodeConverter.asDiagnostics(m.items)}:{kind:dn.DocumentDiagnosticReportKind.unChanged,resultId:m.resultId},m=>this.client.handleFailedRequest(Oe.Proposed.DocumentDiagnosticRequest.type,p,m,{kind:dn.DocumentDiagnosticReportKind.full,items:[]}))},s=this.client.clientOptions.middleware;return s.provideDiagnostics?s.provideDiagnostics(n,r,i,o):o(n,r,i)}};return this.options.workspaceDiagnostics&&(e.provideWorkspaceDiagnostics=(n,r,i)=>{let o=p=>p.kind===Oe.Proposed.DocumentDiagnosticReportKind.full?{kind:dn.DocumentDiagnosticReportKind.full,uri:this.client.protocol2CodeConverter.asUri(p.uri),resultId:p.resultId,version:p.version,items:this.client.protocol2CodeConverter.asDiagnostics(p.items)}:{kind:dn.DocumentDiagnosticReportKind.unChanged,uri:this.client.protocol2CodeConverter.asUri(p.uri),resultId:p.resultId,version:p.version},s=p=>{let h=[];for(let m of p)h.push({uri:this.client.code2ProtocolConverter.asUri(m.uri),value:m.value});return h},c=(p,h)=>{let m=_D.generateUuid(),C=this.client.onProgress(Oe.Proposed.WorkspaceDiagnosticRequest.partialResult,m,S=>{if(S==null){i(null);return}let k={items:[]};for(let N of S.items)k.items.push(o(N));i(k)}),v={identifier:this.options.identifier,previousResultIds:s(p),partialResultToken:m};return this.client.sendRequest(Oe.Proposed.WorkspaceDiagnosticRequest.type,v,h).then(S=>{let k={items:[]};for(let N of S.items)k.items.push(o(N));return C.dispose(),i(k),{items:[]}},S=>(C.dispose(),this.client.handleFailedRequest(Oe.Proposed.DocumentDiagnosticRequest.type,h,S,{items:[]})))},a=this.client.clientOptions.middleware;return a.provideWorkspaceDiagnostics?a.provideWorkspaceDiagnostics(n,r,i,c):c(n,r,i)}),e}dispose(){var e,n;this.isDisposed=!0,(e=this.workspaceCancellation)===null||e===void 0||e.cancel(),(n=this.workspaceTimeout)===null||n===void 0||n.dispose();for(let[r,i]of this.openRequests)i.state===ot.active&&i.tokenSource.cancel(),this.openRequests.set(r,{state:ot.outDated,textDocument:i.textDocument})}},Bh=class{constructor(e){this.diagnosticRequestor=e,this.documents=new Oe.LinkedMap}add(e){let n=e.uri.toString();this.documents.has(n)||(this.documents.set(e.uri.toString(),e,Oe.Touch.Last),this.trigger())}remove(e){let n=e.uri.toString();this.documents.has(n)&&(this.documents.delete(n),this.diagnosticRequestor.pull(e)),this.documents.size===0?this.stop():e===this.endDocument&&(this.endDocument=this.documents.last)}trigger(){if(this.intervalHandle!==void 0){this.endDocument=this.documents.last;return}this.endDocument=this.documents.last,this.intervalHandle=Oe.RAL().timer.setInterval(()=>{let e=this.documents.first;e!==void 0&&(this.diagnosticRequestor.pull(e),this.documents.set(e.uri.toString(),e,Oe.Touch.Last),e===this.endDocument&&this.stop())},200)}dispose(){this.stop(),this.documents.clear()}stop(){var e;(e=this.intervalHandle)===null||e===void 0||e.dispose(),this.intervalHandle=void 0,this.endDocument=void 0}},Gh=class{constructor(e,n,r){var i,o;let s=(i=e.clientOptions.diagnosticPullOptions)!==null&&i!==void 0?i:{onChange:!0,onSave:!1},c=r.documentSelector,a=[],p=v=>gt.languages.match(c,v)>0&&n.isVisible(v);this.diagnosticRequestor=new Kh(e,n,r),this.backgroundScheduler=new Bh(this.diagnosticRequestor);let h=v=>{!p(v)||!r.interFileDependencies||this.activeTextDocument===v||this.backgroundScheduler.add(v)};this.activeTextDocument=(o=gt.window.activeTextEditor)===null||o===void 0?void 0:o.document,gt.window.onDidChangeActiveTextEditor(v=>{let S=this.activeTextDocument;this.activeTextDocument=v==null?void 0:v.document,S!==void 0&&h(S),this.activeTextDocument!==void 0&&this.backgroundScheduler.remove(this.activeTextDocument)});let m=e.getFeature(Oe.DidOpenTextDocumentNotification.method);a.push(m.onNotificationSent(v=>{let S=v.original;p(S)&&this.diagnosticRequestor.pull(S,()=>{h(S)})}));for(let v of gt.workspace.textDocuments)p(v)&&this.diagnosticRequestor.pull(v,()=>{h(v)});if(s.onChange){let v=e.getFeature(Oe.DidChangeTextDocumentNotification.method);a.push(v.onNotificationSent(async S=>{let k=S.original.document;(s.filter===void 0||!s.filter(k,Bi.DiagnosticPullMode.onType))&&this.diagnosticRequestor.knows(Pt.document,k)&&S.original.contentChanges.length>0&&this.diagnosticRequestor.pull(k,()=>{this.backgroundScheduler.trigger()})}))}if(s.onSave){let v=e.getFeature(Oe.DidSaveTextDocumentNotification.method);a.push(v.onNotificationSent(S=>{let k=S.original;(s.filter===void 0||!s.filter(k,Bi.DiagnosticPullMode.onSave))&&this.diagnosticRequestor.knows(Pt.document,k)&&this.diagnosticRequestor.pull(S.original,()=>{this.backgroundScheduler.trigger()})}))}let C=e.getFeature(Oe.DidCloseTextDocumentNotification.method);a.push(C.onNotificationSent(v=>{let S=v.original;this.diagnosticRequestor.cleanupPull(S),this.backgroundScheduler.remove(S)})),this.diagnosticRequestor.onDidChangeDiagnosticsEmitter.event(()=>{for(let v of gt.workspace.textDocuments)p(v)&&this.diagnosticRequestor.pull(v)}),r.workspaceDiagnostics===!0&&r.identifier!=="da348dc5-c30a-4515-9d98-31ff3be38d14"&&this.diagnosticRequestor.pullWorkspace(),this.disposable=gt.Disposable.from(...a,this.backgroundScheduler,this.diagnosticRequestor)}get onDidChangeDiagnosticsEmitter(){return this.diagnosticRequestor.onDidChangeDiagnosticsEmitter}get diagnostics(){return this.diagnosticRequestor.provider}},Vh=class extends Bi.TextDocumentFeature{constructor(e){super(e,Oe.Proposed.DocumentDiagnosticRequest.type);this.editorTracker=new zh}fillClientCapabilities(e){let n=Wh(Wh(e,"textDocument"),"diagnostic");n.dynamicRegistration=!0,n.relatedDocumentSupport=!1}initialize(e,n){this._client.onRequest(Oe.Proposed.DiagnosticRefreshRequest.type,async()=>{for(let s of this.getAllProviders())s.onDidChangeDiagnosticsEmitter.fire()});let[i,o]=this.getRegistration(n,e.diagnosticProvider);!i||!o||this.register({id:i,registerOptions:o})}dispose(){this.editorTracker.dispose(),super.dispose()}registerLanguageProvider(e){let n=new Gh(this._client,this.editorTracker,e);return[n.disposable,n]}};br.DiagnosticFeature=Vh});var ec=_(Tr=>{"use strict";Object.defineProperty(Tr,"__esModule",{value:!0});Tr.ProposedFeatures=Tr.CommonLanguageClient=void 0;var PD=Rt(),ED=Mp(),xD=Ta(),kD=Hp(),qD=zp(),OD=Kp(),ID=Gp(),FD=Jp(),ND=Zp(),AD=th(),LD=oh(),MD=ah(),Yr=Mh(),$D=Hh(),Jh=class extends PD.BaseLanguageClient{constructor(e,n,r){super(e,n,r)}registerProposedFeatures(){this.registerFeatures(Yh.createAll(this))}registerBuiltinFeatures(){super.registerBuiltinFeatures(),this.registerFeature(new xD.ConfigurationFeature(this)),this.registerFeature(new qD.TypeDefinitionFeature(this)),this.registerFeature(new kD.ImplementationFeature(this)),this.registerFeature(new ED.ColorProviderFeature(this)),this.registerFeature(new OD.WorkspaceFoldersFeature(this)),this.registerFeature(new ID.FoldingRangeFeature(this)),this.registerFeature(new FD.DeclarationFeature(this)),this.registerFeature(new ND.SelectionRangeFeature(this)),this.registerFeature(new AD.ProgressFeature(this)),this.registerFeature(new LD.CallHierarchyFeature(this)),this.registerFeature(new MD.SemanticTokensFeature(this)),this.registerFeature(new $D.LinkedEditingFeature(this)),this.registerFeature(new Yr.DidCreateFilesFeature(this)),this.registerFeature(new Yr.DidRenameFilesFeature(this)),this.registerFeature(new Yr.DidDeleteFilesFeature(this)),this.registerFeature(new Yr.WillCreateFilesFeature(this)),this.registerFeature(new Yr.WillRenameFilesFeature(this)),this.registerFeature(new Yr.WillDeleteFilesFeature(this))}};Tr.CommonLanguageClient=Jh;var jD=Xh(),Yh;(function(t){function e(n){return[new jD.DiagnosticFeature(n)]}t.createAll=e})(Yh=Tr.ProposedFeatures||(Tr.ProposedFeatures={}))});var Zh=_(ss=>{"use strict";Object.defineProperty(ss,"__esModule",{value:!0});ss.terminate=void 0;var Qh=require("child_process"),HD=require("path"),WD=process.platform==="win32",zD=process.platform==="darwin",UD=process.platform==="linux";function KD(t,e){if(WD)try{let i={stdio:["pipe","pipe","ignore"]};return e&&(i.cwd=e),Qh.execFileSync("taskkill",["/T","/F","/PID",t.pid.toString()],i),!0}catch(i){return!1}else if(UD||zD)try{var n=HD.join(__dirname,"terminateProcess.sh"),r=Qh.spawnSync(n,[t.pid.toString()]);return!r.error}catch(i){return!1}else return t.kill("SIGKILL"),!0}ss.terminate=KD});var tc=_((FE,eg)=>{"use strict";eg.exports=we()});var tg=_(qn=>{"use strict";var BD=qn&&qn.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),nc=qn&&qn.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&BD(e,t,n)};Object.defineProperty(qn,"__esModule",{value:!0});nc(we(),qn);nc(Rt(),qn);nc(ec(),qn)});var as=_(mt=>{"use strict";var GD=mt&&mt.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),ng=mt&&mt.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&GD(e,t,n)};Object.defineProperty(mt,"__esModule",{value:!0});mt.SettingMonitor=mt.LanguageClient=mt.TransportKind=void 0;var On=require("child_process"),rc=require("fs"),ic=require("path"),rg=Gl(),Xn=require("vscode"),be=Sn(),VD=ec(),XD=Rt(),JD=Zh(),_e=tc();ng(tc(),mt);ng(tg(),mt);var ig="^1.58.0",Ee;(function(t){t[t.stdio=0]="stdio",t[t.ipc=1]="ipc",t[t.pipe=2]="pipe",t[t.socket=3]="socket"})(Ee=mt.TransportKind||(mt.TransportKind={}));var Jn;(function(t){function e(n){let r=n;return r&&r.kind===Ee.socket&&be.number(r.port)}t.isSocket=e})(Jn||(Jn={}));var oc;(function(t){function e(n){return be.string(n.command)}t.is=e})(oc||(oc={}));var sc;(function(t){function e(n){return be.string(n.module)}t.is=e})(sc||(sc={}));var ac;(function(t){function e(n){let r=n;return r&&r.writer!==void 0&&r.reader!==void 0}t.is=e})(ac||(ac={}));var cc;(function(t){function e(n){let r=n;return r&&r.process!==void 0&&typeof r.detached=="boolean"}t.is=e})(cc||(cc={}));var og=class extends VD.CommonLanguageClient{constructor(e,n,r,i,o){let s,c,a,p,h;be.string(n)?(s=e,c=n,a=r,p=i,h=!!o):(s=e.toLowerCase(),c=e,a=n,p=r,h=i),h===void 0&&(h=!1);super(s,c,p);this._serverOptions=a,this._forceDebug=h,this._isInDebugMode=h;try{this.checkVersion()}catch(m){throw be.string(m.message)&&this.outputChannel.appendLine(m.message),m}}checkVersion(){let e=rg.parse(Xn.version);if(!e)throw new Error(`No valid VS Code version detected. Version string is: ${Xn.version}`);if(e.prerelease&&e.prerelease.length>0&&(e.prerelease=[]),!rg.satisfies(e,ig))throw new Error(`The language client requires VS Code version ${ig} but received version ${Xn.version}`)}get isInDebugMode(){return this._isInDebugMode}stop(){return super.stop().then(()=>{if(this._serverProcess){let e=this._serverProcess;this._serverProcess=void 0,(this._isDetached===void 0||!this._isDetached)&&this.checkProcessDied(e),this._isDetached=void 0}})}checkProcessDied(e){!e||setTimeout(()=>{try{process.kill(e.pid,0),JD.terminate(e)}catch(n){}},2e3)}handleConnectionClosed(){this._serverProcess=void 0,super.handleConnectionClosed()}fillInitializeParams(e){super.fillInitializeParams(e),e.processId===null&&(e.processId=process.pid)}createMessageTransports(e){function n(h,m){if(!h&&!m)return;let C=Object.create(null);return Object.keys(process.env).forEach(v=>C[v]=process.env[v]),m&&(C.ELECTRON_RUN_AS_NODE="1",C.ELECTRON_NO_ASAR="1"),h&&Object.keys(h).forEach(v=>C[v]=h[v]),C}let r=["--debug=","--debug-brk=","--inspect=","--inspect-brk="],i=["--debug","--debug-brk","--inspect","--inspect-brk"];function o(){let h=process.execArgv;return h?h.some(m=>r.some(C=>m.startsWith(C))||i.some(C=>m===C)):!1}function s(h){if(h.stdin===null||h.stdout===null||h.stderr===null)throw new Error("Process created without stdio streams")}let c=this._serverOptions;if(be.func(c))return c().then(h=>{if(XD.MessageTransports.is(h))return this._isDetached=!!h.detached,h;if(ac.is(h))return this._isDetached=!!h.detached,{reader:new _e.StreamMessageReader(h.reader),writer:new _e.StreamMessageWriter(h.writer)};{let m;return cc.is(h)?(m=h.process,this._isDetached=h.detached):(m=h,this._isDetached=!1),m.stderr.on("data",C=>this.outputChannel.append(be.string(C)?C:C.toString(e))),{reader:new _e.StreamMessageReader(m.stdout),writer:new _e.StreamMessageWriter(m.stdin)}}});let a,p=c;return p.run||p.debug?this._forceDebug||o()?(a=p.debug,this._isInDebugMode=!0):(a=p.run,this._isInDebugMode=!1):a=c,this._getServerWorkingDir(a.options).then(h=>{var m;if(sc.is(a)&&a.module){let C=a,v=C.transport||Ee.stdio;if(C.runtime){let S=[],k=(m=C.options)!==null&&m!==void 0?m:Object.create(null);k.execArgv&&k.execArgv.forEach(E=>S.push(E)),S.push(C.module),C.args&&C.args.forEach(E=>S.push(E));let N=Object.create(null);N.cwd=h,N.env=n(k.env,!1);let F=this._getRuntimePath(C.runtime,h),L;if(v===Ee.ipc?(N.stdio=[null,null,null,"ipc"],S.push("--node-ipc")):v===Ee.stdio?S.push("--stdio"):v===Ee.pipe?(L=_e.generateRandomPipeName(),S.push(`--pipe=${L}`)):Jn.isSocket(v)&&S.push(`--socket=${v.port}`),S.push(`--clientProcessId=${process.pid.toString()}`),v===Ee.ipc||v===Ee.stdio){let E=On.spawn(F,S,N);return!E||!E.pid?Promise.reject(`Launching server using runtime ${F} failed.`):(this._serverProcess=E,E.stderr.on("data",M=>this.outputChannel.append(be.string(M)?M:M.toString(e))),v===Ee.ipc?(E.stdout.on("data",M=>this.outputChannel.append(be.string(M)?M:M.toString(e))),Promise.resolve({reader:new _e.IPCMessageReader(E),writer:new _e.IPCMessageWriter(E)})):Promise.resolve({reader:new _e.StreamMessageReader(E.stdout),writer:new _e.StreamMessageWriter(E.stdin)}))}else{if(v===Ee.pipe)return _e.createClientPipeTransport(L).then(E=>{let M=On.spawn(F,S,N);return!M||!M.pid?Promise.reject(`Launching server using runtime ${F} failed.`):(this._serverProcess=M,M.stderr.on("data",q=>this.outputChannel.append(be.string(q)?q:q.toString(e))),M.stdout.on("data",q=>this.outputChannel.append(be.string(q)?q:q.toString(e))),E.onConnected().then(q=>({reader:q[0],writer:q[1]})))});if(Jn.isSocket(v))return _e.createClientSocketTransport(v.port).then(E=>{let M=On.spawn(F,S,N);return!M||!M.pid?Promise.reject(`Launching server using runtime ${F} failed.`):(this._serverProcess=M,M.stderr.on("data",q=>this.outputChannel.append(be.string(q)?q:q.toString(e))),M.stdout.on("data",q=>this.outputChannel.append(be.string(q)?q:q.toString(e))),E.onConnected().then(q=>({reader:q[0],writer:q[1]})))})}}else{let S;return new Promise((k,N)=>{var F,L;let E=(F=C.args&&C.args.slice())!==null&&F!==void 0?F:[];v===Ee.ipc?E.push("--node-ipc"):v===Ee.stdio?E.push("--stdio"):v===Ee.pipe?(S=_e.generateRandomPipeName(),E.push(`--pipe=${S}`)):Jn.isSocket(v)&&E.push(`--socket=${v.port}`),E.push(`--clientProcessId=${process.pid.toString()}`);let M=(L=C.options)!==null&&L!==void 0?L:Object.create(null);if(M.env=n(M.env,!0),M.execArgv=M.execArgv||[],M.cwd=h,M.silent=!0,v===Ee.ipc||v===Ee.stdio){let q=On.fork(C.module,E||[],M);s(q),this._serverProcess=q,q.stderr.on("data",B=>this.outputChannel.append(be.string(B)?B:B.toString(e))),v===Ee.ipc?(q.stdout.on("data",B=>this.outputChannel.append(be.string(B)?B:B.toString(e))),k({reader:new _e.IPCMessageReader(this._serverProcess),writer:new _e.IPCMessageWriter(this._serverProcess)})):k({reader:new _e.StreamMessageReader(q.stdout),writer:new _e.StreamMessageWriter(q.stdin)})}else v===Ee.pipe?_e.createClientPipeTransport(S).then(q=>{let B=On.fork(C.module,E||[],M);s(B),this._serverProcess=B,B.stderr.on("data",X=>this.outputChannel.append(be.string(X)?X:X.toString(e))),B.stdout.on("data",X=>this.outputChannel.append(be.string(X)?X:X.toString(e))),q.onConnected().then(X=>{k({reader:X[0],writer:X[1]})},N)},N):Jn.isSocket(v)&&_e.createClientSocketTransport(v.port).then(q=>{let B=On.fork(C.module,E||[],M);s(B),this._serverProcess=B,B.stderr.on("data",X=>this.outputChannel.append(be.string(X)?X:X.toString(e))),B.stdout.on("data",X=>this.outputChannel.append(be.string(X)?X:X.toString(e))),q.onConnected().then(X=>{k({reader:X[0],writer:X[1]})},N)},N)})}}else if(oc.is(a)&&a.command){let C=a,v=a.args!==void 0?a.args.slice(0):[],S,k=a.transport;if(k===Ee.stdio)v.push("--stdio");else if(k===Ee.pipe)S=_e.generateRandomPipeName(),v.push(`--pipe=${S}`);else if(Jn.isSocket(k))v.push(`--socket=${k.port}`);else if(k===Ee.ipc)throw new Error("Transport kind ipc is not support for command executable");let N=Object.assign({},C.options);if(N.cwd=N.cwd||h,k===void 0||k===Ee.stdio){let F=On.spawn(C.command,v,N);return!F||!F.pid?Promise.reject(`Launching server using command ${C.command} failed.`):(F.stderr.on("data",L=>this.outputChannel.append(be.string(L)?L:L.toString(e))),this._serverProcess=F,this._isDetached=!!N.detached,Promise.resolve({reader:new _e.StreamMessageReader(F.stdout),writer:new _e.StreamMessageWriter(F.stdin)}))}else{if(k===Ee.pipe)return _e.createClientPipeTransport(S).then(F=>{let L=On.spawn(C.command,v,N);if(!L||!L.pid)throw new Error(`Launching server using command ${C.command} failed.`);return this._serverProcess=L,this._isDetached=!!N.detached,L.stderr.on("data",E=>this.outputChannel.append(be.string(E)?E:E.toString(e))),L.stdout.on("data",E=>this.outputChannel.append(be.string(E)?E:E.toString(e))),F.onConnected().then(E=>({reader:E[0],writer:E[1]}))});if(Jn.isSocket(k))return _e.createClientSocketTransport(k.port).then(F=>{let L=On.spawn(C.command,v,N);if(!L||!L.pid)throw new Error(`Launching server using command ${C.command} failed.`);return this._serverProcess=L,this._isDetached=!!N.detached,L.stderr.on("data",E=>this.outputChannel.append(be.string(E)?E:E.toString(e))),L.stdout.on("data",E=>this.outputChannel.append(be.string(E)?E:E.toString(e))),F.onConnected().then(E=>({reader:E[0],writer:E[1]}))})}}return Promise.reject(new Error("Unsupported server configuration "+JSON.stringify(c,null,4)))})}_getRuntimePath(e,n){if(ic.isAbsolute(e))return e;let r=this._mainGetRootPath();if(r!==void 0){let i=ic.join(r,e);if(rc.existsSync(i))return i}if(n!==void 0){let i=ic.join(n,e);if(rc.existsSync(i))return i}return e}_mainGetRootPath(){let e=Xn.workspace.workspaceFolders;if(!e||e.length===0)return;let n=e[0];if(n.uri.scheme==="file")return n.uri.fsPath}_getServerWorkingDir(e){let n=e&&e.cwd;return n||(n=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath()),n?new Promise(r=>{rc.lstat(n,(i,o)=>{r(!i&&o.isDirectory()?n:void 0)})}):Promise.resolve(void 0)}getLocale(){let e=process.env.VSCODE_NLS_CONFIG;if(e===void 0)return"en";let n;try{n=JSON.parse(e)}catch(r){}return n===void 0||typeof n.locale!="string"?"en":n.locale}};mt.LanguageClient=og;var sg=class{constructor(e,n){this._client=e,this._setting=n,this._listeners=[]}start(){return Xn.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new Xn.Disposable(()=>{this._client.needsStop()&&this._client.stop()})}onDidChangeConfiguration(){let e=this._setting.indexOf("."),n=e>=0?this._setting.substr(0,e):this._setting,r=e>=0?this._setting.substr(e+1):void 0,i=r?Xn.workspace.getConfiguration(n).get(r,!1):Xn.workspace.getConfiguration(n);i&&this._client.needsStart()?this._client.start():!i&&this._client.needsStop()&&this._client.stop()}};mt.SettingMonitor=sg});var lc=_((ME,Pg)=>{"use strict";Pg.exports=as()});var Um=_((mn,zm)=>{"use strict";Object.defineProperty(mn,"__esModule",{value:!0});function Qi(t){return t&&typeof t=="object"&&"default"in t?t.default:t}var nn=Qi(require("stream")),Fm=Qi(require("http")),Sc=Qi(require("url")),uS=Qi(require("https")),_r=Qi(require("zlib")),lS=nn.Readable,Nn=Symbol("buffer"),_c=Symbol("type"),Pr=class{constructor(){this[_c]="";let e=arguments[0],n=arguments[1],r=[],i=0;if(e){let s=e,c=Number(s.length);for(let a=0;a<c;a++){let p=s[a],h;p instanceof Buffer?h=p:ArrayBuffer.isView(p)?h=Buffer.from(p.buffer,p.byteOffset,p.byteLength):p instanceof ArrayBuffer?h=Buffer.from(p):p instanceof Pr?h=p[Nn]:h=Buffer.from(typeof p=="string"?p:String(p)),i+=h.length,r.push(h)}}this[Nn]=Buffer.concat(r);let o=n&&n.type!==void 0&&String(n.type).toLowerCase();o&&!/[^\u0020-\u007E]/.test(o)&&(this[_c]=o)}get size(){return this[Nn].length}get type(){return this[_c]}text(){return Promise.resolve(this[Nn].toString())}arrayBuffer(){let e=this[Nn],n=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return Promise.resolve(n)}stream(){let e=new lS;return e._read=function(){},e.push(this[Nn]),e.push(null),e}toString(){return"[object Blob]"}slice(){let e=this.size,n=arguments[0],r=arguments[1],i,o;n===void 0?i=0:n<0?i=Math.max(e+n,0):i=Math.min(n,e),r===void 0?o=e:r<0?o=Math.max(e+r,0):o=Math.min(r,e);let s=Math.max(o-i,0),a=this[Nn].slice(i,i+s),p=new Pr([],{type:arguments[2]});return p[Nn]=a,p}};Object.defineProperties(Pr.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});Object.defineProperty(Pr.prototype,Symbol.toStringTag,{value:"Blob",writable:!1,enumerable:!1,configurable:!0});function st(t,e,n){Error.call(this,t),this.message=t,this.type=e,n&&(this.code=this.errno=n.code),Error.captureStackTrace(this,this.constructor)}st.prototype=Object.create(Error.prototype);st.prototype.constructor=st;st.prototype.name="FetchError";var Pc;try{Pc=require("encoding").convert}catch(t){}var An=Symbol("Body internals"),Nm=nn.PassThrough;function Ge(t){var e=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.size;let i=r===void 0?0:r;var o=n.timeout;let s=o===void 0?0:o;t==null?t=null:Am(t)?t=Buffer.from(t.toString()):Zi(t)||Buffer.isBuffer(t)||(Object.prototype.toString.call(t)==="[object ArrayBuffer]"?t=Buffer.from(t):ArrayBuffer.isView(t)?t=Buffer.from(t.buffer,t.byteOffset,t.byteLength):t instanceof nn||(t=Buffer.from(String(t)))),this[An]={body:t,disturbed:!1,error:null},this.size=i,this.timeout=s,t instanceof nn&&t.on("error",function(c){let a=c.name==="AbortError"?c:new st(`Invalid response body while trying to fetch ${e.url}: ${c.message}`,"system",c);e[An].error=a})}Ge.prototype={get body(){return this[An].body},get bodyUsed(){return this[An].disturbed},arrayBuffer(){return ii.call(this).then(function(t){return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)})},blob(){let t=this.headers&&this.headers.get("content-type")||"";return ii.call(this).then(function(e){return Object.assign(new Pr([],{type:t.toLowerCase()}),{[Nn]:e})})},json(){var t=this;return ii.call(this).then(function(e){try{return JSON.parse(e.toString())}catch(n){return Ge.Promise.reject(new st(`invalid json response body at ${t.url} reason: ${n.message}`,"invalid-json"))}})},text(){return ii.call(this).then(function(t){return t.toString()})},buffer(){return ii.call(this)},textConverted(){var t=this;return ii.call(this).then(function(e){return dS(e,t.headers)})}};Object.defineProperties(Ge.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}});Ge.mixIn=function(t){for(let e of Object.getOwnPropertyNames(Ge.prototype))if(!(e in t)){let n=Object.getOwnPropertyDescriptor(Ge.prototype,e);Object.defineProperty(t,e,n)}};function ii(){var t=this;if(this[An].disturbed)return Ge.Promise.reject(new TypeError(`body used already for: ${this.url}`));if(this[An].disturbed=!0,this[An].error)return Ge.Promise.reject(this[An].error);let e=this.body;if(e===null)return Ge.Promise.resolve(Buffer.alloc(0));if(Zi(e)&&(e=e.stream()),Buffer.isBuffer(e))return Ge.Promise.resolve(e);if(!(e instanceof nn))return Ge.Promise.resolve(Buffer.alloc(0));let n=[],r=0,i=!1;return new Ge.Promise(function(o,s){let c;t.timeout&&(c=setTimeout(function(){i=!0,s(new st(`Response timeout while trying to fetch ${t.url} (over ${t.timeout}ms)`,"body-timeout"))},t.timeout)),e.on("error",function(a){a.name==="AbortError"?(i=!0,s(a)):s(new st(`Invalid response body while trying to fetch ${t.url}: ${a.message}`,"system",a))}),e.on("data",function(a){if(!(i||a===null)){if(t.size&&r+a.length>t.size){i=!0,s(new st(`content size at ${t.url} over limit: ${t.size}`,"max-size"));return}r+=a.length,n.push(a)}}),e.on("end",function(){if(!i){clearTimeout(c);try{o(Buffer.concat(n,r))}catch(a){s(new st(`Could not create Buffer from response body for ${t.url}: ${a.message}`,"system",a))}}})})}function dS(t,e){if(typeof Pc!="function")throw new Error("The package `encoding` must be installed to use the textConverted() function");let n=e.get("content-type"),r="utf-8",i,o;return n&&(i=/charset=([^;]*)/i.exec(n)),o=t.slice(0,1024).toString(),!i&&o&&(i=/<meta.+?charset=(['"])(.+?)\1/i.exec(o)),!i&&o&&(i=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(o),i||(i=/<meta[\s]+?content=(['"])(.+?)\1[\s]+?http-equiv=(['"])content-type\3/i.exec(o),i&&i.pop()),i&&(i=/charset=(.*)/i.exec(i.pop()))),!i&&o&&(i=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(o)),i&&(r=i.pop(),(r==="gb2312"||r==="gbk")&&(r="gb18030")),Pc(t,"UTF-8",r).toString()}function Am(t){return typeof t!="object"||typeof t.append!="function"||typeof t.delete!="function"||typeof t.get!="function"||typeof t.getAll!="function"||typeof t.has!="function"||typeof t.set!="function"?!1:t.constructor.name==="URLSearchParams"||Object.prototype.toString.call(t)==="[object URLSearchParams]"||typeof t.sort=="function"}function Zi(t){return typeof t=="object"&&typeof t.arrayBuffer=="function"&&typeof t.type=="string"&&typeof t.stream=="function"&&typeof t.constructor=="function"&&typeof t.constructor.name=="string"&&/^(Blob|File)$/.test(t.constructor.name)&&/^(Blob|File)$/.test(t[Symbol.toStringTag])}function Lm(t){let e,n,r=t.body;if(t.bodyUsed)throw new Error("cannot clone body after it is used");return r instanceof nn&&typeof r.getBoundary!="function"&&(e=new Nm,n=new Nm,r.pipe(e),r.pipe(n),t[An].body=e,r=n),r}function Mm(t){return t===null?null:typeof t=="string"?"text/plain;charset=UTF-8":Am(t)?"application/x-www-form-urlencoded;charset=UTF-8":Zi(t)?t.type||null:Buffer.isBuffer(t)||Object.prototype.toString.call(t)==="[object ArrayBuffer]"||ArrayBuffer.isView(t)?null:typeof t.getBoundary=="function"?`multipart/form-data;boundary=${t.getBoundary()}`:t instanceof nn?null:"text/plain;charset=UTF-8"}function $m(t){let e=t.body;return e===null?0:Zi(e)?e.size:Buffer.isBuffer(e)?e.length:e&&typeof e.getLengthSync=="function"&&(e._lengthRetrievers&&e._lengthRetrievers.length==0||e.hasKnownLength&&e.hasKnownLength())?e.getLengthSync():null}function fS(t,e){let n=e.body;n===null?t.end():Zi(n)?n.stream().pipe(t):Buffer.isBuffer(n)?(t.write(n),t.end()):n.pipe(t)}Ge.Promise=global.Promise;var jm=/[^\^_`a-zA-Z\-0-9!#$%&'*+.|~]/,Ec=/[^\t\x20-\x7e\x80-\xff]/;function eo(t){if(t=`${t}`,jm.test(t)||t==="")throw new TypeError(`${t} is not a legal HTTP header name`)}function Hm(t){if(t=`${t}`,Ec.test(t))throw new TypeError(`${t} is not a legal HTTP header value`)}function oi(t,e){e=e.toLowerCase();for(let n in t)if(n.toLowerCase()===e)return n}var Fe=Symbol("map"),xt=class{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;if(this[Fe]=Object.create(null),e instanceof xt){let n=e.raw(),r=Object.keys(n);for(let i of r)for(let o of n[i])this.append(i,o);return}if(e!=null)if(typeof e=="object"){let n=e[Symbol.iterator];if(n!=null){if(typeof n!="function")throw new TypeError("Header pairs must be iterable");let r=[];for(let i of e){if(typeof i!="object"||typeof i[Symbol.iterator]!="function")throw new TypeError("Each header pair must be iterable");r.push(Array.from(i))}for(let i of r){if(i.length!==2)throw new TypeError("Each header pair must be a name/value tuple");this.append(i[0],i[1])}}else for(let r of Object.keys(e)){let i=e[r];this.append(r,i)}}else throw new TypeError("Provided initializer must be an object")}get(e){e=`${e}`,eo(e);let n=oi(this[Fe],e);return n===void 0?null:this[Fe][n].join(", ")}forEach(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,r=xc(this),i=0;for(;i<r.length;){var o=r[i];let s=o[0],c=o[1];e.call(n,c,s,this),r=xc(this),i++}}set(e,n){e=`${e}`,n=`${n}`,eo(e),Hm(n);let r=oi(this[Fe],e);this[Fe][r!==void 0?r:e]=[n]}append(e,n){e=`${e}`,n=`${n}`,eo(e),Hm(n);let r=oi(this[Fe],e);r!==void 0?this[Fe][r].push(n):this[Fe][e]=[n]}has(e){return e=`${e}`,eo(e),oi(this[Fe],e)!==void 0}delete(e){e=`${e}`,eo(e);let n=oi(this[Fe],e);n!==void 0&&delete this[Fe][n]}raw(){return this[Fe]}keys(){return qc(this,"key")}values(){return qc(this,"value")}[Symbol.iterator](){return qc(this,"key+value")}};xt.prototype.entries=xt.prototype[Symbol.iterator];Object.defineProperty(xt.prototype,Symbol.toStringTag,{value:"Headers",writable:!1,enumerable:!1,configurable:!0});Object.defineProperties(xt.prototype,{get:{enumerable:!0},forEach:{enumerable:!0},set:{enumerable:!0},append:{enumerable:!0},has:{enumerable:!0},delete:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0}});function xc(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"key+value";return Object.keys(t[Fe]).sort().map(e==="key"?function(r){return r.toLowerCase()}:e==="value"?function(r){return t[Fe][r].join(", ")}:function(r){return[r.toLowerCase(),t[Fe][r].join(", ")]})}var kc=Symbol("internal");function qc(t,e){let n=Object.create(Oc);return n[kc]={target:t,kind:e,index:0},n}var Oc=Object.setPrototypeOf({next(){if(!this||Object.getPrototypeOf(this)!==Oc)throw new TypeError("Value of `this` is not a HeadersIterator");var t=this[kc];let e=t.target,n=t.kind,r=t.index,i=xc(e,n),o=i.length;return r>=o?{value:void 0,done:!0}:(this[kc].index=r+1,{value:i[r],done:!1})}},Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));Object.defineProperty(Oc,Symbol.toStringTag,{value:"HeadersIterator",writable:!1,enumerable:!1,configurable:!0});function pS(t){let e=Object.assign({__proto__:null},t[Fe]),n=oi(t[Fe],"Host");return n!==void 0&&(e[n]=e[n][0]),e}function hS(t){let e=new xt;for(let n of Object.keys(t))if(!jm.test(n))if(Array.isArray(t[n]))for(let r of t[n])Ec.test(r)||(e[Fe][n]===void 0?e[Fe][n]=[r]:e[Fe][n].push(r));else Ec.test(t[n])||(e[Fe][n]=[t[n]]);return e}var Qn=Symbol("Response internals"),gS=Fm.STATUS_CODES,zt=class{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Ge.call(this,e,n);let r=n.status||200,i=new xt(n.headers);if(e!=null&&!i.has("Content-Type")){let o=Mm(e);o&&i.append("Content-Type",o)}this[Qn]={url:n.url,status:r,statusText:n.statusText||gS[r],headers:i,counter:n.counter}}get url(){return this[Qn].url||""}get status(){return this[Qn].status}get ok(){return this[Qn].status>=200&&this[Qn].status<300}get redirected(){return this[Qn].counter>0}get statusText(){return this[Qn].statusText}get headers(){return this[Qn].headers}clone(){return new zt(Lm(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected})}};Ge.mixIn(zt.prototype);Object.defineProperties(zt.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});Object.defineProperty(zt.prototype,Symbol.toStringTag,{value:"Response",writable:!1,enumerable:!1,configurable:!0});var Ln=Symbol("Request internals"),Ic=Sc.parse,mS=Sc.format,vS="destroy"in nn.Readable.prototype;function ms(t){return typeof t=="object"&&typeof t[Ln]=="object"}function yS(t){let e=t&&typeof t=="object"&&Object.getPrototypeOf(t);return!!(e&&e.constructor.name==="AbortSignal")}var Mn=class{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r;ms(e)?r=Ic(e.url):(e&&e.href?r=Ic(e.href):r=Ic(`${e}`),e={});let i=n.method||e.method||"GET";if(i=i.toUpperCase(),(n.body!=null||ms(e)&&e.body!==null)&&(i==="GET"||i==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let o=n.body!=null?n.body:ms(e)&&e.body!==null?Lm(e):null;Ge.call(this,o,{timeout:n.timeout||e.timeout||0,size:n.size||e.size||0});let s=new xt(n.headers||e.headers||{});if(o!=null&&!s.has("Content-Type")){let a=Mm(o);a&&s.append("Content-Type",a)}let c=ms(e)?e.signal:null;if("signal"in n&&(c=n.signal),c!=null&&!yS(c))throw new TypeError("Expected signal to be an instanceof AbortSignal");this[Ln]={method:i,redirect:n.redirect||e.redirect||"follow",headers:s,parsedURL:r,signal:c},this.follow=n.follow!==void 0?n.follow:e.follow!==void 0?e.follow:20,this.compress=n.compress!==void 0?n.compress:e.compress!==void 0?e.compress:!0,this.counter=n.counter||e.counter||0,this.agent=n.agent||e.agent}get method(){return this[Ln].method}get url(){return mS(this[Ln].parsedURL)}get headers(){return this[Ln].headers}get redirect(){return this[Ln].redirect}get signal(){return this[Ln].signal}clone(){return new Mn(this)}};Ge.mixIn(Mn.prototype);Object.defineProperty(Mn.prototype,Symbol.toStringTag,{value:"Request",writable:!1,enumerable:!1,configurable:!0});Object.defineProperties(Mn.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}});function CS(t){let e=t[Ln].parsedURL,n=new xt(t[Ln].headers);if(n.has("Accept")||n.set("Accept","*/*"),!e.protocol||!e.hostname)throw new TypeError("Only absolute URLs are supported");if(!/^https?:$/.test(e.protocol))throw new TypeError("Only HTTP(S) protocols are supported");if(t.signal&&t.body instanceof nn.Readable&&!vS)throw new Error("Cancellation of streamed requests with AbortSignal is not supported in node < 8");let r=null;if(t.body==null&&/^(POST|PUT)$/i.test(t.method)&&(r="0"),t.body!=null){let o=$m(t);typeof o=="number"&&(r=String(o))}r&&n.set("Content-Length",r),n.has("User-Agent")||n.set("User-Agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"),t.compress&&!n.has("Accept-Encoding")&&n.set("Accept-Encoding","gzip,deflate");let i=t.agent;return typeof i=="function"&&(i=i(e)),!n.has("Connection")&&!i&&n.set("Connection","close"),Object.assign({},e,{method:t.method,headers:pS(n),agent:i})}function to(t){Error.call(this,t),this.type="aborted",this.message=t,Error.captureStackTrace(this,this.constructor)}to.prototype=Object.create(Error.prototype);to.prototype.constructor=to;to.prototype.name="AbortError";var Wm=nn.PassThrough,wS=Sc.resolve;function Zn(t,e){if(!Zn.Promise)throw new Error("native promise missing, set fetch.Promise to your favorite alternative");return Ge.Promise=Zn.Promise,new Zn.Promise(function(n,r){let i=new Mn(t,e),o=CS(i),s=(o.protocol==="https:"?uS:Fm).request,c=i.signal,a=null,p=function(){let k=new to("The user aborted a request.");r(k),i.body&&i.body instanceof nn.Readable&&i.body.destroy(k),!(!a||!a.body)&&a.body.emit("error",k)};if(c&&c.aborted){p();return}let h=function(){p(),v()},m=s(o),C;c&&c.addEventListener("abort",h);function v(){m.abort(),c&&c.removeEventListener("abort",h),clearTimeout(C)}i.timeout&&m.once("socket",function(S){C=setTimeout(function(){r(new st(`network timeout at: ${i.url}`,"request-timeout")),v()},i.timeout)}),m.on("error",function(S){r(new st(`request to ${i.url} failed, reason: ${S.message}`,"system",S)),v()}),m.on("response",function(S){clearTimeout(C);let k=hS(S.headers);if(Zn.isRedirect(S.statusCode)){let M=k.get("Location"),q=M===null?null:wS(i.url,M);switch(i.redirect){case"error":r(new st(`uri requested responds with a redirect, redirect mode is set to error: ${i.url}`,"no-redirect")),v();return;case"manual":if(q!==null)try{k.set("Location",q)}catch(X){r(X)}break;case"follow":if(q===null)break;if(i.counter>=i.follow){r(new st(`maximum redirect reached at: ${i.url}`,"max-redirect")),v();return}let B={headers:new xt(i.headers),follow:i.follow,counter:i.counter+1,agent:i.agent,compress:i.compress,method:i.method,body:i.body,signal:i.signal,timeout:i.timeout,size:i.size};if(S.statusCode!==303&&i.body&&$m(i)===null){r(new st("Cannot follow redirect with body being a readable stream","unsupported-redirect")),v();return}(S.statusCode===303||(S.statusCode===301||S.statusCode===302)&&i.method==="POST")&&(B.method="GET",B.body=void 0,B.headers.delete("content-length")),n(Zn(new Mn(q,B))),v();return}}S.once("end",function(){c&&c.removeEventListener("abort",h)});let N=S.pipe(new Wm),F={url:i.url,status:S.statusCode,statusText:S.statusMessage,headers:k,size:i.size,timeout:i.timeout,counter:i.counter},L=k.get("Content-Encoding");if(!i.compress||i.method==="HEAD"||L===null||S.statusCode===204||S.statusCode===304){a=new zt(N,F),n(a);return}let E={flush:_r.Z_SYNC_FLUSH,finishFlush:_r.Z_SYNC_FLUSH};if(L=="gzip"||L=="x-gzip"){N=N.pipe(_r.createGunzip(E)),a=new zt(N,F),n(a);return}if(L=="deflate"||L=="x-deflate"){S.pipe(new Wm).once("data",function(q){(q[0]&15)==8?N=N.pipe(_r.createInflate()):N=N.pipe(_r.createInflateRaw()),a=new zt(N,F),n(a)});return}if(L=="br"&&typeof _r.createBrotliDecompress=="function"){N=N.pipe(_r.createBrotliDecompress()),a=new zt(N,F),n(a);return}a=new zt(N,F),n(a)}),fS(m,i)})}Zn.isRedirect=function(t){return t===301||t===302||t===303||t===307||t===308};Zn.Promise=global.Promise;zm.exports=mn=Zn;Object.defineProperty(mn,"__esModule",{value:!0});mn.default=mn;mn.Headers=xt;mn.Request=Mn;mn.Response=zt;mn.FetchError=st});var Bm=_((qx,Km)=>{var si=1e3,ai=si*60,ci=ai*60,Er=ci*24,RS=Er*7,bS=Er*365.25;Km.exports=function(t,e){e=e||{};var n=typeof t;if(n==="string"&&t.length>0)return TS(t);if(n==="number"&&isFinite(t))return e.long?SS(t):DS(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function TS(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!!e){var n=parseFloat(e[1]),r=(e[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*bS;case"weeks":case"week":case"w":return n*RS;case"days":case"day":case"d":return n*Er;case"hours":case"hour":case"hrs":case"hr":case"h":return n*ci;case"minutes":case"minute":case"mins":case"min":case"m":return n*ai;case"seconds":case"second":case"secs":case"sec":case"s":return n*si;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function DS(t){var e=Math.abs(t);return e>=Er?Math.round(t/Er)+"d":e>=ci?Math.round(t/ci)+"h":e>=ai?Math.round(t/ai)+"m":e>=si?Math.round(t/si)+"s":t+"ms"}function SS(t){var e=Math.abs(t);return e>=Er?vs(t,e,Er,"day"):e>=ci?vs(t,e,ci,"hour"):e>=ai?vs(t,e,ai,"minute"):e>=si?vs(t,e,si,"second"):t+" ms"}function vs(t,e,n,r){var i=e>=n*1.5;return Math.round(t/n)+" "+r+(i?"s":"")}});var Fc=_((Ox,Gm)=>{function _S(t){n.debug=n,n.default=n,n.coerce=a,n.disable=o,n.enable=i,n.enabled=s,n.humanize=Bm(),n.destroy=p,Object.keys(t).forEach(h=>{n[h]=t[h]}),n.names=[],n.skips=[],n.formatters={};function e(h){let m=0;for(let C=0;C<h.length;C++)m=(m<<5)-m+h.charCodeAt(C),m|=0;return n.colors[Math.abs(m)%n.colors.length]}n.selectColor=e;function n(h){let m,C=null;function v(...S){if(!v.enabled)return;let k=v,N=Number(new Date),F=N-(m||N);k.diff=F,k.prev=m,k.curr=N,m=N,S[0]=n.coerce(S[0]),typeof S[0]!="string"&&S.unshift("%O");let L=0;S[0]=S[0].replace(/%([a-zA-Z%])/g,(M,q)=>{if(M==="%%")return"%";L++;let B=n.formatters[q];if(typeof B=="function"){let X=S[L];M=B.call(k,X),S.splice(L,1),L--}return M}),n.formatArgs.call(k,S),(k.log||n.log).apply(k,S)}return v.namespace=h,v.useColors=n.useColors(),v.color=n.selectColor(h),v.extend=r,v.destroy=n.destroy,Object.defineProperty(v,"enabled",{enumerable:!0,configurable:!1,get:()=>C===null?n.enabled(h):C,set:S=>{C=S}}),typeof n.init=="function"&&n.init(v),v}function r(h,m){let C=n(this.namespace+(typeof m=="undefined"?":":m)+h);return C.log=this.log,C}function i(h){n.save(h),n.names=[],n.skips=[];let m,C=(typeof h=="string"?h:"").split(/[\s,]+/),v=C.length;for(m=0;m<v;m++)!C[m]||(h=C[m].replace(/\*/g,".*?"),h[0]==="-"?n.skips.push(new RegExp("^"+h.substr(1)+"$")):n.names.push(new RegExp("^"+h+"$")))}function o(){let h=[...n.names.map(c),...n.skips.map(c).map(m=>"-"+m)].join(",");return n.enable(""),h}function s(h){if(h[h.length-1]==="*")return!0;let m,C;for(m=0,C=n.skips.length;m<C;m++)if(n.skips[m].test(h))return!1;for(m=0,C=n.names.length;m<C;m++)if(n.names[m].test(h))return!0;return!1}function c(h){return h.toString().substring(2,h.toString().length-2).replace(/\.\*\?$/,"*")}function a(h){return h instanceof Error?h.stack||h.message:h}function p(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}Gm.exports=_S});var Vm=_((kt,ys)=>{kt.formatArgs=ES;kt.save=xS;kt.load=kS;kt.useColors=PS;kt.storage=qS();kt.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();kt.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function PS(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function ES(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+ys.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let n=0,r=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(n++,i==="%c"&&(r=n))}),t.splice(r,0,e)}kt.log=console.debug||console.log||(()=>{});function xS(t){try{t?kt.storage.setItem("debug",t):kt.storage.removeItem("debug")}catch(e){}}function kS(){let t;try{t=kt.storage.getItem("debug")}catch(e){}return!t&&typeof process!="undefined"&&"env"in process&&(t=process.env.DEBUG),t}function qS(){try{return localStorage}catch(t){}}ys.exports=Fc()(kt);var{formatters:OS}=ys.exports;OS.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var Jm=_((Ix,Xm)=>{"use strict";Xm.exports=(t,e=process.argv)=>{let n=t.startsWith("-")?"":t.length===1?"-":"--",r=e.indexOf(n+t),i=e.indexOf("--");return r!==-1&&(i===-1||r<i)}});var Zm=_((Fx,Qm)=>{"use strict";var IS=require("os"),Ym=require("tty"),Ut=Jm(),{env:Ve}=process,er;Ut("no-color")||Ut("no-colors")||Ut("color=false")||Ut("color=never")?er=0:(Ut("color")||Ut("colors")||Ut("color=true")||Ut("color=always"))&&(er=1);"FORCE_COLOR"in Ve&&(Ve.FORCE_COLOR==="true"?er=1:Ve.FORCE_COLOR==="false"?er=0:er=Ve.FORCE_COLOR.length===0?1:Math.min(parseInt(Ve.FORCE_COLOR,10),3));function Nc(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function Ac(t,e){if(er===0)return 0;if(Ut("color=16m")||Ut("color=full")||Ut("color=truecolor"))return 3;if(Ut("color=256"))return 2;if(t&&!e&&er===void 0)return 0;let n=er||0;if(Ve.TERM==="dumb")return n;if(process.platform==="win32"){let r=IS.release().split(".");return Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in Ve)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(r=>r in Ve)||Ve.CI_NAME==="codeship"?1:n;if("TEAMCITY_VERSION"in Ve)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Ve.TEAMCITY_VERSION)?1:0;if(Ve.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in Ve){let r=parseInt((Ve.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Ve.TERM_PROGRAM){case"iTerm.app":return r>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Ve.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Ve.TERM)||"COLORTERM"in Ve?1:n}function FS(t){let e=Ac(t,t&&t.isTTY);return Nc(e)}Qm.exports={supportsColor:FS,stdout:Nc(Ac(!0,Ym.isatty(1))),stderr:Nc(Ac(!0,Ym.isatty(2)))}});var tv=_((Ze,ws)=>{var NS=require("tty"),Cs=require("util");Ze.init=WS;Ze.log=$S;Ze.formatArgs=LS;Ze.save=jS;Ze.load=HS;Ze.useColors=AS;Ze.destroy=Cs.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Ze.colors=[6,2,3,4,5,1];try{let t=Zm();t&&(t.stderr||t).level>=2&&(Ze.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(t){}Ze.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let n=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,o)=>o.toUpperCase()),r=process.env[e];return/^(yes|on|true|enabled)$/i.test(r)?r=!0:/^(no|off|false|disabled)$/i.test(r)?r=!1:r==="null"?r=null:r=Number(r),t[n]=r,t},{});function AS(){return"colors"in Ze.inspectOpts?Boolean(Ze.inspectOpts.colors):NS.isatty(process.stderr.fd)}function LS(t){let{namespace:e,useColors:n}=this;if(n){let r=this.color,i="[3"+(r<8?r:"8;5;"+r),o=`  ${i};1m${e} [0m`;t[0]=o+t[0].split(`
`).join(`
`+o),t.push(i+"m+"+ws.exports.humanize(this.diff)+"[0m")}else t[0]=MS()+e+" "+t[0]}function MS(){return Ze.inspectOpts.hideDate?"":new Date().toISOString()+" "}function $S(...t){return process.stderr.write(Cs.format(...t)+`
`)}function jS(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function HS(){return process.env.DEBUG}function WS(t){t.inspectOpts={};let e=Object.keys(Ze.inspectOpts);for(let n=0;n<e.length;n++)t.inspectOpts[e[n]]=Ze.inspectOpts[e[n]]}ws.exports=Fc()(Ze);var{formatters:ev}=ws.exports;ev.o=function(t){return this.inspectOpts.colors=this.useColors,Cs.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};ev.O=function(t){return this.inspectOpts.colors=this.useColors,Cs.inspect(t,this.inspectOpts)}});var Rs=_((Nx,Lc)=>{typeof process=="undefined"||process.type==="renderer"||process.browser===!0||process.__nwjs?Lc.exports=Vm():Lc.exports=tv()});var nv=_(Mc=>{"use strict";Object.defineProperty(Mc,"__esModule",{value:!0});function zS(t){return function(e,n){return new Promise((r,i)=>{t.call(this,e,n,(o,s)=>{o?i(o):r(s)})})}}Mc.default=zS});var ov=_((jc,iv)=>{"use strict";var rv=jc&&jc.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},US=require("events"),KS=rv(Rs()),BS=rv(nv()),no=KS.default("agent-base");function GS(t){return Boolean(t)&&typeof t.addRequest=="function"}function $c(){let{stack:t}=new Error;return typeof t!="string"?!1:t.split(`
`).some(e=>e.indexOf("(https.js:")!==-1||e.indexOf("node:https:")!==-1)}function bs(t,e){return new bs.Agent(t,e)}(function(t){class e extends US.EventEmitter{constructor(r,i){super();let o=i;typeof r=="function"?this.callback=r:r&&(o=r),this.timeout=null,o&&typeof o.timeout=="number"&&(this.timeout=o.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return typeof this.explicitDefaultPort=="number"?this.explicitDefaultPort:$c()?443:80}set defaultPort(r){this.explicitDefaultPort=r}get protocol(){return typeof this.explicitProtocol=="string"?this.explicitProtocol:$c()?"https:":"http:"}set protocol(r){this.explicitProtocol=r}callback(r,i,o){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(r,i){let o=Object.assign({},i);typeof o.secureEndpoint!="boolean"&&(o.secureEndpoint=$c()),o.host==null&&(o.host="localhost"),o.port==null&&(o.port=o.secureEndpoint?443:80),o.protocol==null&&(o.protocol=o.secureEndpoint?"https:":"http:"),o.host&&o.path&&delete o.path,delete o.agent,delete o.hostname,delete o._defaultAgent,delete o.defaultPort,delete o.createConnection,r._last=!0,r.shouldKeepAlive=!1;let s=!1,c=null,a=o.timeout||this.timeout,p=v=>{r._hadError||(r.emit("error",v),r._hadError=!0)},h=()=>{c=null,s=!0;let v=new Error(`A "socket" was not created for HTTP request before ${a}ms`);v.code="ETIMEOUT",p(v)},m=v=>{s||(c!==null&&(clearTimeout(c),c=null),p(v))},C=v=>{if(s)return;if(c!=null&&(clearTimeout(c),c=null),GS(v)){no("Callback returned another Agent instance %o",v.constructor.name),v.addRequest(r,o);return}if(v){v.once("free",()=>{this.freeSocket(v,o)}),r.onSocket(v);return}let S=new Error(`no Duplex stream was returned to agent-base for \`${r.method} ${r.path}\``);p(S)};if(typeof this.callback!="function"){p(new Error("`callback` is not defined"));return}this.promisifiedCallback||(this.callback.length>=3?(no("Converting legacy callback function to promise"),this.promisifiedCallback=BS.default(this.callback)):this.promisifiedCallback=this.callback),typeof a=="number"&&a>0&&(c=setTimeout(h,a)),"port"in o&&typeof o.port!="number"&&(o.port=Number(o.port));try{no("Resolving socket for %o request: %o",o.protocol,`${r.method} ${r.path}`),Promise.resolve(this.promisifiedCallback(r,o)).then(C,m)}catch(v){Promise.reject(v).catch(m)}}freeSocket(r,i){no("Freeing socket %o %o",r.constructor.name,i),r.destroy()}destroy(){no("Destroying agent %o",this.constructor.name)}}t.Agent=e,t.prototype=t.Agent.prototype})(bs||(bs={}));iv.exports=bs});var sv=_(io=>{"use strict";var VS=io&&io.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(io,"__esModule",{value:!0});var XS=VS(Rs()),ro=XS.default("https-proxy-agent:parse-proxy-response");function JS(t){return new Promise((e,n)=>{let r=0,i=[];function o(){let m=t.read();m?h(m):t.once("readable",o)}function s(){t.removeListener("end",a),t.removeListener("error",p),t.removeListener("close",c),t.removeListener("readable",o)}function c(m){ro("onclose had error %o",m)}function a(){ro("onend")}function p(m){s(),ro("onerror %o",m),n(m)}function h(m){i.push(m),r+=m.length;let C=Buffer.concat(i,r);if(C.indexOf(`\r
\r
`)===-1){ro("have not received end of HTTP headers yet..."),o();return}let S=C.toString("ascii",0,C.indexOf(`\r
`)),k=+S.split(" ")[1];ro("got proxy server response: %o",S),e({statusCode:k,buffered:C})}t.on("error",p),t.on("close",c),t.on("end",a),o()})}io.default=JS});var lv=_(xr=>{"use strict";var YS=xr&&xr.__awaiter||function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function c(h){try{p(r.next(h))}catch(m){s(m)}}function a(h){try{p(r.throw(h))}catch(m){s(m)}}function p(h){h.done?o(h.value):i(h.value).then(c,a)}p((r=r.apply(t,e||[])).next())})},ui=xr&&xr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xr,"__esModule",{value:!0});var av=ui(require("net")),cv=ui(require("tls")),QS=ui(require("url")),ZS=ui(require("assert")),e_=ui(Rs()),t_=ov(),n_=ui(sv()),oo=e_.default("https-proxy-agent:agent"),uv=class extends t_.Agent{constructor(e){let n;if(typeof e=="string"?n=QS.default.parse(e):n=e,!n)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");oo("creating new HttpsProxyAgent instance: %o",n);super(n);let r=Object.assign({},n);this.secureProxy=n.secureProxy||o_(r.protocol),r.host=r.hostname||r.host,typeof r.port=="string"&&(r.port=parseInt(r.port,10)),!r.port&&r.host&&(r.port=this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in r)&&(r.ALPNProtocols=["http 1.1"]),r.host&&r.path&&(delete r.path,delete r.pathname),this.proxy=r}callback(e,n){return YS(this,void 0,void 0,function*(){let{proxy:r,secureProxy:i}=this,o;i?(oo("Creating `tls.Socket`: %o",r),o=cv.default.connect(r)):(oo("Creating `net.Socket`: %o",r),o=av.default.connect(r));let s=Object.assign({},r.headers),a=`CONNECT ${`${n.host}:${n.port}`} HTTP/1.1\r
`;r.auth&&(s["Proxy-Authorization"]=`Basic ${Buffer.from(r.auth).toString("base64")}`);let{host:p,port:h,secureEndpoint:m}=n;i_(h,m)||(p+=`:${h}`),s.Host=p,s.Connection="close";for(let N of Object.keys(s))a+=`${N}: ${s[N]}\r
`;let C=n_.default(o);o.write(`${a}\r
`);let{statusCode:v,buffered:S}=yield C;if(v===200){if(e.once("socket",r_),n.secureEndpoint){let N=n.servername||n.host;if(!N)throw new Error('Could not determine "servername"');return oo("Upgrading socket connection to TLS"),cv.default.connect(Object.assign(Object.assign({},s_(n,"host","hostname","path","port")),{socket:o,servername:N}))}return o}o.destroy();let k=new av.default.Socket;return k.readable=!0,e.once("socket",N=>{oo("replaying proxy buffer for failed request"),ZS.default(N.listenerCount("data")>0),N.push(S),N.push(null)}),k})}};xr.default=uv;function r_(t){t.resume()}function i_(t,e){return Boolean(!e&&t===80||e&&t===443)}function o_(t){return typeof t=="string"?/^https:?$/i.test(t):!1}function s_(t,...e){let n={},r;for(r in t)e.includes(r)||(n[r]=t[r]);return n}});var fv=_((zc,dv)=>{"use strict";var a_=zc&&zc.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},Hc=a_(lv());function Wc(t){return new Hc.default(t)}(function(t){t.HttpsProxyAgent=Hc.default,t.prototype=Hc.default.prototype})(Wc||(Wc={}));dv.exports=Wc});Ov(exports,{activate:()=>bv,deactivate:()=>Tv});var ne=re(require("vscode")),wv=re(require("os"));var A=re(require("vscode")),Ji=re(as());var Te=re(as()),ag=new Te.RequestType("rust-analyzer/analyzerStatus"),cg=new Te.RequestType0("rust-analyzer/memoryUsage"),ug=new Te.NotificationType("experimental/serverStatus"),lg=new Te.RequestType0("rust-analyzer/reloadWorkspace"),dg=new Te.RequestType("textDocument/hover"),fg=new Te.RequestType("rust-analyzer/syntaxTree"),pg=new Te.RequestType("rust-analyzer/viewHir"),hg=new Te.RequestType("rust-analyzer/viewItemTree"),gg=new Te.RequestType("rust-analyzer/viewCrateGraph"),mg=new Te.RequestType("rust-analyzer/expandMacro"),vg=new Te.RequestType("experimental/matchingBrace"),yg=new Te.RequestType("experimental/parentModule"),Cg=new Te.RequestType("experimental/joinLines"),wg=new Te.RequestType("experimental/onEnter"),Rg=new Te.RequestType("experimental/runnables"),bg=new Te.RequestType("rust-analyzer/relatedTests"),Qr;(function(e){let t;(function(o){o.TypeHint="TypeHint",o.ParamHint="ParameterHint",o.ChainingHint="ChainingHint"})(t=e.Kind||(e.Kind={}))})(Qr||(Qr={}));var Tg=new Te.RequestType("rust-analyzer/inlayHints"),uc=new Te.RequestType("experimental/ssr"),Dg=new Te.RequestType("experimental/externalDocs"),Sg=new Te.RequestType("experimental/openCargoToml"),_g=new Te.RequestType("experimental/moveItem"),Gi;(function(n){n.Up="Up",n.Down="Down"})(Gi||(Gi={}));var Vg=re(require("path"));var Zt=re(require("vscode"));var dc=re(lc()),cs=re(require("vscode")),Eg=re(require("assert")),us=re(require("child_process")),xg=re(require("util"));function fn(t,e){try{(0,Eg.strict)(t,e)}catch(n){throw Y.error("Assertion failed:",e),n}}var Y=new class{constructor(){this.enabled=!0;this.output=cs.window.createOutputChannel("Rust Analyzer Client")}setEnabled(t){Y.enabled=t}debug(...t){!Y.enabled||Y.write("DEBUG",...t)}info(...t){Y.write("INFO",...t)}warn(...t){debugger;Y.write("WARN",...t)}error(...t){debugger;Y.write("ERROR",...t),Y.output.show(!0)}write(t,...e){let n=e.map(Y.stringify).join(" "),r=new Date().toLocaleString();Y.output.appendLine(`${t} [${r}]: ${n}`)}stringify(t){return typeof t=="string"?t:(0,xg.inspect)(t,{colors:!1,depth:6})}};async function kg(t,e,n,r){for(let i of[40,160,640,2560,10240,null])try{return await(r?t.sendRequest(e,n,r):t.sendRequest(e,n))}catch(o){if(i===null)throw Y.warn("LSP request timed out",{method:e.method,param:n,error:o}),o;if(o.code===dc.LSPErrorCodes.RequestCancelled)throw o;if(o.code!==dc.LSPErrorCodes.ContentModified)throw Y.warn("LSP request failed",{method:e.method,param:n,error:o}),o;await Dr(i)}throw"unreachable"}function Dr(t){return new Promise(e=>setTimeout(e,t))}function In(t){return t.languageId==="rust"&&t.uri.scheme==="file"}function Fn(t){return In(t.document)}function qg(t){Y.debug("Checking availability of a binary at",t);let e=(0,us.spawnSync)(t,["--version"],{encoding:"utf8"});return(e.error&&e.error.code!=="ENOENT"?Y.warn:Y.debug)(t,"--version:",e),e.status===0}function fc(t,e){return cs.commands.executeCommand("setContext",t,e)}function Og(t){let e=new Map;return async function(n){let r=e.get(n);if(r)return r;let i=await t.call(this,n);return e.set(n,i),i}}function pc(t,e){return new Promise((n,r)=>{(0,us.exec)(t,e,(i,o,s)=>{if(i){r(i);return}if(s){r(new Error(s));return}n(o.trimEnd())})})}async function hc(t){if(t.entries().length===1){let[e,n]=t.entries()[0],r=await Ig(e);r&&await ls(r,n);return}for(let[e,n]of t.entries()){let r=await Ig(e);r&&await r.edit(i=>{for(let o of n)fn(!Fg(o.newText),`bad ws edit: snippet received with multiple edits: ${JSON.stringify(t)}`),i.replace(o.range,o.newText)})}}async function Ig(t){var e;return((e=Zt.window.activeTextEditor)==null?void 0:e.document.uri)!==t&&await Zt.window.showTextDocument(t,{}),Zt.window.visibleTextEditors.find(n=>n.document.uri.toString()===t.toString())}async function ls(t,e){let n=[],r=0;await t.edit(i=>{for(let o of e){let s=Fg(o.newText);if(s){let[c,[a,p]]=s,h=c.substr(0,a),m=h.lastIndexOf(`
`),C=o.range.start.line+r+Ng(h),v=m===-1?o.range.start.character+a:h.length-m-1,S=v+p;n.push(new Zt.Selection(new Zt.Position(C,v),new Zt.Position(C,S))),i.replace(o.range,c)}else i.replace(o.range,o.newText);r+=Ng(o.newText)-(o.range.end.line-o.range.start.line)}}),n.length>0&&(t.selections=n),n.length===1&&t.revealRange(n[0],Zt.TextEditorRevealType.InCenterIfOutsideViewport)}function Fg(t){var o;let e=t.match(/\$(0|\{0:([^}]*)\})/);if(!e)return;let n=(o=e[2])!=null?o:"";if(e.index==null)return;let r=[e.index,n.length];return[t.replace(e[0],n),r]}function Ng(t){return(t.match(/\n/g)||[]).length}var Xg=re(require("child_process"));var Sr=re(require("vscode"));var We=re(require("vscode"));var Ag=re(require("child_process")),ds=re(require("os")),fs=re(require("path")),Lg=re(require("readline")),Yn=re(require("vscode"));var Vi=class{constructor(e,n){this.rootFolder=e;this.output=n}static artifactSpec(e){let n=[...e,"--message-format=json"];switch(n[0]){case"run":n[0]="build";break;case"test":{n.includes("--no-run")||n.push("--no-run");break}}let r={cargoArgs:n};return n[0]==="test"&&(r.filter=i=>i.filter(o=>o.isTest)),r}async getArtifacts(e){var r,i;let n=[];try{await this.runCargo(e.cargoArgs,o=>{if(o.reason==="compiler-artifact"&&o.executable){let s=o.target.crate_types.includes("bin"),c=o.target.kind.includes("custom-build");(s&&!c||o.profile.test)&&n.push({fileName:o.executable,name:o.target.name,kind:o.target.kind[0],isTest:o.profile.test})}else o.reason==="compiler-message"&&this.output.append(o.message.rendered)},o=>this.output.append(o))}catch(o){throw this.output.show(!0),new Error(`Cargo invocation has failed: ${o}`)}return(i=(r=e.filter)==null?void 0:r.call(e,n))!=null?i:n}async executableFromArgs(e){let n=await this.getArtifacts(Vi.artifactSpec(e));if(n.length===0)throw new Error("No compilation artifacts");if(n.length>1)throw new Error("Multiple compilation artifacts are not supported.");return n[0].fileName}async runCargo(e,n,r){let i=await gc();return await new Promise((o,s)=>{let c=Ag.spawn(i,e,{stdio:["ignore","pipe","pipe"],cwd:this.rootFolder});c.on("error",p=>s(new Error(`could not launch cargo: ${p}`))),c.stderr.on("data",p=>r(p.toString())),Lg.createInterface({input:c.stdout}).on("line",p=>{let h=JSON.parse(p);n(h)}),c.on("exit",(p,h)=>{p===0?o(p):s(new Error(`exit code: ${p}.`))})})}};async function Mg(t){let e=await mc("rustc");return await pc(`${e} --print sysroot`,{cwd:t})}async function $g(t){let e=await mc("rustc"),n=await pc(`${e} -V -v`,{cwd:t});return/commit-hash:\s(.*)$/m.exec(n)[1]}function gc(){return mc("cargo")}var mc=Og(async t=>{{let e=process.env[t.toUpperCase()];if(e)return e}if(await YD(t))return t;try{let e=Yn.Uri.joinPath(Yn.Uri.file(ds.homedir()),".cargo","bin",t);if(await jg(e))return e.fsPath}catch(e){Y.error("Failed to read the fs info",e)}return t});async function YD(t){var r;let n=((r=process.env.PATH)!=null?r:"").split(fs.delimiter).flatMap(i=>{let o=fs.join(i,t);return ds.type()==="Windows_NT"?[o,`${o}.exe`]:[o]});for await(let i of n.map(QD))if(i)return!0;return!1}async function QD(t){return jg(Yn.Uri.file(t))}async function jg(t){try{return((await Yn.workspace.fs.stat(t)).type&Yn.FileType.File)!=0}catch{return!1}}var Zr="cargo",ZD="rust",Hg=class{constructor(e){this.config=e}async provideTasks(){let e=[{command:"build",group:We.TaskGroup.Build},{command:"check",group:We.TaskGroup.Build},{command:"test",group:We.TaskGroup.Test},{command:"clean",group:We.TaskGroup.Clean},{command:"run",group:void 0}],n=[];for(let r of We.workspace.workspaceFolders||[])for(let i of e){let o=await ps(r,{type:Zr,command:i.command},`cargo ${i.command}`,[i.command],this.config.cargoRunner);o.group=i.group,n.push(o)}return n}async resolveTask(e){var r;let n=e.definition;if(n.type===Zr&&n.command){let i=[n.command].concat((r=n.args)!=null?r:[]);return await ps(e.scope,n,e.name,i,this.config.cargoRunner)}}};async function ps(t,e,n,r,i,o=!1){var c,a;let s;if(i){let p=`${i}.buildShellExecution`;try{let h={kind:Zr,args:r,cwd:e.cwd,env:e.env},m=await We.commands.executeCommand(p,h);if(m)if(m instanceof We.ShellExecution)s=m;else throw Y.debug("Invalid cargo ShellExecution",m),"Invalid cargo ShellExecution."}catch(h){if(o)throw`Cargo runner '${i}' failed! ${h}`}}if(!s){let p=(c=e.overrideCargo)!=null?c:e.overrideCargo,h=await gc(),C=[...(a=p==null?void 0:p.split(" "))!=null?a:[h],...r];s=new We.ProcessExecution(C[0],C.slice(1),e)}return new We.Task(e,t!=null?t:We.TaskScope.Workspace,n,ZD,s,["$rustc"])}function Wg(t){let e=new Hg(t);return We.tasks.registerTaskProvider(Zr,e)}var zg=re(require("os")),Et=re(require("vscode")),ei=re(require("path"));var ti=Et.window.createOutputChannel("Debug");async function hs(t,e){var c;let n=(c=t.activeRustEditor)==null?void 0:c.document.uri;if(!n)return;let r=await Ug(t,e);if(!r)return;let i=Et.workspace.getConfiguration("launch",n),o=i.get("configurations")||[],s=o.findIndex(a=>a.name===r.name);if(s!==-1){if(await Et.window.showErrorMessage(`Launch configuration '${r.name}' already exists!`,"Cancel","Update")==="Cancel")return;o[s]=r}else o.push(r);await i.update("configurations",o)}async function vc(t,e){let n,r="",o=Et.workspace.getConfiguration("launch").get("configurations")||[],s=o.findIndex(c=>c.name===e.label);return s!==-1?(n=o[s],r=" (from launch.json)",ti.clear()):n=await Ug(t,e),n?(ti.appendLine(`Launching debug configuration${r}:`),ti.appendLine(JSON.stringify(n,null,2)),Et.debug.startDebugging(void 0,n)):!1}async function Ug(t,e){if(!t.activeRustEditor)return;let r={"vadimcn.vscode-lldb":tS,"ms-vscode.cpptools":nS},i=t.config.debug,o=null;if(i.engine==="auto"){for(var s in r)if(o=Et.extensions.getExtension(s),o)break}else o=Et.extensions.getExtension(i.engine);if(!o){await Et.window.showErrorMessage("Install [CodeLLDB](https://marketplace.visualstudio.com/items?itemName=vadimcn.vscode-lldb) or [MS C++ tools](https://marketplace.visualstudio.com/items?itemName=ms-vscode.cpptools) extension for debugging.");return}ti.clear(),t.config.debug.openDebugPane&&ti.show(!0);let c=Et.workspace.workspaceFolders,a=c.length>1,p=c[0],h=!a||!e.args.workspaceRoot?p:c.find(E=>{var M;return(M=e.args.workspaceRoot)==null?void 0:M.includes(E.uri.fsPath)})||p,m=ei.normalize(h.uri.fsPath),C=a?`:${h.name}`:"";function v(E){return ei.normalize(E).replace(m,"${workspaceFolder"+C+"}")}let S=await eS(e),k=yc(e,t.config.runnableEnv),N=i.sourceFileMap;if(N==="auto"){let E=await $g(m),M=await Mg(m),q=ei.normalize(M+"/lib/rustlib/src/rust");N={},N[`/rustc/${E}/`]=q}let F=r[o.id](e,v(S),k,N);if(F.type in i.engineSettings){let E=i.engineSettings[F.type];for(var L in E)F[L]=E[L]}return F.name==="run binary"&&(F.name=`run ${ei.basename(S)}`),F.cwd&&(F.cwd=v(F.cwd)),F}async function eS(t){return await new Vi(t.args.workspaceRoot||".",ti).executableFromArgs(t.args.cargoArgs)}function tS(t,e,n,r){return{type:"lldb",request:"launch",name:t.label,program:e,args:t.args.executableArgs,cwd:t.args.workspaceRoot,sourceMap:r,sourceLanguages:["rust"],env:n}}function nS(t,e,n,r){return{type:zg.platform()==="win32"?"cppvsdbg":"cppdbg",request:"launch",name:t.label,program:e,args:t.args.executableArgs,cwd:t.args.workspaceRoot,sourceFileMap:r,env:n}}var Kg=[{iconPath:new Sr.ThemeIcon("save"),tooltip:"Save as a launch.json configurtation."}];async function Xi(t,e,n=!1,r=!0){let i=t.activeRustEditor,o=t.client;if(!i||!o)return;let s={uri:i.document.uri.toString()},c=await o.sendRequest(Rg,{textDocument:s,position:o.code2ProtocolConverter.asPosition(i.selection.active)}),a=[];e&&a.push(e);for(let p of c)e&&JSON.stringify(e.runnable)===JSON.stringify(p)||n&&(p.label.startsWith("doctest")||p.label.startsWith("cargo"))||a.push(new Bg(p));if(a.length===0){await Sr.window.showErrorMessage("There's no debug target!");return}return await new Promise(p=>{let h=[],m=v=>{p(v),h.forEach(S=>S.dispose())},C=Sr.window.createQuickPick();C.items=a,C.title="Select Runnable",r&&(C.buttons=Kg),h.push(C.onDidHide(()=>m()),C.onDidAccept(()=>m(C.selectedItems[0])),C.onDidTriggerButton(async v=>{await hs(t,C.activeItems[0].runnable),m()}),C.onDidChangeActive(v=>{r&&v.length>0&&(v[0].label.startsWith("cargo")?C.buttons=[]:C.buttons.length===0&&(C.buttons=Kg))}),C),C.show()})}var Bg=class{constructor(e){this.runnable=e;this.label=e.label}};function yc(t,e){let n={RUST_BACKTRACE:"short"};if(t.args.expectTest&&(n.UPDATE_EXPECT="1"),Object.assign(n,process.env),e)if(Array.isArray(e))for(let r of e)(!r.mask||new RegExp(r.mask).test(t.label))&&Object.assign(n,r.env);else Object.assign(n,e);return n}async function Cc(t,e){if(t.kind!=="cargo")throw`Unexpected runnable kind: ${t.kind}`;let n=wc(t),r={type:Zr,command:n[0],args:n.slice(1),cwd:t.args.workspaceRoot||".",env:yc(t,e.runnableEnv),overrideCargo:t.args.overrideCargo},i=Sr.workspace.workspaceFolders[0],o=await ps(i,r,t.label,n,e.cargoRunner,!0);return o.presentationOptions.clear=!0,o.presentationOptions.focus=!1,o}function wc(t){let e=[...t.args.cargoArgs];return t.args.cargoExtraArgs&&e.push(...t.args.cargoExtraArgs),t.args.executableArgs.length>0&&e.push("--",...t.args.executableArgs),e}var Ie=re(require("vscode"));var Rc=class{constructor(e){this.astDecorationType=Ie.window.createTextEditorDecorationType({borderColor:new Ie.ThemeColor("rust_analyzer.syntaxTreeBorder"),borderStyle:"solid",borderWidth:"2px"});this.rust2Ast=new Gg(()=>{let e=this.findAstTextEditor();if(!this.rustEditor||!e)return;let n=[];for(let r=0;r<e.document.lineCount;++r){let i=e.document.lineAt(r);if(!(i.text.lastIndexOf('"')>=0))continue;let s=this.parseRustTextRange(this.rustEditor.document,i.text);!s||n.push([s,this.findAstNodeRange(i)])}return n});e.pushCleanup(Ie.languages.registerHoverProvider({scheme:"rust-analyzer"},this)),e.pushCleanup(Ie.languages.registerDefinitionProvider({language:"rust"},this)),Ie.workspace.onDidCloseTextDocument(this.onDidCloseTextDocument,this,e.subscriptions),Ie.workspace.onDidChangeTextDocument(this.onDidChangeTextDocument,this,e.subscriptions),Ie.window.onDidChangeVisibleTextEditors(this.onDidChangeVisibleTextEditors,this,e.subscriptions),e.pushCleanup(this)}dispose(){this.setRustEditor(void 0)}onDidChangeTextDocument(e){this.rustEditor&&e.document.uri.toString()===this.rustEditor.document.uri.toString()&&this.rust2Ast.reset()}onDidCloseTextDocument(e){this.rustEditor&&e.uri.toString()===this.rustEditor.document.uri.toString()&&this.setRustEditor(void 0)}onDidChangeVisibleTextEditors(e){if(!this.findAstTextEditor()){this.setRustEditor(void 0);return}this.setRustEditor(e.find(Fn))}findAstTextEditor(){return Ie.window.visibleTextEditors.find(e=>e.document.uri.scheme==="rust-analyzer")}setRustEditor(e){this.rustEditor&&this.rustEditor!==e&&(this.rustEditor.setDecorations(this.astDecorationType,[]),this.rust2Ast.reset()),this.rustEditor=e}provideDefinition(e,n){var c;if(!this.rustEditor||e.uri.toString()!==this.rustEditor.document.uri.toString())return;let r=this.findAstTextEditor();if(!r)return;let i=(c=this.rust2Ast.get())==null?void 0:c.find(([a,p])=>a.contains(n));if(!i)return;let[o,s]=i;return r.revealRange(s),r.selection=new Ie.Selection(s.start,s.end),[{targetRange:s,targetUri:r.document.uri,originSelectionRange:o,targetSelectionRange:s}]}provideHover(e,n){if(!this.rustEditor)return;let r=e.lineAt(n.line),i=this.parseRustTextRange(this.rustEditor.document,r.text);if(!i)return;this.rustEditor.setDecorations(this.astDecorationType,[i]),this.rustEditor.revealRange(i);let o=this.rustEditor.document.getText(i),s=this.findAstNodeRange(r);return new Ie.Hover(["```rust\n"+o+"\n```"],s)}findAstNodeRange(e){let n=e.range.start,r=n.translate(void 0,e.firstNonWhitespaceCharacterIndex),i=n.translate(void 0,e.text.trimEnd().length);return new Ie.Range(r,i)}parseRustTextRange(e,n){let r=/(\d+)\.\.(\d+)/.exec(n);if(!r)return;let[i,o]=r.slice(1).map(s=>this.positionAt(e,+s));return new Ie.Range(i,o)}positionAt(e,n){if(e.eol===Ie.EndOfLine.LF)return e.positionAt(n);let r=0,i=0,o=this.cache;for((o==null?void 0:o.doc)===e&&o.offset<=n&&({line:r,offset:i}=o);;){let s=e.lineAt(r).text.length+1;if(i+s>n)return this.cache={doc:e,offset:i,line:r},e.positionAt(n+r);i+=s,r+=1}}},Gg=class{constructor(e){this.compute=e}get(){var e;return(e=this.val)!=null?e:this.val=this.compute()}reset(){this.val=void 0}};function Jg(t){let e=new class{constructor(){this.uri=A.Uri.parse("rust-analyzer-status://status");this.eventEmitter=new A.EventEmitter}provideTextDocumentContent(n){var o;if(!A.window.activeTextEditor)return"";let r={},i=(o=t.activeRustEditor)==null?void 0:o.document;return i!=null&&(r.textDocument=t.client.code2ProtocolConverter.asTextDocumentIdentifier(i)),t.client.sendRequest(ag,r)}get onDidChange(){return this.eventEmitter.event}};return t.pushCleanup(A.workspace.registerTextDocumentContentProvider("rust-analyzer-status",e)),async()=>{let n=await A.workspace.openTextDocument(e.uri);e.eventEmitter.fire(e.uri),await A.window.showTextDocument(n,{viewColumn:A.ViewColumn.Two,preserveFocus:!0})}}function Yg(t){let e=new class{constructor(){this.uri=A.Uri.parse("rust-analyzer-memory://memory");this.eventEmitter=new A.EventEmitter}provideTextDocumentContent(n){return A.window.activeTextEditor?t.client.sendRequest(cg).then(r=>`Per-query memory usage:
`+r+`
(note: database has been cleared)`):""}get onDidChange(){return this.eventEmitter.event}};return t.pushCleanup(A.workspace.registerTextDocumentContentProvider("rust-analyzer-memory",e)),async()=>{e.eventEmitter.fire(e.uri);let n=await A.workspace.openTextDocument(e.uri);return A.window.showTextDocument(n,A.ViewColumn.Two,!0)}}function Qg(t){return async()=>{let e=t.activeRustEditor,n=t.client;if(!e||!n)return;let r=await n.sendRequest(vg,{textDocument:t.client.code2ProtocolConverter.asTextDocumentIdentifier(e.document),positions:e.selections.map(i=>n.code2ProtocolConverter.asPosition(i.active))});e.selections=e.selections.map((i,o)=>{let s=n.protocol2CodeConverter.asPosition(r[o]),c=i.isEmpty?s:i.anchor;return new A.Selection(c,s)}),e.revealRange(e.selection)}}function Zg(t){return async()=>{let e=t.activeRustEditor,n=t.client;if(!e||!n)return;let r=await n.sendRequest(Cg,{ranges:e.selections.map(i=>n.code2ProtocolConverter.asRange(i)),textDocument:t.client.code2ProtocolConverter.asTextDocumentIdentifier(e.document)});await e.edit(i=>{n.protocol2CodeConverter.asTextEdits(r).forEach(o=>{i.replace(o.range,o.newText)})})}}function em(t){return nm(t,Gi.Up)}function tm(t){return nm(t,Gi.Down)}function nm(t,e){return async()=>{let n=t.activeRustEditor,r=t.client;if(!n||!r)return;let i=await r.sendRequest(_g,{range:r.code2ProtocolConverter.asRange(n.selection),textDocument:t.client.code2ProtocolConverter.asTextDocumentIdentifier(n.document),direction:e});if(!i)return;let o=r.protocol2CodeConverter.asTextEdits(i);await ls(n,o)}}function rm(t){async function e(){let n=t.activeRustEditor,r=t.client;if(!n||!r)return!1;let i=await r.sendRequest(wg,{textDocument:t.client.code2ProtocolConverter.asTextDocumentIdentifier(n.document),position:r.code2ProtocolConverter.asPosition(n.selection.active)}).catch(s=>null);if(!i)return!1;let o=r.protocol2CodeConverter.asTextEdits(i);return await ls(n,o),!0}return async()=>{await e()||await A.commands.executeCommand("default:type",{text:`
`})}}function im(t){return async()=>{let e=t.activeRustEditor,n=t.client;if(!e||!n)return;let r=await n.sendRequest(yg,{textDocument:t.client.code2ProtocolConverter.asTextDocumentIdentifier(e.document),position:n.code2ProtocolConverter.asPosition(e.selection.active)});if(r.length===1){let i=r[0],o=n.protocol2CodeConverter.asUri(i.targetUri),s=n.protocol2CodeConverter.asRange(i.targetRange),c=await A.workspace.openTextDocument(o),a=await A.window.showTextDocument(c);a.selection=new A.Selection(s.start,s.start),a.revealRange(s,A.TextEditorRevealType.InCenter)}else{let i=e.document.uri.toString(),o=n.code2ProtocolConverter.asPosition(e.selection.active);await bc(n,i,o,r.map(s=>Ji.Location.create(s.targetUri,s.targetRange)))}}}function om(t){return async()=>{let e=t.activeRustEditor,n=t.client;if(!e||!n)return;let r=await n.sendRequest(Sg,{textDocument:t.client.code2ProtocolConverter.asTextDocumentIdentifier(e.document)});if(!r)return;let i=n.protocol2CodeConverter.asUri(r.uri),o=n.protocol2CodeConverter.asRange(r.range),s=await A.workspace.openTextDocument(i),c=await A.window.showTextDocument(s);c.selection=new A.Selection(o.start,o.start),c.revealRange(o,A.TextEditorRevealType.InCenter)}}function sm(t){return async()=>{let e=A.window.activeTextEditor,n=t.client;if(!e||!n)return;let r=e.selection.active,i=e.selections,o=t.client.code2ProtocolConverter.asTextDocumentIdentifier(e.document),s={value:"() ==>> ()",prompt:"Enter request, for example 'Foo($a) ==>> Foo::new($a)' ",validateInput:async a=>{try{await n.sendRequest(uc,{query:a,parseOnly:!0,textDocument:o,position:r,selections:i})}catch(p){return p.toString()}return null}},c=await A.window.showInputBox(s);!c||await A.window.withProgress({location:A.ProgressLocation.Notification,title:"Structured search replace in progress...",cancellable:!1},async(a,p)=>{let h=await n.sendRequest(uc,{query:c,parseOnly:!1,textDocument:o,position:r,selections:i});await A.workspace.applyEdit(n.protocol2CodeConverter.asWorkspaceEdit(h))})}}function am(t){return async()=>{let{stdout:e}=(0,Xg.spawnSync)(t.serverPath,["--version"],{encoding:"utf8"}),n=e.slice("rust-analyzer ".length).trim();A.window.showInformationMessage(`rust-analyzer version: ${n}`)}}function cm(t){return async()=>{await A.workspace.getConfiguration(`${t.config.rootSection}.inlayHints`).update("enable",!t.config.inlayHints.enable,A.ConfigurationTarget.Global)}}function um(t){let e=new class{constructor(){this.uri=A.Uri.parse("rust-analyzer://syntaxtree/tree.rast");this.eventEmitter=new A.EventEmitter;A.workspace.onDidChangeTextDocument(this.onDidChangeTextDocument,this,t.subscriptions),A.window.onDidChangeActiveTextEditor(this.onDidChangeActiveTextEditor,this,t.subscriptions)}onDidChangeTextDocument(n){In(n.document)&&Dr(10).then(()=>this.eventEmitter.fire(this.uri))}onDidChangeActiveTextEditor(n){n&&Fn(n)&&this.eventEmitter.fire(this.uri)}provideTextDocumentContent(n,r){let i=t.activeRustEditor;if(!i)return"";let o=n.query==="range=true"&&!i.selection.isEmpty?t.client.code2ProtocolConverter.asRange(i.selection):null,s={textDocument:{uri:i.document.uri.toString()},range:o};return t.client.sendRequest(fg,s,r)}get onDidChange(){return this.eventEmitter.event}};return new Rc(t),t.pushCleanup(A.workspace.registerTextDocumentContentProvider("rust-analyzer",e)),t.pushCleanup(A.languages.setLanguageConfiguration("ra_syntax_tree",{brackets:[["[",")"]]})),async()=>{let n=A.window.activeTextEditor,i=!!n&&!n.selection.isEmpty?A.Uri.parse(`${e.uri.toString()}?range=true`):e.uri,o=await A.workspace.openTextDocument(i);e.eventEmitter.fire(i),await A.window.showTextDocument(o,{viewColumn:A.ViewColumn.Two,preserveFocus:!0})}}function lm(t){let e=new class{constructor(){this.uri=A.Uri.parse("rust-analyzer://viewHir/hir.txt");this.eventEmitter=new A.EventEmitter;A.workspace.onDidChangeTextDocument(this.onDidChangeTextDocument,this,t.subscriptions),A.window.onDidChangeActiveTextEditor(this.onDidChangeActiveTextEditor,this,t.subscriptions)}onDidChangeTextDocument(n){In(n.document)&&Dr(10).then(()=>this.eventEmitter.fire(this.uri))}onDidChangeActiveTextEditor(n){n&&Fn(n)&&this.eventEmitter.fire(this.uri)}provideTextDocumentContent(n,r){let i=t.activeRustEditor,o=t.client;if(!i||!o)return"";let s={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(i.document),position:o.code2ProtocolConverter.asPosition(i.selection.active)};return o.sendRequest(pg,s,r)}get onDidChange(){return this.eventEmitter.event}};return t.pushCleanup(A.workspace.registerTextDocumentContentProvider("rust-analyzer",e)),async()=>{let n=await A.workspace.openTextDocument(e.uri);e.eventEmitter.fire(e.uri),await A.window.showTextDocument(n,{viewColumn:A.ViewColumn.Two,preserveFocus:!0})}}function dm(t){let e=new class{constructor(){this.uri=A.Uri.parse("rust-analyzer://viewItemTree/itemtree.rs");this.eventEmitter=new A.EventEmitter;A.workspace.onDidChangeTextDocument(this.onDidChangeTextDocument,this,t.subscriptions),A.window.onDidChangeActiveTextEditor(this.onDidChangeActiveTextEditor,this,t.subscriptions)}onDidChangeTextDocument(n){In(n.document)&&Dr(10).then(()=>this.eventEmitter.fire(this.uri))}onDidChangeActiveTextEditor(n){n&&Fn(n)&&this.eventEmitter.fire(this.uri)}provideTextDocumentContent(n,r){let i=t.activeRustEditor,o=t.client;if(!i||!o)return"";let s={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(i.document)};return o.sendRequest(hg,s,r)}get onDidChange(){return this.eventEmitter.event}};return t.pushCleanup(A.workspace.registerTextDocumentContentProvider("rust-analyzer",e)),async()=>{let n=await A.workspace.openTextDocument(e.uri);e.eventEmitter.fire(e.uri),await A.window.showTextDocument(n,{viewColumn:A.ViewColumn.Two,preserveFocus:!0})}}function fm(t,e){return async()=>{let n=A.Uri.file(Vg.join(t.extensionPath,"node_modules")),r=A.window.createWebviewPanel("rust-analyzer.crate-graph","rust-analyzer crate graph",A.ViewColumn.Two,{enableScripts:!0,retainContextWhenHidden:!0,localResourceRoots:[n]}),i={full:e},o=await t.client.sendRequest(gg,i),s=r.webview.asWebviewUri(n),c=`
            <!DOCTYPE html>
            <meta charset="utf-8">
            <head>
                <style>
                    /* Fill the entire view */
                    html, body { margin:0; padding:0; overflow:hidden }
                    svg { position:fixed; top:0; left:0; height:100%; width:100% }

                    /* Disable the graphviz backgroud and fill the polygons */
                    .graph > polygon { display:none; }
                    :is(.node,.edge) polygon { fill: white; }

                    /* Invert the line colours for dark themes */
                    body:not(.vscode-light) .edge path { stroke: white; }
                </style>
            </head>
            <body>
                <script type="text/javascript" src="${s}/d3/dist/d3.min.js"><\/script>
                <script type="javascript/worker" src="${s}/@hpcc-js/wasm/dist/index.min.js"><\/script>
                <script type="text/javascript" src="${s}/d3-graphviz/build/d3-graphviz.min.js"><\/script>
                <div id="graph"></div>
                <script>
                    let graph = d3.select("#graph")
                                  .graphviz()
                                  .fit(true)
                                  .zoomScaleExtent([0.1, Infinity])
                                  .renderDot(\`${o}\`);

                    d3.select(window).on("click", (event) => {
                        if (event.ctrlKey) {
                            graph.resetZoom(d3.transition().duration(100));
                        }
                    });
                <\/script>
            </body>
            `;r.webview.html=c}}function pm(t){return fm(t,!1)}function hm(t){return fm(t,!0)}function gm(t){function e(r){let i=`// Recursive expansion of ${r.name}! macro
`;return i+="// "+"=".repeat(i.length-3),i+=`

`,i+=r.expansion,i}let n=new class{constructor(){this.uri=A.Uri.parse("rust-analyzer://expandMacro/[EXPANSION].rs");this.eventEmitter=new A.EventEmitter}async provideTextDocumentContent(r){let i=A.window.activeTextEditor,o=t.client;if(!i||!o)return"";let s=i.selection.active,c=await o.sendRequest(mg,{textDocument:t.client.code2ProtocolConverter.asTextDocumentIdentifier(i.document),position:s});return c==null?"Not available":e(c)}get onDidChange(){return this.eventEmitter.event}};return t.pushCleanup(A.workspace.registerTextDocumentContentProvider("rust-analyzer",n)),async()=>{let r=await A.workspace.openTextDocument(n.uri);return n.eventEmitter.fire(n.uri),A.window.showTextDocument(r,A.ViewColumn.Two,!0)}}function mm(t){return async()=>t.client.sendRequest(lg)}async function bc(t,e,n,r){t&&await A.commands.executeCommand("editor.action.showReferences",A.Uri.parse(e),t.protocol2CodeConverter.asPosition(n),r.map(t.protocol2CodeConverter.asLocation))}function vm(t){return async(e,n,r)=>{await bc(t.client,e,n,r)}}function ym(t){return async e=>{let n=await A.window.showQuickPick(e);!n||await A.commands.executeCommand("rust-analyzer.resolveCodeAction",n.arguments)}}function Cm(t){return async e=>{let n=t.client;if(n){let r=n.protocol2CodeConverter.asUri(e.targetUri),i=n.protocol2CodeConverter.asRange(e.targetSelectionRange);i=i.with({end:i.start}),await A.window.showTextDocument(r,{selection:i})}}}function wm(t){return async()=>{let e=t.client,n=A.window.activeTextEditor;if(!n||!e)return;let r=n.selection.active,i={uri:n.document.uri.toString()},o=await e.sendRequest(Dg,{position:r,textDocument:i});o!=null&&await A.commands.executeCommand("vscode.open",A.Uri.parse(o))}}function Rm(t){let e=t.client;return async n=>{var a;n.command=void 0;let r=await e.sendRequest(Ji.CodeActionResolveRequest.type,n);if(!r.edit)return;let i=r.edit,o=e.protocol2CodeConverter.asWorkspaceEdit(i),s=Vc(uo({},i),{documentChanges:(a=i.documentChanges)==null?void 0:a.filter(p=>"kind"in p)}),c=e.protocol2CodeConverter.asWorkspaceEdit(s);await A.workspace.applyEdit(c),await hc(o)}}function bm(t){return async e=>{await hc(e)}}function Tm(t){let e;return async()=>{let n=await Xi(t,e);if(!n)return;n.detail="rerun",e=n;let r=await Cc(n.runnable,t.config);return await A.tasks.executeTask(r)}}function Dm(t){let e=t.client;return async()=>{let n=t.activeRustEditor;!n||!e||await A.window.withProgress({location:A.ProgressLocation.Notification,title:"Looking for tests...",cancellable:!1},async(r,i)=>{let o=n.document.uri.toString(),s=e.code2ProtocolConverter.asPosition(n.selection.active),a=(await e.sendRequest(bg,{textDocument:{uri:o},position:s})).map(p=>Ji.Location.create(p.runnable.location.targetUri,p.runnable.location.targetSelectionRange));await bc(e,o,s,a)})}}function Sm(t){return async e=>{if(!t.activeRustEditor)return;let r=await Cc(e,t.config);return r.group=A.TaskGroup.Build,r.presentationOptions={reveal:A.TaskRevealKind.Always,panel:A.TaskPanelKind.Dedicated,clear:!0},A.tasks.executeTask(r)}}function _m(t){let e;return async()=>{let n=await Xi(t,e);if(!n)return;let r=wc(n.runnable),i=["cargo",...r].join(" ");await A.env.clipboard.writeText(i),await A.window.showInformationMessage("Cargo invocation copied to the clipboard.")}}function Pm(t){let e;return async()=>{let n=await Xi(t,e,!0);if(!!n)return n.detail="restart",e=n,await vc(t,n.runnable)}}function Em(t){return async e=>{await vc(t,e)}}function xm(t){return async()=>{let e=await Xi(t,void 0,!0,!1);!e||await hs(t,e.runnable)}}var en=re(require("vscode"));function km(t){let e={updater:null,async onConfigChange(){let n=t.config.inlayHints.typeHints||t.config.inlayHints.parameterHints||t.config.inlayHints.chainingHints;if(!(t.config.inlayHints.enable&&n))return this.dispose();await Dr(100),this.updater?(this.updater.updateInlayHintsStyles(),this.updater.syncCacheAndRenderHints()):this.updater=new qm(t)},dispose(){var n;(n=this.updater)==null||n.dispose(),this.updater=null}};t.pushCleanup(e),en.workspace.onDidChangeConfiguration(e.onConfigChange,e,t.subscriptions),e.onConfigChange().catch(console.error)}function ni(t,e){let[n,r]={type:["after",s=>`\u200C: ${s}`],parameter:["before",s=>`${s}: `],chaining:["after",s=>`\u200C: ${s}`]}[t],i=new en.ThemeColor(`rust_analyzer.inlayHints.foreground.${t}Hints`),o=new en.ThemeColor(`rust_analyzer.inlayHints.background.${t}Hints`);return{decorationType:en.window.createTextEditorDecorationType({[n]:{color:i,backgroundColor:o,fontStyle:"normal",fontWeight:"normal",textDecoration:e?";font-size:smaller":"none"}}),toDecoration(s,c){return{range:c.asRange(s.range),renderOptions:{[n]:{contentText:r(s.label)}}}}}}var rS={typeHints:ni("type",!0),paramHints:ni("parameter",!0),chainingHints:ni("chaining",!0)},iS={typeHints:ni("type",!1),paramHints:ni("parameter",!1),chainingHints:ni("chaining",!1)},qm=class{constructor(e){this.ctx=e;this.sourceFiles=new Map;this.disposables=[];this.pendingDisposeDecorations=void 0;en.window.onDidChangeVisibleTextEditors(this.onDidChangeVisibleTextEditors,this,this.disposables),en.workspace.onDidChangeTextDocument(this.onDidChangeTextDocument,this,this.disposables),e.visibleRustEditors.forEach(n=>this.sourceFiles.set(n.document.uri.toString(),{document:n.document,inlaysRequest:null,cachedDecorations:null})),this.updateInlayHintsStyles(),this.syncCacheAndRenderHints()}dispose(){this.sourceFiles.forEach(e=>{var n;return(n=e.inlaysRequest)==null?void 0:n.cancel()}),this.ctx.visibleRustEditors.forEach(e=>this.renderDecorations(e,{param:[],type:[],chaining:[]})),this.disposables.forEach(e=>e.dispose())}onDidChangeTextDocument({contentChanges:e,document:n}){e.length===0||!In(n)||this.syncCacheAndRenderHints()}updateInlayHintsStyles(){let e=this.ctx.config.inlayHints.smallerHints?rS:iS;e!==this.inlayHintsStyles&&(this.pendingDisposeDecorations=this.inlayHintsStyles,this.inlayHintsStyles=e)}syncCacheAndRenderHints(){this.sourceFiles.forEach((e,n)=>this.fetchHints(e).then(r=>{if(!!r){e.cachedDecorations=this.hintsToDecorations(r);for(let i of this.ctx.visibleRustEditors)i.document.uri.toString()===n&&this.renderDecorations(i,e.cachedDecorations)}}))}onDidChangeVisibleTextEditors(){let e=new Map;this.ctx.visibleRustEditors.forEach(async n=>{var o;let r=n.document.uri.toString(),i=(o=this.sourceFiles.get(r))!=null?o:{document:n.document,inlaysRequest:null,cachedDecorations:null};if(e.set(r,i),!i.cachedDecorations){let s=await this.fetchHints(i);if(!s)return;i.cachedDecorations=this.hintsToDecorations(s)}this.renderDecorations(n,i.cachedDecorations)}),this.sourceFiles.forEach((n,r)=>{var i;e.has(r)||(i=n.inlaysRequest)==null||i.cancel()}),this.sourceFiles=e}renderDecorations(e,n){let{typeHints:r,paramHints:i,chainingHints:o}=this.inlayHintsStyles;if(this.pendingDisposeDecorations!==void 0){let{typeHints:s,paramHints:c,chainingHints:a}=this.pendingDisposeDecorations;e.setDecorations(s.decorationType,[]),e.setDecorations(c.decorationType,[]),e.setDecorations(a.decorationType,[])}e.setDecorations(r.decorationType,n.type),e.setDecorations(i.decorationType,n.param),e.setDecorations(o.decorationType,n.chaining)}hintsToDecorations(e){let{typeHints:n,paramHints:r,chainingHints:i}=this.inlayHintsStyles,o={type:[],param:[],chaining:[]},s=this.ctx.client.protocol2CodeConverter;for(let c of e)switch(c.kind){case Qr.Kind.TypeHint:{o.type.push(n.toDecoration(c,s));continue}case Qr.Kind.ParamHint:{o.param.push(r.toDecoration(c,s));continue}case Qr.Kind.ChainingHint:{o.chaining.push(i.toDecoration(c,s));continue}}return o}async fetchHints(e){var i;(i=e.inlaysRequest)==null||i.cancel();let n=new en.CancellationTokenSource;e.inlaysRequest=n;let r={textDocument:{uri:e.document.uri.toString()}};return kg(this.ctx.client,Tg,r,n.token).catch(o=>null).finally(()=>{e.inlaysRequest===n&&(e.inlaysRequest=null)})}};var tn=re(require("vscode"));var pn=re(lc()),hn=re(require("vscode"));var Yi=re(Sn());var Tc=re(require("vscode"));function oS(t){return`[${t.title}](command:${t.command}?${encodeURIComponent(JSON.stringify(t.arguments))} '${t.tooltip}')`}function sS(t){let e=t.map(r=>(r.title?r.title+" ":"")+r.commands.map(oS).join(" | ")).join("___"),n=new hn.MarkdownString(e);return n.isTrusted=!0,n}function Om(t,e,n){let r=Object.assign({},process.env);Object.assign(r,n);let i={command:t,options:{env:r}},o={run:i,debug:i},s=hn.window.createOutputChannel("Rust Analyzer Language Server Trace"),c=hn.workspace.getConfiguration("rust-analyzer");e.kind==="Detached Files"&&(c=uo({detachedFiles:e.files.map(h=>h.uri.fsPath)},c));let a={documentSelector:[{scheme:"file",language:"rust"}],initializationOptions:c,diagnosticCollectionName:"rustc",traceOutputChannel:s,middleware:{async provideHover(h,m,C,v){var N;let S=hn.window.activeTextEditor,k=((N=S==null?void 0:S.selection)==null?void 0:N.contains(m))?p.code2ProtocolConverter.asRange(S.selection):p.code2ProtocolConverter.asPosition(m);return p.sendRequest(dg,{textDocument:p.code2ProtocolConverter.asTextDocumentIdentifier(h),position:k},C).then(F=>{let L=p.protocol2CodeConverter.asHover(F);if(L){let E=F.actions;E&&L.contents.push(sS(E))}return L},F=>(p.handleFailedRequest(pn.HoverRequest.type,C,F,null),Promise.resolve(null)))},async provideCodeActions(h,m,C,v,S){let k={textDocument:p.code2ProtocolConverter.asTextDocumentIdentifier(h),range:p.code2ProtocolConverter.asRange(m),context:p.code2ProtocolConverter.asCodeActionContext(C)};return p.sendRequest(pn.CodeActionRequest.type,k,v).then(N=>{if(N===null)return;let F=[],L=new Map;for(let E of N){if(pn.CodeAction.is(E)){fn(!E.command,"We don't expect to receive commands in CodeActions");let X=p.protocol2CodeConverter.asCodeAction(E);F.push(X);continue}fn(aS(E),"We don't expect edits or commands here");let M=p.protocol2CodeConverter.asCodeActionKind(E.kind),q=new hn.CodeAction(E.title,M),B=E.group;if(q.command={command:"rust-analyzer.resolveCodeAction",title:E.title,arguments:[E]},q.edit=new Tc.WorkspaceEdit,B){let X=L.get(B);X||(X={index:F.length,items:[]},L.set(B,X),F.push(q)),X.items.push(q)}else F.push(q)}for(let[E,{index:M,items:q}]of L)if(q.length===1)F[M]=q[0];else{let B=new hn.CodeAction(E);B.kind=q[0].kind,B.command={command:"rust-analyzer.applyActionGroup",title:"",arguments:[q.map(X=>({label:X.title,arguments:X.command.arguments[0]}))]},B.edit=new Tc.WorkspaceEdit,F[M]=B}return F},N=>{})}}},p=new pn.LanguageClient("rust-analyzer","Rust Analyzer Language Server",o,a);return p.registerFeature(new Im),p}var Im=class{fillClientCapabilities(e){var r;let n=(r=e.experimental)!=null?r:{};n.snippetTextEdit=!0,n.codeActionGroup=!0,n.hoverActions=!0,n.serverStatusNotification=!0,n.commands={commands:["rust-analyzer.runSingle","rust-analyzer.debugSingle","rust-analyzer.showReferences","rust-analyzer.gotoLocation","editor.action.triggerParameterHints"]},e.experimental=n}initialize(e,n){}dispose(){}};function aS(t){let e=t;return e&&Yi.string(e.title)&&(e.diagnostics===void 0||Yi.typedArray(e.diagnostics,pn.Diagnostic.is))&&(e.kind===void 0||Yi.string(e.kind))&&e.edit===void 0&&e.command===void 0}var ri=class{constructor(e,n,r,i,o){this.config=e;this.extCtx=n;this.client=r;this.serverPath=i;this.statusBar=o}static async create(e,n,r,i){let o=Om(r,i,e.serverExtraEnv),s=tn.window.createStatusBarItem(tn.StatusBarAlignment.Left);n.subscriptions.push(s),s.text="rust-analyzer",s.tooltip="ready",s.command="rust-analyzer.analyzerStatus",s.show();let c=new ri(e,n,o,r,s);return c.pushCleanup(o.start()),await o.onReady(),o.onNotification(ug,a=>c.setServerStatus(a)),c}get activeRustEditor(){let e=tn.window.activeTextEditor;return e&&Fn(e)?e:void 0}get visibleRustEditors(){return tn.window.visibleTextEditors.filter(Fn)}registerCommand(e,n){let r=`rust-analyzer.${e}`,i=n(this),o=tn.commands.registerCommand(r,i);this.pushCleanup(o)}get extensionPath(){return this.extCtx.extensionPath}get globalState(){return this.extCtx.globalState}get subscriptions(){return this.extCtx.subscriptions}setServerStatus(e){var r;this.statusBar.tooltip=(r=e.message)!=null?r:"Ready";let n="";switch(e.health){case"ok":this.statusBar.color=void 0;break;case"warning":this.statusBar.tooltip+=`
Click to reload.`,this.statusBar.command="rust-analyzer.reloadWorkspace",this.statusBar.color=new tn.ThemeColor("notificationsWarningIcon.foreground"),n="$(warning) ";break;case"error":this.statusBar.tooltip+=`
Click to reload.`,this.statusBar.command="rust-analyzer.reloadWorkspace",this.statusBar.color=new tn.ThemeColor("notificationsErrorIcon.foreground"),n="$(error) ";break}e.quiescent||(n="$(sync~spin) "),this.statusBar.text=`${n} rust-analyzer`}pushCleanup(e){this.extCtx.subscriptions.push(e)}};var gn=re(require("vscode"));var cS="nightly",Dc=class{constructor(e){this.extensionId="matklad.rust-analyzer";this.rootSection="rust-analyzer";this.requiresReloadOpts=["serverPath","server","cargo","procMacro","files","highlighting","updates.channel","lens","hoverActions"].map(e=>`${this.rootSection}.${e}`);this.package=gn.extensions.getExtension(this.extensionId).packageJSON;this.globalStorageUri=e.globalStorageUri,gn.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,e.subscriptions),this.refreshLogging()}refreshLogging(){Y.setEnabled(this.traceExtension),Y.info("Extension version:",this.package.version);let e=Object.entries(this.cfg).filter(([n,r])=>!(r instanceof Function));Y.info("Using configuration",Object.fromEntries(e))}async onDidChangeConfiguration(e){this.refreshLogging();let n=this.requiresReloadOpts.find(i=>e.affectsConfiguration(i));if(!n)return;await gn.window.showInformationMessage(`Changing "${n}" requires a reload`,"Reload now")==="Reload now"&&await gn.commands.executeCommand("workbench.action.reloadWindow")}get cfg(){return gn.workspace.getConfiguration(this.rootSection)}get(e){return this.cfg.get(e)}get serverPath(){var e;return(e=this.get("server.path"))!=null?e:this.get("serverPath")}get serverExtraEnv(){var e;return(e=this.get("server.extraEnv"))!=null?e:{}}get channel(){return this.get("updates.channel")}get askBeforeDownload(){return this.get("updates.askBeforeDownload")}get traceExtension(){return this.get("trace.extension")}get httpProxy(){return gn.workspace.getConfiguration("http").get("proxy")||process.env.https_proxy||process.env.HTTPS_PROXY}get inlayHints(){return{enable:this.get("inlayHints.enable"),typeHints:this.get("inlayHints.typeHints"),parameterHints:this.get("inlayHints.parameterHints"),chainingHints:this.get("inlayHints.chainingHints"),smallerHints:this.get("inlayHints.smallerHints"),maxLength:this.get("inlayHints.maxLength")}}get cargoRunner(){return this.get("cargoRunner")}get runnableEnv(){return this.get("runnableEnv")}get debug(){let e=this.get("debug.sourceFileMap");if(e!=="auto"){let n=this.get("debug.sourceFileMap"),{["/rustc/<id>"]:r}=n;e=Jc(n,["/rustc/<id>"])}return{engine:this.get("debug.engine"),engineSettings:this.get("debug.engineSettings"),openDebugPane:this.get("debug.openDebugPane"),sourceFileMap:e}}get hoverActions(){return{enable:this.get("hoverActions.enable"),implementations:this.get("hoverActions.implementations"),references:this.get("hoverActions.references"),run:this.get("hoverActions.run"),debug:this.get("hoverActions.debug"),gotoTypeDef:this.get("hoverActions.gotoTypeDef")}}get currentExtensionIsNightly(){return this.package.releaseTag===cS}};var gs=class{constructor(e){this.globalState=e;let{lastCheck:n,nightlyReleaseId:r,serverVersion:i}=this;Y.info("PersistentState:",{lastCheck:n,nightlyReleaseId:r,serverVersion:i})}get lastCheck(){return this.globalState.get("lastCheck")}async updateLastCheck(e){await this.globalState.update("lastCheck",e)}get nightlyReleaseId(){return this.globalState.get("releaseId")}async updateNightlyReleaseId(e){await this.globalState.update("releaseId",e)}get serverVersion(){return this.globalState.get("serverVersion")}async updateServerVersion(e){await this.globalState.update("serverVersion",e)}get githubToken(){return this.globalState.get("githubToken")}async updateGithubToken(e){await this.globalState.update("githubToken",e)}};var so=re(Um()),at=re(require("vscode")),hv=re(require("stream")),gv=re(require("crypto")),mv=re(require("fs")),vv=re(require("zlib")),yv=re(require("util")),Cv=re(require("path"));var pv=fv(),c_=yv.promisify(hv.pipeline),u_="https://api.github.com",l_="rust-analyzer",d_="rust-analyzer";async function Uc(t,e,n){let r=`/repos/${l_}/${d_}/releases/tags/${t}`,i=u_+r;Y.debug("Issuing request for released artifacts metadata to",i);let o={Accept:"application/vnd.github.v3+json"};e!=null&&(o.Authorization="token "+e);let s=await(()=>n?(Y.debug(`Fetching release metadata via proxy: ${n}`),(0,so.default)(i,{headers:o,agent:new pv(n)})):(0,so.default)(i,{headers:o}))();if(!s.ok)throw Y.error("Error fetching artifact release info",{requestUrl:i,releaseTag:t,response:{headers:s.headers,status:s.status,body:await s.text()}}),new Error(`Got response ${s.status} when trying to fetch release info for ${t} release`);return await s.json()}async function Kc(t){let e=gv.randomBytes(5).toString("hex"),n=Cv.parse(t.dest.fsPath),r=at.Uri.joinPath(at.Uri.file(n.dir),`${n.name}-stale-${e}${n.ext}`),i=at.Uri.joinPath(at.Uri.file(n.dir),`${n.name}${e}`);await at.window.withProgress({location:at.ProgressLocation.Notification,cancellable:!1,title:t.progressTitle},async(s,c)=>{let a=0;await f_(t.url,i,t.mode,!!t.gunzip,t.httpProxy,(p,h)=>{let m=Math.round(p/h*100);m!==a&&(s.report({message:`${m.toFixed(0)}%`,increment:m-a}),a=m)})});try{await at.workspace.fs.rename(t.dest,r,{overwrite:!0}),Y.info(`Renamed old server binary ${t.dest.fsPath} to ${r.fsPath}`)}catch(s){let c=s;(!c.code||c.code!=="EntryNotFound"&&c.name.indexOf("EntryNotFound")===-1)&&Y.error(`Cannot rename existing server instance: ${s}"`)}try{await at.workspace.fs.rename(i,t.dest,{overwrite:!0})}catch(s){Y.error(`Cannot update server binary: ${s}`)}let o=at.Uri.file(n.dir);try{let s=await at.workspace.fs.readDirectory(o);for(let[c,a]of s)try{if(c.includes(`${n.name}-stale-`)){let p=at.Uri.joinPath(o,c);try{await at.workspace.fs.delete(p),Y.info(`Removed old server binary ${p.fsPath}`)}catch(h){Y.error(`Unable to remove old server binary ${p.fsPath}`)}}}catch(p){Y.error(`Unable to parse ${c}`)}}catch(s){Y.error(`Unable to enumerate contents of ${o.fsPath}`)}}async function f_(t,e,n,r,i,o){let s=t.toString(),c=await(()=>i?(Y.debug(`Downloading ${s} via proxy: ${i}`),(0,so.default)(s,{agent:new pv(i)})):(0,so.default)(s))();if(!c.ok)throw Y.error("Error",c.status,"while downloading file from",s),Y.error({body:await c.text(),headers:c.headers}),new Error(`Got response ${c.status} when trying to download a file.`);let a=Number(c.headers.get("content-length"));fn(!Number.isNaN(a),"Sanity check of content-length protocol"),Y.debug("Downloading file of",a,"bytes size from",s,"to",e.fsPath);let p=0;c.body.on("data",C=>{p+=C.length,o(p,a)});let h=mv.createWriteStream(e.fsPath,{mode:n}),m=r?c.body.pipe(vv.createGunzip()):c.body;await c_(m,h)}var Ts=re(require("child_process")),vt,Rv="inRustProject";async function bv(t){await p_(t).catch(e=>{throw ne.window.showErrorMessage(`Cannot activate rust-analyzer: ${e.message}`),e})}async function p_(t){let e=new Dc(t),n=new gs(t.globalState),r=await g_(e,n).catch(i=>{let o="bootstrap error. ";throw(i.code==="EBUSY"||i.code==="ETXTBSY"||i.code==="EPERM")&&(o+="Other vscode windows might be using rust-analyzer, ",o+="you should close them and reload this window to retry. "),o+='See the logs in "OUTPUT > Rust Analyzer Client" (should open automatically). ',o+='To enable verbose logs use { "rust-analyzer.trace.extension": true }',Y.error("Bootstrap error",i),new Error(o)});if((ne.workspace.workspaceFolders||[]).length===0){let i=ne.workspace.textDocuments.filter(o=>In(o));if(i.length>0)vt=await ri.create(e,t,r,{kind:"Detached Files",files:i});else throw new Error("no rust files are opened")}else vt=await ri.create(e,t,r,{kind:"Workspace Folder"}),vt.pushCleanup(Wg(vt.config));await h_(t,vt),km(vt),b_(),vt.pushCleanup(T_()),ne.workspace.onDidChangeConfiguration(i=>{var o;return(o=vt==null?void 0:vt.client)==null?void 0:o.sendNotification("workspace/didChangeConfiguration",{settings:""}).catch(Y.error)},null,vt.subscriptions)}async function h_(t,e){let n=ne.commands.registerCommand("rust-analyzer.onEnter",()=>ne.commands.executeCommand("default:type",{text:`
`}));t.subscriptions.push(n),await fc(Rv,!0),e.registerCommand("reload",r=>async()=>{for(ne.window.showInformationMessage("Reloading rust-analyzer..."),await Tv();t.subscriptions.length>0;)try{t.subscriptions.pop().dispose()}catch(i){Y.error("Dispose error:",i)}await bv(t).catch(Y.error)}),e.registerCommand("updateGithubToken",r=>async()=>{await Sv(new gs(r.globalState))}),e.registerCommand("analyzerStatus",Jg),e.registerCommand("memoryUsage",Yg),e.registerCommand("reloadWorkspace",mm),e.registerCommand("matchingBrace",Qg),e.registerCommand("joinLines",Zg),e.registerCommand("parentModule",im),e.registerCommand("syntaxTree",um),e.registerCommand("viewHir",lm),e.registerCommand("viewItemTree",dm),e.registerCommand("viewCrateGraph",pm),e.registerCommand("viewFullCrateGraph",hm),e.registerCommand("expandMacro",gm),e.registerCommand("run",Tm),e.registerCommand("copyRunCommandLine",_m),e.registerCommand("debug",Pm),e.registerCommand("newDebugConfig",xm),e.registerCommand("openDocs",wm),e.registerCommand("openCargoToml",om),e.registerCommand("peekTests",Dm),e.registerCommand("moveItemUp",em),e.registerCommand("moveItemDown",tm),n.dispose(),e.registerCommand("onEnter",rm),e.registerCommand("ssr",sm),e.registerCommand("serverVersion",am),e.registerCommand("toggleInlayHints",cm),e.registerCommand("runSingle",Sm),e.registerCommand("debugSingle",Em),e.registerCommand("showReferences",vm),e.registerCommand("applySnippetWorkspaceEdit",bm),e.registerCommand("resolveCodeAction",Rm),e.registerCommand("applyActionGroup",ym),e.registerCommand("gotoLocation",Cm)}async function Tv(){await fc(Rv,void 0),await(vt==null?void 0:vt.client.stop()),vt=void 0}async function g_(t,e){return await ne.workspace.fs.createDirectory(t.globalStorageUri).then(),t.currentExtensionIsNightly||await e.updateNightlyReleaseId(void 0),await m_(t,e),await v_(t,e)}async function m_(t,e){if(t.package.releaseTag===null)return;if(t.channel==="stable"){t.currentExtensionIsNightly&&ne.window.showWarningMessage("You are running a nightly version of rust-analyzer extension. To switch to stable, uninstall the extension and re-install it from the marketplace");return}if(Dv(t))return;let n=Date.now(),r=e.nightlyReleaseId===void 0;if(t.currentExtensionIsNightly){let a=e.lastCheck,p=60*60*1e3;if(!(r||n-(a!=null?a:0)>p))return}let i=await Ds(e,async()=>await Uc("nightly",e.githubToken,t.httpProxy)).catch(async a=>{Y.error(a),r&&await ne.window.showErrorMessage(`Failed to download rust-analyzer nightly: ${a}`)});if(i===void 0){r&&await ne.window.showErrorMessage("Failed to download rust-analyzer nightly: empty release contents returned");return}if(t.currentExtensionIsNightly&&i.id===e.nightlyReleaseId||await ne.window.showInformationMessage("New version of rust-analyzer (nightly) is available (requires reload).","Update")!=="Update")return;let s=i.assets.find(a=>a.name==="rust-analyzer.vsix");fn(!!s,`Bad release: ${JSON.stringify(i)}`);let c=ne.Uri.joinPath(t.globalStorageUri,"rust-analyzer.vsix");await Ds(e,async()=>{await Kc({url:s.browser_download_url,dest:c,progressTitle:"Downloading rust-analyzer extension",httpProxy:t.httpProxy})}),await ne.commands.executeCommand("workbench.extensions.installExtension",c),await ne.workspace.fs.delete(c),await e.updateNightlyReleaseId(i.id),await e.updateLastCheck(n),await ne.commands.executeCommand("workbench.action.reloadWindow")}async function v_(t,e){let n=await C_(t,e);if(!n)throw new Error("Rust Analyzer Language Server is not available. Please, ensure its [proper installation](https://rust-analyzer.github.io/manual.html#installation).");if(Y.info("Using server binary at",n),!qg(n))throw t.serverPath?new Error(`Failed to execute ${n} --version. \`config.server.path\` or \`config.serverPath\` has been set explicitly.            Consider removing this config or making a valid server binary available at that path.`):new Error(`Failed to execute ${n} --version`);return n}async function y_(t){await ne.window.withProgress({location:ne.ProgressLocation.Notification,title:"Patching rust-analyzer for NixOS"},async(e,n)=>{let r=`
            {srcStr, pkgs ? import <nixpkgs> {}}:
                pkgs.stdenv.mkDerivation {
                    name = "rust-analyzer";
                    src = /. + srcStr;
                    phases = [ "installPhase" "fixupPhase" ];
                    installPhase = "cp $src $out";
                    fixupPhase = ''
                    chmod 755 $out
                    patchelf --set-interpreter "$(cat $NIX_CC/nix-support/dynamic-linker)" $out
                    '';
                }
            `,i=ne.Uri.file(t.fsPath+"-orig");await ne.workspace.fs.rename(t,i,{overwrite:!0});try{e.report({message:"Patching executable",increment:20}),await new Promise((o,s)=>{var a,p;let c=(0,Ts.exec)(`nix-build -E - --argstr srcStr '${i.fsPath}' -o '${t.fsPath}'`,(h,m,C)=>{h!=null?s(Error(C)):o(m)});(a=c.stdin)==null||a.write(r),(p=c.stdin)==null||p.end()})}finally{await ne.workspace.fs.delete(i)}})}async function C_(t,e){let n=Dv(t);if(n)return n.startsWith("~/")?wv.homedir()+n.slice("~".length):n;if(t.package.releaseTag===null)return"rust-analyzer";let i={"ia32 win32":"x86_64-pc-windows-msvc","x64 win32":"x86_64-pc-windows-msvc","x64 linux":"x86_64-unknown-linux-gnu","x64 darwin":"x86_64-apple-darwin","arm64 win32":"aarch64-pc-windows-msvc","arm64 linux":"aarch64-unknown-linux-gnu","arm64 darwin":"aarch64-apple-darwin"}[`${process.arch} ${process.platform}`];if(i===void 0){await ne.window.showErrorMessage("Unfortunately we don't ship binaries for your platform yet. You need to manually clone rust-analyzer repository and run `cargo xtask install --server` to build the language server from sources. If you feel that your platform should be supported, please create an issue about that [here](https://github.com/rust-analyzer/rust-analyzer/issues) and we will consider it.");return}i==="x86_64-unknown-linux-gnu"&&R_()&&(i="x86_64-unknown-linux-musl");let o=i.indexOf("-windows-")!==-1?".exe":"",s=ne.Uri.joinPath(t.globalStorageUri,`rust-analyzer-${i}${o}`);if(await ne.workspace.fs.stat(s).then(()=>!0,()=>!1)||await e.updateServerVersion(void 0),e.serverVersion===t.package.version||t.askBeforeDownload&&await ne.window.showInformationMessage(`Language server version ${t.package.version} for rust-analyzer is not installed.`,"Download now")!=="Download now")return s.fsPath;let a=t.package.releaseTag,p=await Ds(e,async()=>await Uc(a,e.githubToken,t.httpProxy)),h=p.assets.find(m=>m.name===`rust-analyzer-${i}.gz`);return fn(!!h,`Bad release: ${JSON.stringify(p)}`),await Ds(e,async()=>{await Kc({url:h.browser_download_url,dest:s,progressTitle:"Downloading rust-analyzer server",gunzip:!0,mode:493,httpProxy:t.httpProxy})}),await w_()&&await y_(s),await e.updateServerVersion(t.package.version),s.fsPath}function Dv(t){var e;return(e=process.env.__RA_LSP_SERVER_DEBUG)!=null?e:t.serverPath}async function w_(){try{return(await ne.workspace.fs.readFile(ne.Uri.file("/etc/os-release"))).toString().indexOf("ID=nixos")!==-1}catch{return!1}}function R_(){let t=(0,Ts.spawnSync)("ldd",["--version"]);return t.stderr!=null&&t.stderr.indexOf("musl libc")>=0}async function Ds(t,e){for(;;)try{return await e()}catch(n){let r=await ne.window.showErrorMessage("Failed to download: "+n.message,{},{title:"Update Github Auth Token",updateToken:!0},{title:"Retry download",retry:!0},{title:"Dismiss"});if(r==null?void 0:r.updateToken){await Sv(t);continue}else if(r==null?void 0:r.retry)continue;throw n}}async function Sv(t){let e={value:t.githubToken,password:!0,prompt:`
            This dialog allows to store a Github authorization token.
            The usage of an authorization token will increase the rate
            limit on the use of Github APIs and can thereby prevent getting
            throttled.
            Auth tokens can be created at https://github.com/settings/tokens`},n=await ne.window.showInputBox(e);n!==void 0&&(n===""?(Y.info("Clearing github token"),await t.updateGithubToken(void 0)):(Y.info("Storing new github token"),await t.updateGithubToken(n)))}function b_(){let e=[["rust-analyzer","matklad.rust-analyzer"],["Rust","rust-lang.rust"],["Rust","kalitaalexey.vscode-rust"]].filter(n=>ne.extensions.getExtension(n[1])!==void 0);if(e.length>1){let n=e[0],r=e[1];ne.window.showWarningMessage(`You have both the ${n[0]} (${n[1]}) and ${r[0]} (${r[1]}) plugins enabled. These are known to conflict and cause various functions of both plugins to not work correctly. You should disable one of them.`,"Got it").then(()=>{},console.error)}}function T_(){let t=ne.IndentAction.None;return ne.languages.setLanguageConfiguration("rust",{onEnterRules:[{beforeText:/^\s*\/{3}.*$/,action:{indentAction:t,appendText:"/// "}},{beforeText:/^\s*\/{2}\!.*$/,action:{indentAction:t,appendText:"//! "}},{beforeText:/^\s*\/\*(\*|\!)(?!\/)([^\*]|\*(?!\/))*$/,afterText:/^\s*\*\/$/,action:{indentAction:ne.IndentAction.IndentOutdent,appendText:" * "}},{beforeText:/^\s*\/\*(\*|\!)(?!\/)([^\*]|\*(?!\/))*$/,action:{indentAction:t,appendText:" * "}},{beforeText:/^(\ \ )*\ \*(\ ([^\*]|\*(?!\/))*)?$/,action:{indentAction:t,appendText:"* "}},{beforeText:/^(\ \ )*\ \*\/\s*$/,action:{indentAction:t,removeText:1}}]})}0&&(module.exports={activate,deactivate});
